Plecs {
  Name          "TIC2000_Lib"
  Version       "4.6"
  ForwardingTable {{"TIC2000_Lib/CAN Port","TIC2000_Lib/CAN/CAN Port"},{"TIC20"
"00_Lib/CAN Receive","TIC2000_Lib/CAN/CAN Receive"},{"TIC2000_Lib/CAN Transmit",""
"TIC2000_Lib/CAN/CAN Transmit"},{"TIC2000_Lib/SPI Master","TIC2000_Lib/SPI/SPI"
" Master"},{"TIC2000_Lib/SPI Slave","TIC2000_Lib/SPI/SPI Slave"},{"TIC2000_Lib"
"/Powerstage","TIC2000_Lib_Deprecated/Powerstage"}}
  CircuitModel  "ContStateSpace"
  StartTime     "0.0"
  TimeSpan      "1.0"
  Timeout       ""
  Solver        "dopri"
  MaxStep       "1e-3"
  InitStep      "-1"
  FixedStep     "1e-3"
  Refine        "1"
  ZCStepSize    "1e-9"
  RelTol        "1e-3"
  AbsTol        "-1"
  TurnOnThreshold "0"
  SyncFixedStepTasks "2"
  UseSingleCommonBaseRate "2"
  LossVariableLimitExceededMsg "3"
  NegativeSwitchLossMsg "3"
  DivisionByZeroMsg "3"
  StiffnessDetectionMsg "2"
  MaxConsecutiveZCs "1000"
  AlgebraicLoopWithStateMachineMsg "3"
  AssertionAction "1"
  InitializationCommands ""
  InitialState  "1"
  SystemState   ""
  TaskingMode   "1"
  TaskConfigurations ""
  CodeGenParameterInlining "2"
  CodeGenFloatingPointFormat "2"
  CodeGenAbsTimeUsageMsg "3"
  CodeGenBaseName ""
  CodeGenOutputDir ""
  CodeGenExtraOpts ""
  CodeGenTarget "Generic"
  CodeGenTargetSettings ""
  ExtendedMatrixPrecision "1"
  MatrixSignificanceCheck "2"
  EnableStateSpaceSplitting "2"
  DisplayStateSpaceSplitting "1"
  DiscretizationMethod "2"
  ExternalModeSettings ""
  AlgebraicLoopMethod "1"
  AlgebraicLoopTolerance "1e-6"
  ScriptsDialogGeometry ""
  ScriptsDialogSplitterPos "0"
  Terminal {
    Type          Input
    Index         "1"
  }
  Terminal {
    Type          Output
    Index         "1"
  }
  Terminal {
    Type          Input
    Index         "2"
  }
  Terminal {
    Type          Output
    Index         "2"
  }
  Terminal {
    Type          Output
    Index         "3"
  }
  Terminal {
    Type          Output
    Index         "4"
  }
  Terminal {
    Type          Output
    Index         "5"
  }
  Terminal {
    Type          Input
    Index         "3"
  }
  Terminal {
    Type          Input
    Index         "4"
  }
  Terminal {
    Type          Input
    Index         "5"
  }
  Schematic {
    Location      [844, 87; 1447, 863]
    ZoomFactor    1
    SliderPosition [0, 0]
    ShowBrowser   off
    BrowserWidth  100
    Component {
      Type          ControlTaskTrigger
      Name          "Control Task\nTrigger"
      Show          on
      Position      [40, 25]
      Direction     right
      Flipped       off
      BreakLink     off
      MaskDescription "Specifies the base sample time and trigger for the main"
" control task."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/controltasktrigger.html"
      Parameter {
        Variable      "CodeFcn"
        Value         "local block = Target.Coder.CreateTargetBlock(\"TI C2000"
"\", \"tasktrigger\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
        Show          off
      }
    }
    Component {
      Type          TargetCode
      Name          "Load"
      Show          on
      Position      [40, 85]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices ""
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "if Target.Name == \"Generic\" then\n"
"   local OutputSignal1 = StringList:new()\n"
"   OutputSignal1:append(\"0.0\")\n"
"   local OutputSignal2 = StringList:new()\n"
"   OutputSignal2:append(\"0.0\")\n"
"   OutputSignal2:append(\"0.0\")\n"
"   OutputSignal2:append(\"0.0\")\n"
"   OutputSignal2:append(\"0.0\")\n"
"\treturn {\n"
"\t\tOutputSignal = {OutputSignal1, OutputSignal2},\n"
"\t}\n"
"end\n"
"\n"
"local block = Target.Coder.CreateTargetBlock(\"TI C2000\", \"cpuload\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      MaskType      "CPU Load"
      MaskDescription "Provide the CPU load in percent."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/cpu_load_c2000.html"
      MaskDisplay   "Icon:text('CPU\\nLoad')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      MaskInit      "curComp = plecs('get','','CurrentComponent');\n"
"curPath = plecs('get','','CurrentCircuit');\n"
"path=curComp(length(curPath)+2:end);"
      MaskDialogCallback "Block:showTerminal('ts', false)\n"
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 10]
        Direction     right
      }
      Schematic {
        Location      [423, 332; 1461, 923]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          Output
          Name          "%"
          Show          off
          Position      [180, 60]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "10"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "ts"
          Show          on
          Position      [180, 105]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "10"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "4"
            Show          off
          }
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Digital In"
      Show          on
      Position      [40, 145]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "1"
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C2000\""
", \"din\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      MaskType      "Digital In"
      MaskDescription "Read a digital input."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/di_c2000.html"
      MaskDisplay   "Icon:text('Digital\\nIn')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      Parameter {
        Variable      "gpio"
        Prompt        "Digital input GPIO number(s)"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "InputType"
        Prompt        "Input characteristic"
        Type          FixedText
        PossibleValues {"Pull-up", "High impedance"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Schematic {
        Location      [86, 454; 938, 689]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [120, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "numel(gpio)"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out1"
          Show          off
          Position      [260, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "10"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "numel(gpio)"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "Out1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Digital Out"
      Show          on
      Position      [40, 205]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "1"
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C2000\""
", \"dout\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      MaskType      "Digital Out"
      MaskDescription "Set a digital ouput."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/do_c2000.html"
      MaskDisplay   "Icon:text('Digital\\nOut')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      Parameter {
        Variable      "gpio"
        Prompt        "Digital output GPIO number(s)"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "OutputType"
        Prompt        "Output characteristic"
        Type          FixedText
        PossibleValues {"Push-pull", "Open drain"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Input
        Position      [-25, 0]
        Direction     left
      }
      Schematic {
        Location      [770, 85; 1920, 271]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [260, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "numel(gpio)"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In1"
          Show          off
          Position      [120, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "InitialOutput"
            Value         "[]"
            Show          off
          }
          Parameter {
            Variable      "HasDirectFeedthrough"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "numel(gpio)"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "In1"
          SrcTerminal   1
          DstComponent  "1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "ADC"
      Show          on
      Position      [40, 270]
      Direction     up
      Flipped       off
      Frame         [-25, -25; 25, 25]
      LabelPosition [0, 28]
      LabelAlign    up
      TargetPortIndices "2"
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C2000\""
", \"adc\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      NonDftCodeFcn "local block = Target.Coder.GetTargetBlock(Block.UserData."
"bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()\n"
      MaskType      "ADC"
      MaskDescription "Output the measured voltage of the ADC peripheral.\n"
"\n"
"The output signal is calculated as input*Scale+Offset, where input is the inp"
"ut voltage in Volts."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/adc_c2000.html"
      MaskDisplay   "local function drawTrigger(x,y)\n"
"\tIcon:line({x, x}, {y-3, y+3})\n"
"\tIcon:line({x, x+2.5}, {y-3, y-3})\n"
"\tIcon:line({x, x-2.5}, {y+3, y+3})\t\n"
"\tIcon:line({x-2, x}, {y+1, y-1})\n"
"\tIcon:line({x+2, x}, {y+1, y-1})\n"
"end\n"
"\n"
"Icon:text('ADC')\n"
"\n"
"if tonumber(Dialog:get('trig')) == 2 then\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  if direction == 0.0 then\n"
"    if flipped then\n"
"\t   drawTrigger(-18, 0)\n"
"    else\n"
"\t   drawTrigger(18, 0)\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    if flipped then\n"
"\t   drawTrigger(0, -18)\n"
"    else\n"
"\t   drawTrigger(0, 18)\n"
"    end  \n"
"  end\n"
"  if direction == 0.5 then\n"
"    if flipped then\n"
"\t   drawTrigger(18, 0)\n"
"    else\n"
"\t   drawTrigger(-18, 0)\n"
"    end \n"
"  end\n"
"  if direction == 0.75 then\n"
"    if flipped then\n"
"\t   drawTrigger(0, 18) \n"
"    else\n"
"\t   drawTrigger(0, -18)\n"
"    end \n"
"  end \n"
"end\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      MaskInit      "if trig~=1 && trig~=2,\n"
"   error('Parameter \"Trigger source\" must be an integer value of 1 or 2.')"
"\n"
"end\n"
"\n"
"if adc ~= 1 && adc ~= 2 && adc ~= 3 && adc ~= 4,\n"
"   error('Parameter \"ADC unit\" must be an integer value between 1 and 4.');"
"\n"
"end\n"
"\n"
"if ~isreal(input) || ~isvector(input) ...\n"
"   || any(floor(input) ~= input) || any(input < 0),\n"
"  error('\"Analog input channel(s)\" must be a scalar or vector of positive o"
"r zero integers.')\n"
"end\n"
"\n"
"if ~isreal(scale) || ~isvector(scale),\n"
"  error('\"Scale\" must be a real scalar or vector.')\n"
"end\n"
"\n"
"if ~isreal(offset) || ~isvector(offset),\n"
"  error('\"Offset\" must be a real scalar or vector.')\n"
"end\n"
"\n"
"if numel(scale) == 1,\n"
"  scale = repmat(scale, size(input));\n"
"elseif numel(scale) ~= numel(input),\n"
"  error('\"Scale\" must be scalar or a vector of the same length as the numbe"
"r of ADC inputs.');\n"
"end\n"
"\n"
"if numel(offset) == 1,\n"
"  offset = repmat(offset, size(input));\n"
"elseif numel(offset) ~= numel(input),\n"
"  error('\"Offset\" must be scalar or a vector of the same length as the numb"
"er of ADC inputs.');\n"
"end\n"
"\n"
"if numel(tacq) == 1,\n"
"  tacq = repmat(tacq, size(input));\n"
"elseif numel(tacq) ~= numel(input),\n"
"  error('\"Aquisition time value(s)\" must be scalar or a vector of the same "
"length as the number of ADC inputs.');\n"
"end\n"
"\n"
"if tacqsel == 1\n"
"\tts = 0; % will be set later to minimal per ADC datasheet\n"
"\ttsoffline = 75e-9; % set delay to smallest single channel conversion of any"
" chip\n"
"else\n"
"\tts = tacq;\n"
"\ttsoffline = sum(ts); % sum up delays (conversion is sequential) \n"
"end\n"
"\n"
"if ~isnan(bits) && ( numel(bits)~=1 ...\n"
"   || any(floor(bits) ~= bits) || any(bits <= 0)),\n"
"  error('\"Resolution\" must be a scalar positive integer representing the bi"
"t resolution of the ADC.')\n"
"end\n"
"\n"
"if numel(vref) ~= 1 && numel(vref) ~= numel(input),\n"
"  error('\"Voltage reference\" must be scalar or a vector of the same length "
"as the number of ADC inputs.');\n"
"end\n"
"\n"
"if (isnan(bits) && ~isnan(vref)) || (~isnan(bits) && isnan(vref)),\n"
"  error('\"Resolution\" and \"Voltage reference\" must both be real values or"
" left empty.')\n"
"end\n"
"\n"
"if (isnan(bits))\n"
"\tdoquant = 1;\n"
"else\n"
"\tdoquant = 2;\n"
"\tqint = vref/(2^bits);\n"
"end\n"
"\n"
"if (isnan(BASE_SAMPLE_TIME) && trig==1),\n"
"   error('A discretization step size is required when the ADC \"Trigger sourc"
"e\" parameter is set to \"Determine automatically\". The discretization step "
"size is defined in the ADC''s parent subsystem''s Execuction Settings or in t"
"he Coder Options window.')\n"
"end"
      MaskDialogCallback "Block:showTerminal('SOC', Dialog:get('trig')~='1')\n"
"Dialog:set('tacq', 'Visible', Dialog:get('tacqsel')~='1')"
      Parameter {
        Variable      "trig"
        Prompt        "Trigger source"
        Type          FixedText
        PossibleValues {"Determine automatically", "Show trigger port"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "adc"
        Prompt        "ADC unit"
        Type          FixedText
        PossibleValues {"ADC A", "ADC B", "ADC C", "ADC D"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "input"
        Prompt        "Analog input channel(s) [0 .. 15]"
        Type          FreeText
        Value         "[0]"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "scale"
        Prompt        "Scale(s)"
        Type          FreeText
        Value         "[1]"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "offset"
        Prompt        "Offset(s)"
        Type          FreeText
        Value         "[0]"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "tacqsel"
        Prompt        "Acquisition time"
        Type          FixedText
        PossibleValues {"Set to minimal value", "Specify value(s)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "tacq"
        Prompt        "Acquisition time value(s) [s]"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "bits"
        Prompt        "Resolution [bits] "
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       "Offline only"
      }
      Parameter {
        Variable      "vref"
        Prompt        "Voltage reference [V]"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       "Offline only"
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Terminal {
        Type          EventOutput
        Position      [29, 15]
        Direction     right
      }
      Terminal {
        Type          EventInput
        Position      [0, -25]
        Direction     up
      }
      Schematic {
        Location      [5, 53; 1175, 394]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [85, 125]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "numel(input)"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out1"
          Show          off
          Position      [600, 125]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "10"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          EventOutput
          Name          "Task"
          Show          on
          Position      [600, 70]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
        }
        Component {
          Type          EventInput
          Name          "SOC"
          Show          off
          Position      [85, 70]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "3"
            Show          on
          }
        }
        Component {
          Type          Reference
          SrcComponent  "Components/Control/Delays/Pulse Delay"
          Name          "Pulse Delay1"
          Show          off
          Position      [525, 70]
          Direction     up
          Flipped       off
          Frame         [-15, -15; 15, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          Parameter {
            Variable      "T_d"
            Value         "tsoffline"
            Show          off
          }
          Parameter {
            Variable      "y_init"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "buffer_size"
            Value         "1024"
            Show          off
          }
          Terminal {
            Type          Output
            Position      [19, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-15, 0]
            Direction     left
          }
        }
        Component {
          Type          Subsystem
          Name          "Sample\nand Hold"
          Show          on
          Position      [300, 125]
          Direction     up
          Flipped       off
          Frame         [-20, -20; 20, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          TreatAsAtomicUnit on
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Output
            Position      [24, 0]
            Direction     right
            Index         "1"
          }
          Terminal {
            Type          Input
            Position      [-20, 0]
            Direction     left
            Index         "1"
          }
          Terminal {
            Type          Input
            Position      [0, -20]
            Direction     up
            Index         "2"
          }
          Schematic {
            Location      [0, 0; 197, 137]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Output
              Name          "1"
              Show          on
              Position      [180, 70]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "2"
              Show          on
              Position      [80, 70]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Trigger
              Name          "Trigger"
              Show          on
              Position      [120, 30]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
              Parameter {
                Variable      "TriggerType"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "ShowOutput"
                Value         "1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "2"
              SrcTerminal   1
              DstComponent  "1"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          Reference
          SrcComponent  "Components/Control/Delays/Pulse Delay"
          Name          "Pulse Delay2"
          Show          off
          Position      [525, 125]
          Direction     up
          Flipped       off
          Frame         [-15, -15; 15, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          Parameter {
            Variable      "T_d"
            Value         "tsoffline"
            Show          off
          }
          Parameter {
            Variable      "y_init"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "buffer_size"
            Value         "1024"
            Show          off
          }
          Terminal {
            Type          Output
            Position      [19, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-15, 0]
            Direction     left
          }
        }
        Component {
          Type          Gain
          Name          "Scale"
          Show          on
          Position      [420, 125]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "K"
            Value         "scale"
            Show          off
          }
          Parameter {
            Variable      "Multiplication"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "DataType"
            Value         "11"
            Show          off
          }
        }
        Component {
          Type          Offset
          Name          "Offset"
          Show          on
          Position      [475, 125]
          Direction     right
          Flipped       off
          Frame         [-20, -10; 20, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Offset"
            Value         "offset"
            Show          off
          }
          Parameter {
            Variable      "DataType"
            Value         "11"
            Show          off
          }
        }
        Component {
          Type          ConfigurableSubsystem
          Name          "Quantization"
          Show          on
          Position      [360, 125]
          Direction     up
          Flipped       off
          Frame         [-20, -20; 20, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-20, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [24, 0]
            Direction     right
          }
          TerminalNames { "In1", "Out1" }
          Location      [468, 133; 774, 367]
          ZoomFactor    1
          SliderPosition [0, 0]
          ShowBrowser   off
          BrowserWidth  100
          Configurations {
            Name          "disabled"
            Schematic {
              Component {
                Type          Input
                Name          "In1"
                Show          off
                Position      [140, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "Out1"
                Show          off
                Position      [300, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "In1"
                SrcTerminal   1
                DstComponent  "Out1"
                DstTerminal   1
              }
            }
            Name          "enabled"
            Schematic {
              Component {
                Type          Input
                Name          "In1"
                Show          off
                Position      [75, 100]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "Out1"
                Show          off
                Position      [235, 100]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Reference
                SrcComponent  "Components/Control/Discontinuous/Quantizer"
                Name          "Quantizer"
                Show          on
                Position      [155, 100]
                Direction     up
                Flipped       off
                Frame         [-15, -15; 15, 15]
                LabelPosition [0, 18]
                LabelAlign    up
                Parameter {
                  Variable      "q"
                  Value         "qint"
                  Show          off
                }
                Parameter {
                  Variable      "stepDetection"
                  Value         "1"
                  Show          off
                }
                Terminal {
                  Type          Input
                  Position      [-15, 0]
                  Direction     left
                }
                Terminal {
                  Type          Output
                  Position      [19, 0]
                  Direction     right
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "In1"
                SrcTerminal   1
                DstComponent  "Quantizer"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "Quantizer"
                SrcTerminal   2
                DstComponent  "Out1"
                DstTerminal   1
              }
            }
          }
          Parameter {
            Variable      "Configuration"
            Value         "doquant"
            Show          off
          }
        }
        Component {
          Type          ConfigurableSubsystem
          Name          "Sample\nSelect"
          Show          on
          Position      [200, 70]
          Direction     up
          Flipped       off
          Frame         [-20, -15; 20, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-20, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [24, 0]
            Direction     right
          }
          TerminalNames { "In", "Out" }
          Location      [968, 204; 1409, 402]
          ZoomFactor    1
          SliderPosition [0, 0]
          ShowBrowser   off
          BrowserWidth  100
          Configurations {
            Name          "Determine automatically"
            Schematic {
              Component {
                Type          Input
                Name          "In"
                Show          off
                Position      [50, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "Out"
                Show          off
                Position      [300, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          PulseGenerator
                Name          "Pulse\nGenerator"
                Show          off
                Position      [150, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Hi"
                  Value         "1"
                  Show          off
                }
                Parameter {
                  Variable      "Lo"
                  Value         "0"
                  Show          off
                }
                Parameter {
                  Variable      "f"
                  Value         "1/BASE_SAMPLE_TIME"
                  Show          on
                }
                Parameter {
                  Variable      "DutyCycle"
                  Value         "0.5"
                  Show          off
                }
                Parameter {
                  Variable      "Delay"
                  Value         "0"
                  Show          off
                }
                Parameter {
                  Variable      "DataType"
                  Value         "10"
                  Show          off
                }
              }
              Component {
                Type          EdgeDetection
                Name          "Edge Detection"
                Show          off
                Position      [230, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Direction"
                  Value         "1"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "Pulse\nGenerator"
                SrcTerminal   1
                DstComponent  "Edge Detection"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "Edge Detection"
                SrcTerminal   2
                DstComponent  "Out"
                DstTerminal   1
              }
            }
            Name          "Show trigger port"
            Schematic {
              Component {
                Type          Input
                Name          "In"
                Show          off
                Position      [50, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "Out"
                Show          off
                Position      [300, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "In"
                SrcTerminal   1
                DstComponent  "Out"
                DstTerminal   1
              }
            }
          }
          Parameter {
            Variable      "Configuration"
            Value         "trig"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Pulse Delay1"
          SrcTerminal   1
          DstComponent  "Task"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Pulse Delay2"
          SrcTerminal   1
          DstComponent  "Out1"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "Sample\nand Hold"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Scale"
          SrcTerminal   2
          DstComponent  "Offset"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Offset"
          SrcTerminal   2
          DstComponent  "Pulse Delay2"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Sample\nand Hold"
          SrcTerminal   1
          DstComponent  "Quantization"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Quantization"
          SrcTerminal   2
          DstComponent  "Scale"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Sample\nSelect"
          SrcTerminal   2
          Points        [300, 70]
          Branch {
            DstComponent  "Pulse Delay1"
            DstTerminal   2
          }
          Branch {
            DstComponent  "Sample\nand Hold"
            DstTerminal   3
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "SOC"
          SrcTerminal   1
          DstComponent  "Sample\nSelect"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "DAC"
      Show          on
      Position      [40, 335]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "2"
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C2000\""
", \"dac\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      MaskType      "DAC"
      MaskDescription "Generate an output voltage from the input signal. \n"
"\n"
"The output voltage is calculated as input*Scale+Offset."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/dac_c2000.html"
      MaskDisplay   "Icon:text('DAC')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      MaskInit      "if dac ~= 1 && dac ~= 2 && dac ~= 3,\n"
"  error('\"DAC unit\" must be an integer value less than or equal to the numb"
"er of available DACs.')\n"
"end\n"
"if ~isreal(scale) || ~isvector(scale) ||  numel(scale)>1,\n"
"  error('\"Scale\" must be a real scalar value.')\n"
"end\n"
"if ~isreal(offset) || ~isvector(offset) ||  numel(offset)>1,\n"
"  error('\"Offset\" must be a real scalar value.')\n"
"end\n"
"if ~isreal(minOutput) || ~isvector(minOutput) ||  numel(minOutput)>1,\n"
"  error('\"Minimum output voltage\" must be a real scalar value.')\n"
"end\n"
"if ~isreal(maxOutput) || ~isvector(maxOutput) ||  numel(maxOutput)>1,\n"
"  error('\"Maximum output voltage\" must be a real scalar value.')\n"
"end\n"
"\n"
"if isnan(minOutput),\n"
"  minOutput = -inf;\n"
"end\n"
"if isnan(maxOutput),\n"
"  maxOutput = inf;\n"
"end\n"
"\n"
"if any(minOutput > maxOutput),\n"
"  error('\"Minimum output voltage\" must be less than or equal to \"Maximum o"
"utput voltage\".');\n"
"end\n"
      Parameter {
        Variable      "dac"
        Prompt        "DAC unit"
        Type          FixedText
        PossibleValues {"DAC A", "DAC B", "DAC C"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "scale"
        Prompt        "Scale"
        Type          FreeText
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "offset"
        Prompt        "Offset"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "minOutput"
        Prompt        "Minimum output voltage"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "maxOutput"
        Prompt        "Maximum output voltage"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Input
        Position      [-25, 0]
        Direction     left
      }
      Schematic {
        Location      [715, 118; 1705, 437]
        ZoomFactor    0.997755
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          Input
          Name          "In1"
          Show          off
          Position      [120, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "InitialOutput"
            Value         "[]"
            Show          off
          }
          Parameter {
            Variable      "HasDirectFeedthrough"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [385, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Gain
          Name          "Scale"
          Show          on
          Position      [185, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "K"
            Value         "scale"
            Show          off
          }
          Parameter {
            Variable      "Multiplication"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "DataType"
            Value         "11"
            Show          off
          }
        }
        Component {
          Type          Offset
          Name          "Offset"
          Show          on
          Position      [250, 75]
          Direction     right
          Flipped       off
          Frame         [-20, -10; 20, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Offset"
            Value         "offset"
            Show          off
          }
          Parameter {
            Variable      "DataType"
            Value         "11"
            Show          off
          }
        }
        Component {
          Type          Saturation
          Name          "Saturation"
          Show          on
          Position      [320, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "UpperLimit"
            Value         "maxOutput"
            Show          off
          }
          Parameter {
            Variable      "LowerLimit"
            Value         "minOutput"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Scale"
          SrcTerminal   2
          DstComponent  "Offset"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "In1"
          SrcTerminal   1
          DstComponent  "Scale"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Offset"
          SrcTerminal   2
          DstComponent  "Saturation"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Saturation"
          SrcTerminal   2
          DstComponent  "1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Timer"
      Show          on
      Position      [40, 400]
      Direction     up
      Flipped       off
      Frame         [-25, -25; 25, 25]
      LabelPosition [0, 28]
      LabelAlign    up
      TargetPortIndices ""
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C2000\""
", \"timer\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      MaskType      "Timer"
      MaskDescription "Generate trigger signals for ADC and model."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/timer_c2000.html"
      MaskDisplay   "Icon:text('Timer')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      MaskInit      "if numel(f) ~= 1 || ~isreal(f),\n"
"  error('\"Timer frequency [Hz]\" must be a real scalar value.');\n"
"end\n"
"\n"
"if any(f <= 0)\n"
"\terror('\"Timer frequency [Hz]\" must be greater than 0.')\n"
"end\n"
"\n"
"if any(f > 200e6)\n"
"\terror('\"Timer frequency [Hz]\" greater than SYSCLK for all supported C2000"
" chips, please reduce the timer frequency.')\n"
"end\n"
"\n"
"if numel(f_tol) ~= 1,\n"
"  error('\"Frequency tolerance\" must be scalar.');\n"
"end"
      Parameter {
        Variable      "f"
        Prompt        "Frequency [Hz]"
        Type          FreeText
        Value         "10e3"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "f_tol"
        Prompt        "Frequency tolerance"
        Type          FixedText
        PossibleValues {"Enforce exact value", "Round to closest achievable va"
"lue"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          EventOutput
        Position      [29, 15]
        Direction     right
      }
      Terminal {
        Type          EventOutput
        Position      [29, -15]
        Direction     right
      }
      Schematic {
        Location      [42, 520; 779, 755]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          PulseGenerator
          Name          "Pulse\nGenerator"
          Show          off
          Position      [80, 55]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Hi"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "Lo"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "f"
            Value         "f"
            Show          on
          }
          Parameter {
            Variable      "DutyCycle"
            Value         "0.5"
            Show          off
          }
          Parameter {
            Variable      "Delay"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "DataType"
            Value         "10"
            Show          off
          }
        }
        Component {
          Type          EdgeDetection
          Name          "Edge Detection"
          Show          off
          Position      [140, 55]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Direction"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          EventOutput
          Name          "Task"
          Show          on
          Position      [220, 55]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
        }
        Component {
          Type          EventOutput
          Name          "ADC"
          Show          on
          Position      [220, 100]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Pulse\nGenerator"
          SrcTerminal   1
          DstComponent  "Edge Detection"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Edge Detection"
          SrcTerminal   2
          Points        [180, 55]
          Branch {
            DstComponent  "Task"
            DstTerminal   1
          }
          Branch {
            Points        [180, 100]
            DstComponent  "ADC"
            DstTerminal   1
          }
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Powerstage Protection"
      Show          on
      Position      [60, 470]
      Direction     up
      Flipped       off
      Frame         [-45, -25; 45, 25]
      LabelPosition [0, 28]
      LabelAlign    up
      TargetPortIndices "4"
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "if Target.Name == \"Generic\" then\n"
"  local OutputSignal = StringList:new()\n"
"  -- 'enable' output directly controlled by input\n"
"  OutputSignal:append(Block.InputSignal[1][1])\n"
"  return {\n"
"    OutputSignal = OutputSignal,\n"
"  }\n"
"end\n"
"\n"
"local block = Target.Coder.CreateTargetBlock(\"TI C2000\", \"powerstage\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      MaskType      "Powerstage Protection"
      MaskDescription "Provides powerstage safety features."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/powerstage_protection_c"
"2000.html"
      MaskDisplay   "Icon:text('Powerstage\\nProtection')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      MaskInit      "if EnableSignal == 1\n"
"\tif numel(EnableSignalGpio) ~= 1 || ~isvector(EnableSignalGpio) ...\n"
"   || any(floor(EnableSignalGpio) ~= EnableSignalGpio) || any(EnableSignalGpi"
"o < 0),\n"
"   \terror('\"Powerstage Enable GPIO number\" must be a scalar positive integ"
"er.');\n"
"\tend\n"
"\tpolarity = EnableSignalPolarity;\n"
"else\n"
"\tpolarity = 1; % dummy value\n"
"end\n"
"\n"
"if numel(PwmSafeState) ~= 1,\n"
"  error('\"PWM safe state\" must be scalar.');\n"
"end\n"
"\n"
"if SimInterlock == 2\n"
"\ten0 = [1];\n"
"else\n"
"\ten0 = [];\n"
"end\n"
      MaskDialogCallback "local hasPsEnable = Dialog:get('EnableSignal')=='1'"
"\n"
"\n"
"Dialog:set('EnableSignalPolarity', 'Visible', hasPsEnable)\n"
"Dialog:set('EnableSignalGpio', 'Visible', hasPsEnable)\n"
"\n"
"local parent = Block:get(\"Parent\")\n"
"local blockName = Block:get(\"Name\")\n"
"parent:showTerminal(\"%s\" % { blockName }, hasPsEnable)\n"
"\n"
      Parameter {
        Variable      "EnableSignal"
        Prompt        "Powerstage enable signal"
        Type          FixedText
        PossibleValues {"Digital output", "None"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "EnableSignalPolarity"
        Prompt        "Powerstage enable polarity"
        Type          FixedText
        PossibleValues {"Active low", "Active high"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "EnableSignalGpio"
        Prompt        "Powerstage enable GPIO number"
        Type          FreeText
        Value         "0"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "PwmSafeState"
        Prompt        "PWM safe state"
        Type          FixedText
        PossibleValues {"Forced inactive", "Floating"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "Tz1Mode"
        Prompt        "Reaction to TZ1"
        Type          FixedText
        PossibleValues {"Ignore", "Cycle-by-cycle", "Disable powerstage (one-s"
"hot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Protection"
      }
      Parameter {
        Variable      "Tz2Mode"
        Prompt        "Reaction to TZ2"
        Type          FixedText
        PossibleValues {"Ignore", "Cycle-by-cycle", "Disable powerstage (one-s"
"hot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Protection"
      }
      Parameter {
        Variable      "Tz3Mode"
        Prompt        "Reaction to TZ3"
        Type          FixedText
        PossibleValues {"Ignore", "Cycle-by-cycle", "Disable powerstage (one-s"
"hot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Protection"
      }
      Parameter {
        Variable      "TsigAMode"
        Prompt        "Reaction to trip signal A"
        Type          FixedText
        PossibleValues {"Ignore", "Disable powerstage (one-shot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Protection"
      }
      Parameter {
        Variable      "TsigBMode"
        Prompt        "Reaction to trip signal B"
        Type          FixedText
        PossibleValues {"Ignore", "Disable powerstage (one-shot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Protection"
      }
      Parameter {
        Variable      "TsigCMode"
        Prompt        "Reaction to trip signal C"
        Type          FixedText
        PossibleValues {"Ignore", "Disable powerstage (one-shot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Protection"
      }
      Parameter {
        Variable      "SimInterlock"
        Prompt        "Interlock"
        Type          FixedText
        PossibleValues {"Do not simulate", "Simulate"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Offline only"
      }
      Terminal {
        Type          Input
        Position      [-45, 0]
        Direction     left
      }
      Terminal {
        Type          Output
        Position      [49, 0]
        Direction     right
      }
      Schematic {
        Location      [868, 221; 1920, 456]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [425, 60]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "en"
          Show          on
          Position      [95, 100]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "InitialOutput"
            Value         "en0"
            Show          off
          }
          Parameter {
            Variable      "HasDirectFeedthrough"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "Out1"
          Show          off
          Position      [425, 100]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "10"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Memory
          Name          "Memory"
          Show          off
          Position      [280, 100]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "X0"
            Value         "0"
            Show          off
          }
        }
        Component {
          Type          ConfigurableSubsystem
          Name          "Interlock"
          Show          on
          Position      [190, 100]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
          }
          TerminalNames { "In1", "Out1" }
          Location      [594, 86; 1035, 284]
          ZoomFactor    1
          SliderPosition [0, 0]
          ShowBrowser   off
          BrowserWidth  100
          Configurations {
            Name          "Disabled"
            Schematic {
              Component {
                Type          Input
                Name          "In1"
                Show          off
                Position      [100, 95]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "Out1"
                Show          off
                Position      [325, 95]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "In1"
                SrcTerminal   1
                DstComponent  "Out1"
                DstTerminal   1
              }
            }
            Name          "Enabled"
            Schematic {
              Component {
                Type          Input
                Name          "In1"
                Show          off
                Position      [100, 95]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "Out1"
                Show          off
                Position      [325, 95]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          FsmBlock
                Name          "Interlock"
                Show          on
                Position      [210, 95]
                Direction     up
                Flipped       off
                Frame         [-55, -15; 55, 15]
                LabelPosition [0, 18]
                LabelAlign    up
                Parameter {
                  Variable      "InputVariables"
                  Value         "en"
                  Show          off
                }
                Parameter {
                  Variable      "InputTypes"
                  Value         "1"
                  Show          off
                }
                Parameter {
                  Variable      "InternalConstants"
                  Value         ""
                  Show          off
                }
                Parameter {
                  Variable      "InternalConstantValues"
                  Value         ""
                  Show          off
                }
                Parameter {
                  Variable      "InternalVariables"
                  Value         ""
                  Show          off
                }
                Parameter {
                  Variable      "InternalVariableValues"
                  Value         ""
                  Show          off
                }
                Parameter {
                  Variable      "OutputVariables"
                  Value         "enabled"
                  Show          off
                }
                Parameter {
                  Variable      "Declarations"
                  Value         ""
                  Show          off
                }
                Parameter {
                  Variable      "TransitionOrder"
                  Value         "2"
                  Show          off
                }
                Parameter {
                  Variable      "SampleTime"
                  Value         "0"
                  Show          off
                }
                Parameter {
                  Variable      "Animate"
                  Value         "1"
                  Show          off
                }
                FSM {
                  Location       [1403, 635; 1920, 1005]
                  ZoomFactor     1
                  SliderPosition [0, 0]
                  FsmState {
                    Name          "Powerup"
                    Position      [250, 120]
                    Frame         [-90, -60; 90, 60]
                    Parameter {
                      Name     "EnterAction"
                      Value    "enabled = 0;\n"
                    }
                    Parameter {
                      Name     "DuringAction"
                      Value    ""
                    }
                    Parameter {
                      Name     "ExitAction"
                      Value    ""
                    }
                  }
                  FsmState {
                    Name          "Enabled"
                    Position      [400, 280]
                    Frame         [-90, -60; 90, 60]
                    Parameter {
                      Name     "EnterAction"
                      Value    "enabled = 1;\n"
                    }
                    Parameter {
                      Name     "DuringAction"
                      Value    ""
                    }
                    Parameter {
                      Name     "ExitAction"
                      Value    ""
                    }
                  }
                  FsmState {
                    Name          "Disabled"
                    Position      [120, 280]
                    Frame         [-90, -60; 90, 60]
                    Parameter {
                      Name     "EnterAction"
                      Value    "enabled = 0;\n"
                    }
                    Parameter {
                      Name     "DuringAction"
                      Value    ""
                    }
                    Parameter {
                      Name     "ExitAction"
                      Value    ""
                    }
                  }
                  FsmState {
                    Name          ".PointState"
                    Position      [220, 20]
                  }
                  FsmTransition {
                    FsmSrcInfo {
                      StatePath        "Powerup"
                      TerminalLoc      left
                      TerminalCoord    0.634615
                      External         on
                    }
                    FsmDstInfo {
                      StatePath        "Disabled"
                      TerminalLoc      top
                      TerminalCoord    0.408537
                      External         on
                    }
                    SegmentLengths      []
                    LabelPosition       2.75
                    Parameter {
                      Name     "Trigger"
                      Value    ""
                    }
                    Parameter {
                      Name     "Condition"
                      Value    "en == 0"
                    }
                    Parameter {
                      Name     "Action"
                      Value    ""
                    }
                    Parameter {
                      Name     "Priority"
                      Value    "1"
                    }
                  }
                  FsmTransition {
                    FsmSrcInfo {
                      StatePath        "Disabled"
                      TerminalLoc      right
                      TerminalCoord    0.269231
                      External         on
                    }
                    FsmDstInfo {
                      StatePath        "Enabled"
                      TerminalLoc      left
                      TerminalCoord    0.269231
                      External         on
                    }
                    SegmentLengths      []
                    LabelPosition       0.5
                    Parameter {
                      Name     "Trigger"
                      Value    ""
                    }
                    Parameter {
                      Name     "Condition"
                      Value    "en == 1"
                    }
                    Parameter {
                      Name     "Action"
                      Value    ""
                    }
                    Parameter {
                      Name     "Priority"
                      Value    "1"
                    }
                  }
                  FsmTransition {
                    FsmSrcInfo {
                      StatePath        "Enabled"
                      TerminalLoc      left
                      TerminalCoord    0.740385
                      External         on
                    }
                    FsmDstInfo {
                      StatePath        "Disabled"
                      TerminalLoc      right
                      TerminalCoord    0.740385
                      External         on
                    }
                    SegmentLengths      []
                    LabelPosition       0.5
                    Parameter {
                      Name     "Trigger"
                      Value    ""
                    }
                    Parameter {
                      Name     "Condition"
                      Value    "en == 0"
                    }
                    Parameter {
                      Name     "Action"
                      Value    ""
                    }
                    Parameter {
                      Name     "Priority"
                      Value    "1"
                    }
                  }
                  FsmTransition {
                    FsmSrcInfo {
                      StatePath        ".PointState"
                      TerminalLoc      bottom
                      TerminalCoord    0.5
                      External         on
                    }
                    FsmDstInfo {
                      StatePath        "Powerup"
                      TerminalLoc      top
                      TerminalCoord    0.463415
                      External         on
                    }
                    SegmentLengths      []
                    LabelPosition       0.5
                    Parameter {
                      Name     "Trigger"
                      Value    ""
                    }
                    Parameter {
                      Name     "Condition"
                      Value    ""
                    }
                    Parameter {
                      Name     "Action"
                      Value    ""
                    }
                    Parameter {
                      Name     "Priority"
                      Value    "1"
                    }
                  }
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "In1"
                SrcTerminal   1
                DstComponent  "Interlock"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "Interlock"
                SrcTerminal   1
                DstComponent  "Out1"
                DstTerminal   1
              }
            }
          }
          Parameter {
            Variable      "Configuration"
            Value         "SimInterlock"
            Show          off
          }
        }
        Component {
          Type          ConfigurableSubsystem
          Name          "Polarity"
          Show          on
          Position      [360, 60]
          Direction     up
          Flipped       off
          Frame         [-15, -15; 15, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-15, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [19, 0]
            Direction     right
          }
          TerminalNames { "In1", "Out1" }
          Location      [68, 594; 509, 792]
          ZoomFactor    1
          SliderPosition [0, 0]
          ShowBrowser   off
          BrowserWidth  100
          Configurations {
            Name          "Active Low"
            Schematic {
              Component {
                Type          Input
                Name          "In1"
                Show          off
                Position      [140, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "Out1"
                Show          off
                Position      [300, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          LogicalOperator
                Name          "Logical\nOperator"
                Show          off
                Position      [215, 80]
                Direction     up
                Flipped       off
                Parameter {
                  Variable      "Operator"
                  Value         "6"
                  Show          off
                }
                Parameter {
                  Variable      "Inputs"
                  Value         "2"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "In1"
                SrcTerminal   1
                DstComponent  "Logical\nOperator"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "Logical\nOperator"
                SrcTerminal   1
                DstComponent  "Out1"
                DstTerminal   1
              }
            }
            Name          "Active High"
            Schematic {
              Component {
                Type          Input
                Name          "In1"
                Show          off
                Position      [140, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "Out1"
                Show          off
                Position      [300, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "In1"
                SrcTerminal   1
                DstComponent  "Out1"
                DstTerminal   1
              }
            }
          }
          Parameter {
            Variable      "Configuration"
            Value         "polarity"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "en"
          SrcTerminal   1
          DstComponent  "Interlock"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Interlock"
          SrcTerminal   2
          DstComponent  "Memory"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Memory"
          SrcTerminal   2
          Points        [310, 100]
          Branch {
            DstComponent  "Out1"
            DstTerminal   1
          }
          Branch {
            Points        [310, 60]
            DstComponent  "Polarity"
            DstTerminal   1
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Polarity"
          SrcTerminal   2
          DstComponent  "1"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "PWM"
      Show          on
      Position      [40, 540]
      Direction     up
      Flipped       off
      Frame         [-25, -25; 25, 25]
      LabelPosition [0, 28]
      LabelAlign    up
      TargetPortIndices "4"
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C2000\""
", \"epwm_basic\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      NonDftCodeFcn "local block = Target.Coder.GetTargetBlock(Block.UserData."
"bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()\n"
      MaskType      "PWM "
      MaskDescription "Generate a complementary PWM signal pair. \n"
"\n"
"The carrier starts at 0 and varies between 0 and 1. The PWM output is active "
"when the input is greater than the carrier."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/pwm_c2000.html"
      MaskDisplay   "Icon:text('PWM')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      MaskInit      "% experimental settings\n"
"% EnablePhaseSyncFromDownstream = 1\n"
"\n"
"num_PWM = numel(pwm);\n"
"\n"
"if outmode == 3,\n"
"\tpolarity = 1;\n"
"\tsequence = 1;\t\n"
"end\n"
"\n"
"if ~isreal(pwm) || ~isvector(pwm) ...\n"
"   || any(floor(pwm) ~= pwm) || any(pwm < 0),\n"
"  error('\"PWM generator(s)\" must be a scalar or vector of positive or zero "
"integers.')\n"
"end\n"
"\n"
"if numel(fc) ~= 1,\n"
"  error('\"Carrier frequency\" must be scalar.');\n"
"end\n"
"\n"
"if any(fc <= 0)\n"
"\terror('\"Carrier frequency [Hz]\" must be greater than 0.')\n"
"end\n"
"\n"
"if any(fc > 25e6)\n"
"\terror('\"Carrier frequency [Hz]\" greater than 25 MHz exceeds toggling freq"
"uency of GPIO pins, please reduce the carrier frequency.')\n"
"end\n"
"\n"
"if any(fc < 0.01)\n"
"   plecs('warning', '\"Carrier frequency [Hz]\" lower than 0.01 Hz, please us"
"e \"Digital Out\" to generate low frequency PWM.')\n"
"end\n"
"\n"
"if numel(fc_tol) ~= 1,\n"
"  error('\"Frequency tolerance\" must be scalar.');\n"
"end\n"
"\n"
"if numel(delay) ~= 1,\n"
"  error('\"Blanking time\" must be scalar.');\n"
"end\n"
"\n"
"if any(delay < 0)\n"
"\terror('\"Blanking time [s]\" must be greater than zero seconds.')\n"
"end\n"
"\n"
"if any(delay >= (1/fc/2))\n"
"\terror(['\"Blanking time [s]\" should not be larger than half the carrier pe"
"riod ' num2str(1/fc/2) 's.'])\n"
"end\n"
"\n"
"if numel(type) ~= 1,\n"
"  error('\"Carrier type\" must be scalar.');\n"
"end\n"
"\n"
"if numel(polarity) ~= 1,\n"
"  error('\"Polarity\" must be scalar.');\n"
"end\n"
"\n"
"if numel(socsel) ~= 1,\n"
"  error('\"ADC trigger\" must be scalar.');\n"
"end\n"
"\n"
"if numel(intsel) ~= 1,\n"
"  error('\"Task trigger\" must be scalar.');\n"
"end\n"
"\n"
"if numel(tz1mode) ~= 1 || numel(tz2mode) ~= 1 || numel(tz3mode) ~= 1 ,\n"
"  error('\"TZ mode\" must be scalar.');\n"
"end\n"
"\n"
"if ~isnan(socsel_prd) && ((floor(socsel_prd) ~= socsel_prd) || (socsel_prd < "
"1))\n"
"  error('\"ADC trigger divider\" must be an integer and greater than zero.');"
"\n"
"end\n"
"\n"
"if ~isnan(intsel_prd) && ((floor(intsel_prd) ~= intsel_prd) || (intsel_prd < "
"1))\n"
"  error('\"Task trigger divider\" must be an integer and greater than zero.')"
";\n"
"end\n"
"\n"
      MaskDialogCallback "Block:showTerminal('Task', Dialog:get('intsel')~='1'"
")\n"
"Block:showTerminal('ADC', Dialog:get('socsel')~='1')\n"
"Block:showTerminal('seq', Dialog:get('sequence')=='3' and Dialog:get('outmode"
"')~='3')\n"
"Block:showTerminal('en', Dialog:get('show_enable')=='2' and Dialog:get('outmo"
"de')~='3')\n"
"\n"
"Dialog:set('socsel_prd', 'Visible', Dialog:get('socsel')~='1')\n"
"Dialog:set('intsel_prd', 'Visible', Dialog:get('intsel')~='1')\n"
"\n"
"Dialog:set('delay', 'Visible', Dialog:get('outmode')~='3')\n"
"Dialog:set('sequence', 'Visible', Dialog:get('outmode')~='3')\n"
"Dialog:set('polarity', 'Visible', Dialog:get('outmode')~='3')\n"
"Dialog:set('show_enable', 'Visible', Dialog:get('outmode')~='3')\n"
"\n"
"for i=1,3 do\n"
"  -- self destruct deprecated parameters\n"
"  Dialog:set('tz%imode' % {i}, 'Visible', Dialog:get('tz%imode' % {i})~='1') "
" \n"
"end\n"
"\n"
"local parent = Block:get(\"Parent\")\n"
"local block = Block:get(\"Name\")\n"
"parent:showTerminal(block, Dialog:get('outmode')~='3')"
      Parameter {
        Variable      "pwm"
        Prompt        "PWM generator(s) [1 .. N]"
        Type          FreeText
        Value         "[1]"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "type"
        Prompt        "Carrier type"
        Type          FixedText
        PossibleValues {"Sawtooth (carrier counts up)", "Symmetrical (carrier "
"counts up/down)"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "fc"
        Prompt        "Carrier frequency [Hz]"
        Type          FreeText
        Value         "10e3"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "fc_tol"
        Prompt        "Frequency tolerance"
        Type          FixedText
        PossibleValues {"Enforce exact value", "Round to closest achievable va"
"lue"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "outmode"
        Prompt        "Mode"
        Type          FixedText
        PossibleValues {"Complementary outputs", "Single output (channel A)", ""
"Outputs disabled"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Output"
      }
      Parameter {
        Variable      "delay"
        Prompt        "Blanking time [s]"
        Type          FreeText
        Value         "0.1e-6"
        Show          off
        Tunable       off
        TabName       "Output"
      }
      Parameter {
        Variable      "polarity"
        Prompt        "Polarity"
        Type          FixedText
        PossibleValues {"Active state is logic '1'", "Active state is logic '0"
"'"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Output"
      }
      Parameter {
        Variable      "sequence"
        Prompt        "Sequence"
        Type          FixedText
        PossibleValues {"Positive", "Negative", "Variable"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Output"
      }
      Parameter {
        Variable      "show_enable"
        Prompt        "Enable port"
        Type          FixedText
        PossibleValues {"Hide", "Show"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Output"
      }
      Parameter {
        Variable      "socsel"
        Prompt        "ADC trigger"
        Type          FixedText
        PossibleValues {"Disabled", "Underflow", "Overflow", "Underflow and Ov"
"erflow"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "socsel_prd"
        Prompt        "ADC trigger divider"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "intsel"
        Prompt        "Task trigger"
        Type          FixedText
        PossibleValues {"Disabled", "Underflow", "Overflow", "Underflow and Ov"
"erflow"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "intsel_prd"
        Prompt        "Task trigger divider"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "tz1mode"
        Prompt        "Reaction to TZ1"
        Type          FixedText
        PossibleValues {"Configured by Powerstage Protection block", "Cycle-by"
"-cycle", "Disable powerstage (one-shot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Deprecated"
      }
      Parameter {
        Variable      "tz2mode"
        Prompt        "Reaction to TZ2"
        Type          FixedText
        PossibleValues {"Configured by Powerstage Protection block", "Cycle-by"
"-cycle", "Disable powerstage (one-shot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Deprecated"
      }
      Parameter {
        Variable      "tz3mode"
        Prompt        "Reaction to TZ3"
        Type          FixedText
        PossibleValues {"Configured by Powerstage Protection block", "Cycle-by"
"-cycle", "Disable powerstage (one-shot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Deprecated"
      }
      Terminal {
        Type          Input
        Position      [-25, 0]
        Direction     left
      }
      Terminal {
        Type          EventOutput
        Position      [29, 15]
        Direction     right
      }
      Terminal {
        Type          EventOutput
        Position      [29, -15]
        Direction     right
      }
      Terminal {
        Type          Input
        Position      [-25, 10]
        Direction     left
      }
      Terminal {
        Type          Input
        Position      [-25, -10]
        Direction     left
      }
      Schematic {
        Location      [19, 52; 635, 364]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [500, 70]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "In1"
          Show          off
          Position      [35, 170]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "InitialOutput"
            Value         "[]"
            Show          off
          }
          Parameter {
            Variable      "HasDirectFeedthrough"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "numel(pwm)"
            Show          off
          }
        }
        Component {
          Type          EventOutput
          Name          "Task"
          Show          on
          Position      [495, 175]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
        }
        Component {
          Type          EventOutput
          Name          "ADC"
          Show          on
          Position      [495, 215]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "3"
            Show          on
          }
        }
        Component {
          Type          ConfigurableSubsystem
          Name          "Modulator"
          Show          on
          Position      [190, 175]
          Direction     up
          Flipped       off
          Frame         [-30, -30; 30, 30]
          LabelPosition [0, 33]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-30, -5]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [34, -15]
            Direction     right
          }
          Terminal {
            Type          Output
            Position      [34, -5]
            Direction     right
          }
          Terminal {
            Type          Output
            Position      [34, 5]
            Direction     right
          }
          Terminal {
            Type          Output
            Position      [34, 15]
            Direction     right
          }
          TerminalNames { "duty", "s", "z", "p", "zp" }
          Location      [460, 354; 897, 813]
          ZoomFactor    1
          SliderPosition [0, 0]
          ShowBrowser   off
          BrowserWidth  100
          Configurations {
            Name          "sawtooth"
            Schematic {
              Component {
                Type          Input
                Name          "duty"
                Show          on
                Position      [110, 65]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "s"
                Show          on
                Position      [250, 65]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "z"
                Show          on
                Position      [250, 130]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "3"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "p"
                Show          on
                Position      [250, 175]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "4"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          PulseGenerator
                Name          "Pulse\nGenerator"
                Show          off
                Position      [110, 130]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Hi"
                  Value         "1"
                  Show          off
                }
                Parameter {
                  Variable      "Lo"
                  Value         "0"
                  Show          off
                }
                Parameter {
                  Variable      "f"
                  Value         "fc"
                  Show          off
                }
                Parameter {
                  Variable      "DutyCycle"
                  Value         "0.5"
                  Show          off
                }
                Parameter {
                  Variable      "Delay"
                  Value         "0"
                  Show          off
                }
                Parameter {
                  Variable      "DataType"
                  Value         "10"
                  Show          off
                }
              }
              Component {
                Type          EdgeDetection
                Name          "Edge Detection"
                Show          off
                Position      [180, 130]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Direction"
                  Value         "1"
                  Show          off
                }
              }
              Component {
                Type          Reference
                SrcComponent  "Components/Control/Modulators/Sawtooth PWM"
                Name          "Sawtooth PWM"
                Show          on
                Position      [180, 65]
                Direction     up
                Flipped       off
                Frame         [-20, -20; 20, 20]
                LabelPosition [0, 23]
                LabelAlign    up
                Parameter {
                  Variable      "config"
                  Value         "2"
                  Show          off
                }
                Parameter {
                  Variable      "ramp"
                  Value         "1"
                  Show          off
                }
                Parameter {
                  Variable      "fc"
                  Value         "fc"
                  Show          off
                }
                Parameter {
                  Variable      "offset"
                  Value         "0"
                  Show          off
                }
                Parameter {
                  Variable      "input_limits"
                  Value         "[0 1]"
                  Show          off
                }
                Parameter {
                  Variable      "output_values"
                  Value         "[-1 1]"
                  Show          off
                }
                Terminal {
                  Type          Output
                  Position      [24, 0]
                  Direction     right
                }
                Terminal {
                  Type          Input
                  Position      [-20, 0]
                  Direction     left
                }
              }
              Component {
                Type          Output
                Name          "zp"
                Show          on
                Position      [250, 220]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "5"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "Sawtooth PWM"
                SrcTerminal   1
                DstComponent  "s"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "duty"
                SrcTerminal   1
                DstComponent  "Sawtooth PWM"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "Pulse\nGenerator"
                SrcTerminal   1
                DstComponent  "Edge Detection"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "Edge Detection"
                SrcTerminal   2
                Points        [215, 130]
                Branch {
                  DstComponent  "z"
                  DstTerminal   1
                }
                Branch {
                  Points        [215, 175]
                  Branch {
                    DstComponent  "p"
                    DstTerminal   1
                  }
                  Branch {
                    Points        [215, 220]
                    DstComponent  "zp"
                    DstTerminal   1
                  }
                }
              }
            }
            Name          "symmetrical"
            Schematic {
              Component {
                Type          Input
                Name          "duty"
                Show          on
                Position      [130, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "s"
                Show          on
                Position      [275, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "z"
                Show          on
                Position      [275, 145]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "3"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Reference
                SrcComponent  "Components/Control/Modulators/Symmetrical PWM"
                Name          "Symmetrical PWM"
                Show          on
                Position      [205, 80]
                Direction     up
                Flipped       off
                Frame         [-20, -20; 20, 20]
                LabelPosition [0, 23]
                LabelAlign    up
                Parameter {
                  Variable      "sampling"
                  Value         "3"
                  Show          off
                }
                Parameter {
                  Variable      "fc"
                  Value         "fc"
                  Show          off
                }
                Parameter {
                  Variable      "offset"
                  Value         "0.5"
                  Show          off
                }
                Parameter {
                  Variable      "input_limits"
                  Value         "[0 1]"
                  Show          off
                }
                Parameter {
                  Variable      "output_values"
                  Value         "[-1 1]"
                  Show          off
                }
                Terminal {
                  Type          Output
                  Position      [24, 0]
                  Direction     right
                }
                Terminal {
                  Type          Input
                  Position      [-20, 0]
                  Direction     left
                }
              }
              Component {
                Type          PulseGenerator
                Name          "Pulse\nGenerator"
                Show          off
                Position      [135, 165]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Hi"
                  Value         "1"
                  Show          off
                }
                Parameter {
                  Variable      "Lo"
                  Value         "0"
                  Show          off
                }
                Parameter {
                  Variable      "f"
                  Value         "fc"
                  Show          off
                }
                Parameter {
                  Variable      "DutyCycle"
                  Value         "0.5"
                  Show          off
                }
                Parameter {
                  Variable      "Delay"
                  Value         "0"
                  Show          off
                }
                Parameter {
                  Variable      "DataType"
                  Value         "10"
                  Show          off
                }
              }
              Component {
                Type          EdgeDetection
                Name          "Edge Detection"
                Show          off
                Position      [205, 145]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Direction"
                  Value         "1"
                  Show          off
                }
              }
              Component {
                Type          EdgeDetection
                Name          "Edge Detection1"
                Show          off
                Position      [205, 190]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Direction"
                  Value         "2"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "p"
                Show          on
                Position      [275, 190]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "4"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "zp"
                Show          on
                Position      [275, 240]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "5"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          PulseGenerator
                Name          "Pulse\nGenerator1"
                Show          off
                Position      [135, 240]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Hi"
                  Value         "1"
                  Show          off
                }
                Parameter {
                  Variable      "Lo"
                  Value         "0"
                  Show          off
                }
                Parameter {
                  Variable      "f"
                  Value         "2*fc"
                  Show          off
                }
                Parameter {
                  Variable      "DutyCycle"
                  Value         "0.5"
                  Show          off
                }
                Parameter {
                  Variable      "Delay"
                  Value         "0"
                  Show          off
                }
                Parameter {
                  Variable      "DataType"
                  Value         "10"
                  Show          off
                }
              }
              Component {
                Type          EdgeDetection
                Name          "Edge Detection2"
                Show          off
                Position      [205, 240]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Direction"
                  Value         "1"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "duty"
                SrcTerminal   1
                DstComponent  "Symmetrical PWM"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "Symmetrical PWM"
                SrcTerminal   1
                DstComponent  "s"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "Edge Detection"
                SrcTerminal   2
                DstComponent  "z"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "Edge Detection1"
                SrcTerminal   2
                DstComponent  "p"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "Pulse\nGenerator"
                SrcTerminal   1
                Points        [165, 165]
                Branch {
                  Points        [165, 145]
                  DstComponent  "Edge Detection"
                  DstTerminal   1
                }
                Branch {
                  Points        [165, 190]
                  DstComponent  "Edge Detection1"
                  DstTerminal   1
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "Pulse\nGenerator1"
                SrcTerminal   1
                DstComponent  "Edge Detection2"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "Edge Detection2"
                SrcTerminal   2
                DstComponent  "zp"
                DstTerminal   1
              }
            }
          }
          Parameter {
            Variable      "Configuration"
            Value         "type"
            Show          off
          }
        }
        Component {
          Type          SignalSelector
          Name          "Cont\nSelector"
          Show          off
          Position      [365, 175]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "InputWidth"
            Value         "4"
            Show          off
          }
          Parameter {
            Variable      "OutputIndices"
            Value         "[intsel]"
            Show          off
          }
        }
        Component {
          Type          SignalMux
          Name          "Mux"
          Show          off
          Position      [315, 175]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "4"
            Show          off
          }
        }
        Component {
          Type          SignalSelector
          Name          "Cont\nSelector1"
          Show          off
          Position      [365, 215]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "InputWidth"
            Value         "4"
            Show          off
          }
          Parameter {
            Variable      "OutputIndices"
            Value         "[socsel]"
            Show          off
          }
        }
        Component {
          Type          Subsystem
          Name          "Pulse Divider1"
          Show          off
          Position      [430, 175]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          MaskInit      "if isnan(N) || N < 2\n"
"\timp = 1;\n"
"else\n"
"\timp = 2;\n"
"end"
          Parameter {
            Variable      "N"
            Prompt        "Period"
            Type          FreeText
            Value         "intsel_prd"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
          }
          Schematic {
            Location      [415, 55; 1080, 354]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [65, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out1"
              Show          off
              Position      [220, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Implementation"
              Show          on
              Position      [145, 80]
              Direction     up
              Flipped       off
              Frame         [-25, -15; 25, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-25, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [29, 0]
                Direction     right
              }
              TerminalNames { "In1", "Out1" }
              Location      [2017, 828; 2458, 1026]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "No Divider"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [120, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [195, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                }
                Name          "Divider"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [145, 35]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [255, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Subsystem
                    Name          "Triggered\nSubsystem"
                    Show          off
                    Position      [195, 75]
                    Direction     up
                    Flipped       off
                    Frame         [-25, -15; 25, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    TreatAsAtomicUnit on
                    SampleTime    "-1"
                    CodeGenDiscretizationMethod "2"
                    CodeGenTarget "Generic"
                    MaskDisplayLang "2"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Output
                      Position      [29, 0]
                      Direction     right
                      Index         "1"
                    }
                    Terminal {
                      Type          Input
                      Position      [0, -15]
                      Direction     up
                      Index         "1"
                    }
                    Schematic {
                      Location      [2032, 1123; 2519, 1321]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [335, 80]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "InitialOutput"
                          Value         "[]"
                          Show          off
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Trigger
                        Name          "Trigger"
                        Show          on
                        Position      [140, 20]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                        Parameter {
                          Variable      "TriggerType"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "ShowOutput"
                          Value         "1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Offset
                        Name          "Offset"
                        Show          off
                        Position      [140, 80]
                        Direction     right
                        Flipped       off
                        Frame         [-20, -10; 20, 10]
                        LabelPosition [0, 13]
                        LabelAlign    up
                        Parameter {
                          Variable      "Offset"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "DataType"
                          Value         "11"
                          Show          off
                        }
                      }
                      Component {
                        Type          SignalSwitch
                        Name          "Switch"
                        Show          on
                        Position      [195, 130]
                        Direction     right
                        Flipped       on
                        Parameter {
                          Variable      "Criteria"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "Threshold"
                          Value         "N"
                          Show          on
                        }
                      }
                      Component {
                        Type          ConstantRelationalOperator
                        Name          "Compare to\nConstant"
                        Show          off
                        Position      [275, 80]
                        Direction     right
                        Flipped       off
                        Frame         [-20, -10; 20, 10]
                        LabelPosition [0, 13]
                        LabelAlign    up
                        Parameter {
                          Variable      "Operator"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "Threshold"
                          Value         "N"
                          Show          off
                        }
                      }
                      Component {
                        Type          Memory
                        Name          "Memory"
                        Show          off
                        Position      [140, 130]
                        Direction     right
                        Flipped       on
                        Parameter {
                          Variable      "X0"
                          Value         "0"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Offset"
                        SrcTerminal   2
                        Points        [195, 80]
                        Branch {
                          Points        [230, 80]
                          Branch {
                            DstComponent  "Compare to\nConstant"
                            DstTerminal   1
                          }
                          Branch {
                            Points        [230, 135]
                            DstComponent  "Switch"
                            DstTerminal   3
                          }
                        }
                        Branch {
                          DstComponent  "Switch"
                          DstTerminal   4
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Compare to\nConstant"
                        SrcTerminal   2
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Switch"
                        SrcTerminal   1
                        DstComponent  "Memory"
                        DstTerminal   1
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Memory"
                        SrcTerminal   2
                        Points        [95, 130; 95, 80]
                        DstComponent  "Offset"
                        DstTerminal   1
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    Points        [195, 35]
                    DstComponent  "Triggered\nSubsystem"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Triggered\nSubsystem"
                    SrcTerminal   1
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "imp"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In1"
              SrcTerminal   1
              DstComponent  "Implementation"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Implementation"
              SrcTerminal   2
              DstComponent  "Out1"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          Subsystem
          Name          "Pulse Divider"
          Show          on
          Position      [430, 215]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          MaskInit      "if isnan(N) || N < 2\n"
"\timp = 1;\n"
"else\n"
"\timp = 2;\n"
"end"
          Parameter {
            Variable      "N"
            Prompt        "Period"
            Type          FreeText
            Value         "socsel_prd"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
          }
          Schematic {
            Location      [415, 55; 1080, 354]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [65, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out1"
              Show          off
              Position      [220, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Implementation"
              Show          on
              Position      [145, 80]
              Direction     up
              Flipped       off
              Frame         [-25, -15; 25, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-25, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [29, 0]
                Direction     right
              }
              TerminalNames { "In1", "Out1" }
              Location      [2017, 828; 2458, 1026]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "No Divider"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [120, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [195, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                }
                Name          "Divider"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [145, 35]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [255, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Subsystem
                    Name          "Triggered\nSubsystem"
                    Show          off
                    Position      [195, 75]
                    Direction     up
                    Flipped       off
                    Frame         [-25, -15; 25, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    TreatAsAtomicUnit on
                    SampleTime    "-1"
                    CodeGenDiscretizationMethod "2"
                    CodeGenTarget "Generic"
                    MaskDisplayLang "2"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Output
                      Position      [29, 0]
                      Direction     right
                      Index         "1"
                    }
                    Terminal {
                      Type          Input
                      Position      [0, -15]
                      Direction     up
                      Index         "1"
                    }
                    Schematic {
                      Location      [2032, 1123; 2519, 1321]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [335, 80]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "InitialOutput"
                          Value         "[]"
                          Show          off
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Trigger
                        Name          "Trigger"
                        Show          on
                        Position      [140, 20]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                        Parameter {
                          Variable      "TriggerType"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "ShowOutput"
                          Value         "1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Offset
                        Name          "Offset"
                        Show          off
                        Position      [140, 80]
                        Direction     right
                        Flipped       off
                        Frame         [-20, -10; 20, 10]
                        LabelPosition [0, 13]
                        LabelAlign    up
                        Parameter {
                          Variable      "Offset"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "DataType"
                          Value         "11"
                          Show          off
                        }
                      }
                      Component {
                        Type          SignalSwitch
                        Name          "Switch"
                        Show          on
                        Position      [195, 130]
                        Direction     right
                        Flipped       on
                        Parameter {
                          Variable      "Criteria"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "Threshold"
                          Value         "N"
                          Show          on
                        }
                      }
                      Component {
                        Type          ConstantRelationalOperator
                        Name          "Compare to\nConstant"
                        Show          off
                        Position      [275, 80]
                        Direction     right
                        Flipped       off
                        Frame         [-20, -10; 20, 10]
                        LabelPosition [0, 13]
                        LabelAlign    up
                        Parameter {
                          Variable      "Operator"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "Threshold"
                          Value         "N"
                          Show          off
                        }
                      }
                      Component {
                        Type          Memory
                        Name          "Memory"
                        Show          off
                        Position      [140, 130]
                        Direction     right
                        Flipped       on
                        Parameter {
                          Variable      "X0"
                          Value         "0"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Offset"
                        SrcTerminal   2
                        Points        [195, 80]
                        Branch {
                          Points        [230, 80]
                          Branch {
                            DstComponent  "Compare to\nConstant"
                            DstTerminal   1
                          }
                          Branch {
                            Points        [230, 135]
                            DstComponent  "Switch"
                            DstTerminal   3
                          }
                        }
                        Branch {
                          DstComponent  "Switch"
                          DstTerminal   4
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Compare to\nConstant"
                        SrcTerminal   2
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Switch"
                        SrcTerminal   1
                        DstComponent  "Memory"
                        DstTerminal   1
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Memory"
                        SrcTerminal   2
                        Points        [95, 130; 95, 80]
                        DstComponent  "Offset"
                        DstTerminal   1
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    Points        [195, 35]
                    DstComponent  "Triggered\nSubsystem"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Triggered\nSubsystem"
                    SrcTerminal   1
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "imp"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In1"
              SrcTerminal   1
              DstComponent  "Implementation"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Implementation"
              SrcTerminal   2
              DstComponent  "Out1"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          Input
          Name          "seq"
          Show          on
          Position      [35, 55]
          Direction     left
          Flipped       on
          Parameter {
            Variable      "Index"
            Value         "4"
            Show          on
          }
          Parameter {
            Variable      "InitialOutput"
            Value         "[]"
            Show          off
          }
          Parameter {
            Variable      "HasDirectFeedthrough"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "numel(pwm)"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "en"
          Show          on
          Position      [285, 15]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "5"
            Show          on
          }
          Parameter {
            Variable      "InitialOutput"
            Value         "[]"
            Show          off
          }
          Parameter {
            Variable      "HasDirectFeedthrough"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "numel(pwm)"
            Show          off
          }
        }
        Component {
          Type          ConfigurableSubsystem
          Name          "Output Mode"
          Show          on
          Position      [325, 65]
          Direction     up
          Flipped       off
          Frame         [-30, -20; 30, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-30, 5]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [34, 5]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-30, -10]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [0, -20]
            Direction     up
          }
          TerminalNames { "s", "s'", "Seq", "En" }
          Location      [103, 397; 553, 632]
          ZoomFactor    1
          SliderPosition [0, 0]
          ShowBrowser   off
          BrowserWidth  100
          Configurations {
            Name          "Complementary"
            Schematic {
              Component {
                Type          Input
                Name          "s"
                Show          on
                Position      [25, 70]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "s'"
                Show          on
                Position      [415, 75]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "Seq"
                Show          on
                Position      [145, 125]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "3"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "En"
                Show          on
                Position      [225, 140]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "4"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          ConfigurableSubsystem
                Name          "Enable\nPort"
                Show          on
                Position      [280, 140]
                Direction     up
                Flipped       off
                Frame         [-20, -20; 20, 20]
                LabelPosition [0, 0]
                SampleTime    "-1"
                CodeGenDiscretizationMethod "2"
                CodeGenTarget "Generic"
                MaskIconFrame on
                MaskIconOpaque off
                MaskIconRotates on
                Terminal {
                  Type          Output
                  Position      [24, 0]
                  Direction     right
                }
                Terminal {
                  Type          Input
                  Position      [-20, 0]
                  Direction     left
                }
                TerminalNames { "1", "2" }
                Location      [908, 1036; 1129, 1206]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Configurations {
                  Name          "Hide Enable Port"
                  Schematic {
                    Component {
                      Type          Output
                      Name          "1"
                      Show          off
                      Position      [195, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "2"
                      Show          off
                      Position      [55, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Constant
                      Name          "Constant"
                      Show          off
                      Position      [130, 55]
                      Direction     right
                      Flipped       off
                      Frame         [-10, -10; 10, 10]
                      LabelPosition [0, 13]
                      LabelAlign    up
                      Parameter {
                        Variable      "Value"
                        Value         "ones(1, 2*num_PWM)"
                        Show          off
                      }
                      Parameter {
                        Variable      "DataType"
                        Value         "10"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Constant"
                      SrcTerminal   1
                      DstComponent  "1"
                      DstTerminal   1
                    }
                  }
                  Name          "Show Enable Port"
                  Schematic {
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector1"
                      Show          off
                      Position      [135, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM;num_PWM+1:2*num_PWM]"
",[1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalMux
                      Name          "Mux"
                      Show          off
                      Position      [100, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Width"
                        Value         "[num_PWM num_PWM]"
                        Show          off
                      }
                    }
                    Component {
                      Type          Output
                      Name          "1"
                      Show          off
                      Position      [195, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "2"
                      Show          off
                      Position      [55, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Mux"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector1"
                      SrcTerminal   2
                      DstComponent  "1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "2"
                      SrcTerminal   1
                      Points        [85, 55]
                      Branch {
                        DstComponent  "Mux"
                        DstTerminal   2
                      }
                      Branch {
                        DstComponent  "Mux"
                        DstTerminal   3
                      }
                    }
                  }
                }
                Parameter {
                  Variable      "Configuration"
                  Value         "show_enable"
                  Show          off
                }
              }
              Component {
                Type          Reference
                SrcComponent  "Components/Control/Modulators/Blanking Time"
                Name          "Blanking Time"
                Show          on
                Position      [105, 70]
                Direction     up
                Flipped       off
                Frame         [-20, -20; 20, 20]
                LabelPosition [0, 23]
                LabelAlign    up
                Parameter {
                  Variable      "tb"
                  Value         "delay"
                  Show          off
                }
                Terminal {
                  Type          Output
                  Position      [24, 0]
                  Direction     right
                }
                Terminal {
                  Type          Input
                  Position      [-20, 0]
                  Direction     left
                }
              }
              Component {
                Type          ConfigurableSubsystem
                Name          "sw"
                Show          on
                Position      [210, 75]
                Direction     up
                Flipped       off
                Frame         [-20, -20; 20, 20]
                LabelPosition [0, 23]
                LabelAlign    up
                SampleTime    "-1"
                CodeGenDiscretizationMethod "2"
                CodeGenTarget "Generic"
                MaskDisplayLang "2"
                MaskIconFrame on
                MaskIconOpaque off
                MaskIconRotates on
                Terminal {
                  Type          Input
                  Position      [-20, -5]
                  Direction     left
                }
                Terminal {
                  Type          Output
                  Position      [24, -5]
                  Direction     right
                }
                Terminal {
                  Type          Input
                  Position      [-20, 5]
                  Direction     left
                }
                TerminalNames { "In1", "Out1", "Seq" }
                Location      [1110, 688; 1422, 874]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Configurations {
                  Name          "Positive"
                  Schematic {
                    Component {
                      Type          Input
                      Name          "In1"
                      Show          off
                      Position      [20, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Output
                      Name          "Out1"
                      Show          off
                      Position      [400, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector"
                      Show          off
                      Position      [210, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM; (num_PWM+1):num_PWM"
"*2], [1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "Seq"
                      Show          on
                      Position      [35, 140]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "3"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "numel(pwm)"
                        Show          off
                      }
                    }
                    Component {
                      Type          ConfigurableSubsystem
                      Name          "Sub"
                      Show          on
                      Position      [100, 60]
                      Direction     up
                      Flipped       off
                      Frame         [-20, -20; 20, 20]
                      LabelPosition [0, 23]
                      LabelAlign    up
                      SampleTime    "-1"
                      CodeGenDiscretizationMethod "2"
                      CodeGenTarget "Generic"
                      MaskIconFrame on
                      MaskIconOpaque off
                      MaskIconRotates on
                      Terminal {
                        Type          Output
                        Position      [24, 0]
                        Direction     right
                      }
                      Terminal {
                        Type          Input
                        Position      [-20, 0]
                        Direction     left
                      }
                      TerminalNames { "1", "2" }
                      Location      [575, 458; 774, 641]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Configurations {
                        Name          "Active state is \"1\""
                        Schematic {
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [95, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "6"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [95, 100]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "3"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [135, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [175, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [30, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [60, 90]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                        Name          "Active state is \"0\""
                        Schematic {
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [175, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [30, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [95, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "4"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [95, 100]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "5"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [135, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [60, 90]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                        }
                      }
                      Parameter {
                        Variable      "Configuration"
                        Value         "polarity"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "In1"
                      SrcTerminal   1
                      DstComponent  "Sub"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector"
                      SrcTerminal   2
                      DstComponent  "Out1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Sub"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector"
                      DstTerminal   1
                    }
                  }
                  Name          "Negative"
                  Schematic {
                    Component {
                      Type          Input
                      Name          "In1"
                      Show          off
                      Position      [20, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Output
                      Name          "Out1"
                      Show          off
                      Position      [400, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "Seq"
                      Show          on
                      Position      [35, 140]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "3"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "numel(pwm)"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector"
                      Show          off
                      Position      [210, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM; (num_PWM+1):num_PWM"
"*2], [1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          ConfigurableSubsystem
                      Name          "Sub"
                      Show          on
                      Position      [100, 60]
                      Direction     up
                      Flipped       off
                      Frame         [-20, -20; 20, 20]
                      LabelPosition [0, 23]
                      LabelAlign    up
                      SampleTime    "-1"
                      CodeGenDiscretizationMethod "2"
                      CodeGenTarget "Generic"
                      MaskIconFrame on
                      MaskIconOpaque off
                      MaskIconRotates on
                      Terminal {
                        Type          Output
                        Position      [24, 0]
                        Direction     right
                      }
                      Terminal {
                        Type          Input
                        Position      [-20, 0]
                        Direction     left
                      }
                      TerminalNames { "1", "2" }
                      Location      [1026, 458; 1228, 639]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Configurations {
                        Name          "Active state is logic \"1\""
                        Schematic {
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [180, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [25, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [100, 75]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "5"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [100, 95]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "4"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [140, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [65, 85]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                        Name          "Active state is logic \"0\""
                        Schematic {
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [100, 75]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "3"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [100, 95]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "6"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [140, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [180, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [25, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [65, 85]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                      }
                      Parameter {
                        Variable      "Configuration"
                        Value         "polarity"
                        Show          off
                      }
                    }
                    Component {
                      Type          LogicalOperator
                      Name          "Logical\nOperator"
                      Show          on
                      Position      [300, 60]
                      Direction     up
                      Flipped       off
                      Parameter {
                        Variable      "Operator"
                        Value         "6"
                        Show          off
                      }
                      Parameter {
                        Variable      "Inputs"
                        Value         "2"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "In1"
                      SrcTerminal   1
                      DstComponent  "Sub"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Sub"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector"
                      SrcTerminal   2
                      DstComponent  "Logical\nOperator"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Logical\nOperator"
                      SrcTerminal   1
                      DstComponent  "Out1"
                      DstTerminal   1
                    }
                  }
                  Name          "Variable"
                  Schematic {
                    Component {
                      Type          Input
                      Name          "In1"
                      Show          off
                      Position      [20, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Output
                      Name          "Out1"
                      Show          off
                      Position      [405, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "Seq"
                      Show          on
                      Position      [35, 140]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "3"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "numel(pwm)"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector1"
                      Show          off
                      Position      [130, 145]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM;num_PWM+1:2*num_PWM]"
",[1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalMux
                      Name          "Mux"
                      Show          off
                      Position      [95, 145]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Width"
                        Value         "[num_PWM num_PWM]"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector2"
                      Show          off
                      Position      [195, 30]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM; (num_PWM+1):num_PWM"
"*2], [1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          ConfigurableSubsystem
                      Name          "Sub1"
                      Show          on
                      Position      [85, 30]
                      Direction     up
                      Flipped       off
                      Frame         [-20, -20; 20, 20]
                      LabelPosition [0, 23]
                      LabelAlign    up
                      SampleTime    "-1"
                      CodeGenDiscretizationMethod "2"
                      CodeGenTarget "Generic"
                      MaskIconFrame on
                      MaskIconOpaque off
                      MaskIconRotates on
                      Terminal {
                        Type          Output
                        Position      [24, 0]
                        Direction     right
                      }
                      Terminal {
                        Type          Input
                        Position      [-20, 0]
                        Direction     left
                      }
                      TerminalNames { "1", "2" }
                      Location      [1026, 458; 1228, 639]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Configurations {
                        Name          "Active state is logic \"1\""
                        Schematic {
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [180, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [25, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [100, 75]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "5"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [100, 95]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "4"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [140, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [65, 85]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                        Name          "Active state is logic \"0\""
                        Schematic {
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [100, 75]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "3"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [100, 95]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "6"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [140, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [180, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [25, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [65, 85]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                      }
                      Parameter {
                        Variable      "Configuration"
                        Value         "polarity"
                        Show          off
                      }
                    }
                    Component {
                      Type          LogicalOperator
                      Name          "Logical\nOperator"
                      Show          on
                      Position      [285, 30]
                      Direction     up
                      Flipped       off
                      Parameter {
                        Variable      "Operator"
                        Value         "6"
                        Show          off
                      }
                      Parameter {
                        Variable      "Inputs"
                        Value         "2"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSwitch
                      Name          "Switch"
                      Show          off
                      Position      [355, 55]
                      Direction     left
                      Flipped       on
                      Parameter {
                        Variable      "Criteria"
                        Value         "3"
                        Show          off
                      }
                      Parameter {
                        Variable      "Threshold"
                        Value         "0"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector"
                      Show          off
                      Position      [195, 85]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM; (num_PWM+1):num_PWM"
"*2], [1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          ConfigurableSubsystem
                      Name          "Sub"
                      Show          on
                      Position      [85, 85]
                      Direction     up
                      Flipped       off
                      Frame         [-20, -20; 20, 20]
                      LabelPosition [0, 23]
                      LabelAlign    up
                      SampleTime    "-1"
                      CodeGenDiscretizationMethod "2"
                      CodeGenTarget "Generic"
                      MaskIconFrame on
                      MaskIconOpaque off
                      MaskIconRotates on
                      Terminal {
                        Type          Output
                        Position      [24, 0]
                        Direction     right
                      }
                      Terminal {
                        Type          Input
                        Position      [-20, 0]
                        Direction     left
                      }
                      TerminalNames { "1", "2" }
                      Location      [575, 458; 774, 641]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Configurations {
                        Name          "Active state is \"1\""
                        Schematic {
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [95, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "6"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [95, 100]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "3"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [135, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [175, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [30, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [60, 90]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                        Name          "Active state is \"0\""
                        Schematic {
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [175, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [30, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [95, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "4"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [95, 100]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "5"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [135, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [60, 90]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                        }
                      }
                      Parameter {
                        Variable      "Configuration"
                        Value         "polarity"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Mux"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Seq"
                      SrcTerminal   1
                      Points        [80, 140]
                      Branch {
                        DstComponent  "Mux"
                        DstTerminal   2
                      }
                      Branch {
                        DstComponent  "Mux"
                        DstTerminal   3
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Sub1"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector2"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector2"
                      SrcTerminal   2
                      DstComponent  "Logical\nOperator"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Sub"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "In1"
                      SrcTerminal   1
                      Points        [45, 55]
                      Branch {
                        Points        [45, 30]
                        DstComponent  "Sub1"
                        DstTerminal   2
                      }
                      Branch {
                        Points        [45, 85]
                        DstComponent  "Sub"
                        DstTerminal   2
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector"
                      SrcTerminal   2
                      Points        [325, 85]
                      DstComponent  "Switch"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Logical\nOperator"
                      SrcTerminal   1
                      Points        [325, 30]
                      DstComponent  "Switch"
                      DstTerminal   3
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Switch"
                      SrcTerminal   1
                      DstComponent  "Out1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector1"
                      SrcTerminal   2
                      Points        [355, 145]
                      DstComponent  "Switch"
                      DstTerminal   4
                    }
                  }
                }
                Parameter {
                  Variable      "Configuration"
                  Value         "sequence"
                  Show          off
                }
              }
              Component {
                Type          ConfigurableSubsystem
                Name          "enable"
                Show          on
                Position      [345, 75]
                Direction     up
                Flipped       off
                Frame         [-15, -15; 15, 15]
                LabelPosition [0, 18]
                LabelAlign    up
                SampleTime    "-1"
                CodeGenDiscretizationMethod "2"
                CodeGenTarget "Generic"
                MaskIconFrame on
                MaskIconOpaque off
                MaskIconRotates on
                Terminal {
                  Type          Output
                  Position      [19, 0]
                  Direction     right
                }
                Terminal {
                  Type          Input
                  Position      [-15, -5]
                  Direction     left
                }
                Terminal {
                  Type          Input
                  Position      [-15, 5]
                  Direction     left
                }
                TerminalNames { "1", "2", "3" }
                Location      [1158, 129; 1357, 312]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Configurations {
                  Name          "Active state is \"1\""
                  Schematic {
                    Component {
                      Type          Output
                      Name          "1"
                      Show          off
                      Position      [200, 50]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "2"
                      Show          off
                      Position      [95, 35]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "3"
                      Show          off
                      Position      [95, 65]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "3"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          LogicalOperator
                      Name          "Logical\nOperator"
                      Show          off
                      Position      [150, 50]
                      Direction     up
                      Flipped       off
                      Parameter {
                        Variable      "Operator"
                        Value         "1"
                        Show          off
                      }
                      Parameter {
                        Variable      "Inputs"
                        Value         "2"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Logical\nOperator"
                      SrcTerminal   1
                      DstComponent  "1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "2"
                      SrcTerminal   1
                      Points        [120, 35]
                      DstComponent  "Logical\nOperator"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "3"
                      SrcTerminal   1
                      Points        [120, 65]
                      DstComponent  "Logical\nOperator"
                      DstTerminal   3
                    }
                  }
                  Name          "Active state is \"0\""
                  Schematic {
                    Component {
                      Type          Output
                      Name          "1"
                      Show          off
                      Position      [500, 50]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "2"
                      Show          off
                      Position      [345, 35]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "3"
                      Show          off
                      Position      [345, 65]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "3"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          LogicalOperator
                      Name          "Logical\nOperator"
                      Show          off
                      Position      [450, 50]
                      Direction     up
                      Flipped       off
                      Parameter {
                        Variable      "Operator"
                        Value         "2"
                        Show          off
                      }
                      Parameter {
                        Variable      "Inputs"
                        Value         "2"
                        Show          off
                      }
                    }
                    Component {
                      Type          LogicalOperator
                      Name          "Logical\nOperator1"
                      Show          off
                      Position      [395, 65]
                      Direction     up
                      Flipped       off
                      Parameter {
                        Variable      "Operator"
                        Value         "6"
                        Show          off
                      }
                      Parameter {
                        Variable      "Inputs"
                        Value         "2"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Logical\nOperator"
                      SrcTerminal   1
                      DstComponent  "1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "2"
                      SrcTerminal   1
                      Points        [420, 35]
                      DstComponent  "Logical\nOperator"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "3"
                      SrcTerminal   1
                      DstComponent  "Logical\nOperator1"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Logical\nOperator1"
                      SrcTerminal   1
                      Points        [420, 65]
                      DstComponent  "Logical\nOperator"
                      DstTerminal   3
                    }
                  }
                }
                Parameter {
                  Variable      "Configuration"
                  Value         "polarity"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "s"
                SrcTerminal   1
                DstComponent  "Blanking Time"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "sw"
                SrcTerminal   2
                DstComponent  "enable"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "enable"
                SrcTerminal   1
                DstComponent  "s'"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "Enable\nPort"
                SrcTerminal   1
                Points        [310, 140; 310, 80]
                DstComponent  "enable"
                DstTerminal   3
              }
              Connection {
                Type          Signal
                SrcComponent  "En"
                SrcTerminal   1
                DstComponent  "Enable\nPort"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "Seq"
                SrcTerminal   1
                Points        [170, 125; 170, 80]
                DstComponent  "sw"
                DstTerminal   3
              }
              Connection {
                Type          Signal
                SrcComponent  "Blanking Time"
                SrcTerminal   1
                DstComponent  "sw"
                DstTerminal   1
              }
            }
            Name          "Single"
            Schematic {
              Component {
                Type          Input
                Name          "s"
                Show          on
                Position      [25, 70]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "s'"
                Show          on
                Position      [415, 75]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "Seq"
                Show          on
                Position      [145, 125]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "3"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "En"
                Show          on
                Position      [225, 140]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "4"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          ConfigurableSubsystem
                Name          "Enable\nPort"
                Show          on
                Position      [280, 140]
                Direction     up
                Flipped       off
                Frame         [-20, -20; 20, 20]
                LabelPosition [0, 0]
                SampleTime    "-1"
                CodeGenDiscretizationMethod "2"
                CodeGenTarget "Generic"
                MaskIconFrame on
                MaskIconOpaque off
                MaskIconRotates on
                Terminal {
                  Type          Output
                  Position      [24, 0]
                  Direction     right
                }
                Terminal {
                  Type          Input
                  Position      [-20, 0]
                  Direction     left
                }
                TerminalNames { "1", "2" }
                Location      [1363, 1035; 1584, 1205]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Configurations {
                  Name          "Hide Enable Port"
                  Schematic {
                    Component {
                      Type          Output
                      Name          "1"
                      Show          off
                      Position      [200, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "2"
                      Show          off
                      Position      [55, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Constant
                      Name          "Constant1"
                      Show          off
                      Position      [130, 55]
                      Direction     right
                      Flipped       off
                      Frame         [-10, -10; 10, 10]
                      LabelPosition [0, 13]
                      LabelAlign    up
                      Parameter {
                        Variable      "Value"
                        Value         "ones(1, num_PWM)"
                        Show          off
                      }
                      Parameter {
                        Variable      "DataType"
                        Value         "10"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Constant1"
                      SrcTerminal   1
                      DstComponent  "1"
                      DstTerminal   1
                    }
                  }
                  Name          "Show Enable Port"
                  Schematic {
                    Component {
                      Type          Output
                      Name          "1"
                      Show          off
                      Position      [200, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "2"
                      Show          off
                      Position      [55, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "2"
                      SrcTerminal   1
                      DstComponent  "1"
                      DstTerminal   1
                    }
                  }
                }
                Parameter {
                  Variable      "Configuration"
                  Value         "show_enable"
                  Show          off
                }
              }
              Component {
                Type          SignalSelector
                Name          "Cont\nSelector1"
                Show          off
                Position      [275, 70]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "InputWidth"
                  Value         "num_PWM*2"
                  Show          off
                }
                Parameter {
                  Variable      "OutputIndices"
                  Value         "[1:2:num_PWM*2]"
                  Show          off
                }
              }
              Component {
                Type          Reference
                SrcComponent  "Components/Control/Modulators/Blanking Time"
                Name          "Blanking Time"
                Show          on
                Position      [105, 70]
                Direction     up
                Flipped       off
                Frame         [-20, -20; 20, 20]
                LabelPosition [0, 23]
                LabelAlign    up
                Parameter {
                  Variable      "tb"
                  Value         "delay"
                  Show          off
                }
                Terminal {
                  Type          Output
                  Position      [24, 0]
                  Direction     right
                }
                Terminal {
                  Type          Input
                  Position      [-20, 0]
                  Direction     left
                }
              }
              Component {
                Type          ConfigurableSubsystem
                Name          "sw"
                Show          on
                Position      [210, 75]
                Direction     up
                Flipped       off
                Frame         [-20, -20; 20, 20]
                LabelPosition [0, 23]
                LabelAlign    up
                SampleTime    "-1"
                CodeGenDiscretizationMethod "2"
                CodeGenTarget "Generic"
                MaskDisplayLang "2"
                MaskIconFrame on
                MaskIconOpaque off
                MaskIconRotates on
                Terminal {
                  Type          Input
                  Position      [-20, -5]
                  Direction     left
                }
                Terminal {
                  Type          Output
                  Position      [24, -5]
                  Direction     right
                }
                Terminal {
                  Type          Input
                  Position      [-20, 5]
                  Direction     left
                }
                TerminalNames { "In1", "Out1", "Seq" }
                Location      [845, 688; 1157, 874]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Configurations {
                  Name          "Positive"
                  Schematic {
                    Component {
                      Type          Input
                      Name          "In1"
                      Show          off
                      Position      [20, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Output
                      Name          "Out1"
                      Show          off
                      Position      [400, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector"
                      Show          off
                      Position      [210, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM; (num_PWM+1):num_PWM"
"*2], [1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "Seq"
                      Show          on
                      Position      [35, 140]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "3"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "numel(pwm)"
                        Show          off
                      }
                    }
                    Component {
                      Type          ConfigurableSubsystem
                      Name          "Sub"
                      Show          on
                      Position      [100, 60]
                      Direction     up
                      Flipped       off
                      Frame         [-20, -20; 20, 20]
                      LabelPosition [0, 23]
                      LabelAlign    up
                      SampleTime    "-1"
                      CodeGenDiscretizationMethod "2"
                      CodeGenTarget "Generic"
                      MaskIconFrame on
                      MaskIconOpaque off
                      MaskIconRotates on
                      Terminal {
                        Type          Output
                        Position      [24, 0]
                        Direction     right
                      }
                      Terminal {
                        Type          Input
                        Position      [-20, 0]
                        Direction     left
                      }
                      TerminalNames { "1", "2" }
                      Location      [980, 466; 1430, 701]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Configurations {
                        Name          "Active state is \"1\""
                        Schematic {
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [95, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "6"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [95, 100]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "3"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [135, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [175, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [30, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [60, 90]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                        Name          "Active state is \"0\""
                        Schematic {
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [175, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [30, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [95, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "4"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [95, 100]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "5"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [135, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [60, 90]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                        }
                      }
                      Parameter {
                        Variable      "Configuration"
                        Value         "polarity"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "In1"
                      SrcTerminal   1
                      DstComponent  "Sub"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector"
                      SrcTerminal   2
                      DstComponent  "Out1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Sub"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector"
                      DstTerminal   1
                    }
                  }
                  Name          "Negative"
                  Schematic {
                    Component {
                      Type          Input
                      Name          "In1"
                      Show          off
                      Position      [20, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Output
                      Name          "Out1"
                      Show          off
                      Position      [400, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "Seq"
                      Show          on
                      Position      [35, 140]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "3"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "numel(pwm)"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector"
                      Show          off
                      Position      [210, 60]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM; (num_PWM+1):num_PWM"
"*2], [1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          ConfigurableSubsystem
                      Name          "Sub"
                      Show          on
                      Position      [100, 60]
                      Direction     up
                      Flipped       off
                      Frame         [-20, -20; 20, 20]
                      LabelPosition [0, 23]
                      LabelAlign    up
                      SampleTime    "-1"
                      CodeGenDiscretizationMethod "2"
                      CodeGenTarget "Generic"
                      MaskIconFrame on
                      MaskIconOpaque off
                      MaskIconRotates on
                      Terminal {
                        Type          Output
                        Position      [24, 0]
                        Direction     right
                      }
                      Terminal {
                        Type          Input
                        Position      [-20, 0]
                        Direction     left
                      }
                      TerminalNames { "1", "2" }
                      Location      [1026, 458; 1228, 639]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Configurations {
                        Name          "Active state is logic \"1\""
                        Schematic {
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [180, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [25, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [100, 75]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "5"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [100, 95]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "4"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [140, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [65, 85]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                        Name          "Active state is logic \"0\""
                        Schematic {
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [100, 75]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "3"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [100, 95]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "6"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [140, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [180, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [25, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [65, 85]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                      }
                      Parameter {
                        Variable      "Configuration"
                        Value         "polarity"
                        Show          off
                      }
                    }
                    Component {
                      Type          LogicalOperator
                      Name          "Logical\nOperator"
                      Show          on
                      Position      [300, 60]
                      Direction     up
                      Flipped       off
                      Parameter {
                        Variable      "Operator"
                        Value         "6"
                        Show          off
                      }
                      Parameter {
                        Variable      "Inputs"
                        Value         "2"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "In1"
                      SrcTerminal   1
                      DstComponent  "Sub"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Sub"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector"
                      SrcTerminal   2
                      DstComponent  "Logical\nOperator"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Logical\nOperator"
                      SrcTerminal   1
                      DstComponent  "Out1"
                      DstTerminal   1
                    }
                  }
                  Name          "Variable"
                  Schematic {
                    Component {
                      Type          Input
                      Name          "In1"
                      Show          off
                      Position      [20, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Output
                      Name          "Out1"
                      Show          off
                      Position      [405, 55]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "Seq"
                      Show          on
                      Position      [35, 140]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "3"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "numel(pwm)"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector1"
                      Show          off
                      Position      [130, 145]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM;num_PWM+1:2*num_PWM]"
",[1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalMux
                      Name          "Mux"
                      Show          off
                      Position      [95, 145]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Width"
                        Value         "[num_PWM num_PWM]"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector2"
                      Show          off
                      Position      [195, 30]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM; (num_PWM+1):num_PWM"
"*2], [1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          ConfigurableSubsystem
                      Name          "Sub1"
                      Show          on
                      Position      [85, 30]
                      Direction     up
                      Flipped       off
                      Frame         [-20, -20; 20, 20]
                      LabelPosition [0, 23]
                      LabelAlign    up
                      SampleTime    "-1"
                      CodeGenDiscretizationMethod "2"
                      CodeGenTarget "Generic"
                      MaskIconFrame on
                      MaskIconOpaque off
                      MaskIconRotates on
                      Terminal {
                        Type          Output
                        Position      [24, 0]
                        Direction     right
                      }
                      Terminal {
                        Type          Input
                        Position      [-20, 0]
                        Direction     left
                      }
                      TerminalNames { "1", "2" }
                      Location      [1026, 458; 1228, 639]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Configurations {
                        Name          "Active state is logic \"1\""
                        Schematic {
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [180, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [25, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [100, 75]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "5"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [100, 95]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "4"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [140, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [65, 85]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                        Name          "Active state is logic \"0\""
                        Schematic {
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [100, 75]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "3"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [100, 95]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "6"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [140, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [180, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [25, 85]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [65, 85]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                      }
                      Parameter {
                        Variable      "Configuration"
                        Value         "polarity"
                        Show          off
                      }
                    }
                    Component {
                      Type          LogicalOperator
                      Name          "Logical\nOperator"
                      Show          on
                      Position      [285, 30]
                      Direction     up
                      Flipped       off
                      Parameter {
                        Variable      "Operator"
                        Value         "6"
                        Show          off
                      }
                      Parameter {
                        Variable      "Inputs"
                        Value         "2"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSwitch
                      Name          "Switch"
                      Show          off
                      Position      [355, 55]
                      Direction     left
                      Flipped       on
                      Parameter {
                        Variable      "Criteria"
                        Value         "3"
                        Show          off
                      }
                      Parameter {
                        Variable      "Threshold"
                        Value         "0"
                        Show          off
                      }
                    }
                    Component {
                      Type          SignalSelector
                      Name          "Cont\nSelector"
                      Show          off
                      Position      [195, 85]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "InputWidth"
                        Value         "num_PWM*2"
                        Show          off
                      }
                      Parameter {
                        Variable      "OutputIndices"
                        Value         "reshape([1:num_PWM; (num_PWM+1):num_PWM"
"*2], [1 num_PWM*2])"
                        Show          off
                      }
                    }
                    Component {
                      Type          ConfigurableSubsystem
                      Name          "Sub"
                      Show          on
                      Position      [85, 85]
                      Direction     up
                      Flipped       off
                      Frame         [-20, -20; 20, 20]
                      LabelPosition [0, 23]
                      LabelAlign    up
                      SampleTime    "-1"
                      CodeGenDiscretizationMethod "2"
                      CodeGenTarget "Generic"
                      MaskIconFrame on
                      MaskIconOpaque off
                      MaskIconRotates on
                      Terminal {
                        Type          Output
                        Position      [24, 0]
                        Direction     right
                      }
                      Terminal {
                        Type          Input
                        Position      [-20, 0]
                        Direction     left
                      }
                      TerminalNames { "1", "2" }
                      Location      [575, 458; 774, 641]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Configurations {
                        Name          "Active state is \"1\""
                        Schematic {
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [95, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "6"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [95, 100]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "3"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [135, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [175, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [30, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [60, 90]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                        }
                        Name          "Active state is \"0\""
                        Schematic {
                          Component {
                            Type          Output
                            Name          "1"
                            Show          off
                            Position      [175, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Input
                            Name          "2"
                            Show          off
                            Position      [30, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [95, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "4"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant1"
                            Show          off
                            Position      [95, 100]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "5"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "0"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalMux
                            Name          "Mux"
                            Show          off
                            Position      [135, 90]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Width"
                              Value         "[num_PWM num_PWM]"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   2
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant1"
                            SrcTerminal   2
                            DstComponent  "Mux"
                            DstTerminal   3
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "2"
                            SrcTerminal   1
                            Points        [60, 90]
                            Branch {
                              DstComponent  "Compare to\nConstant1"
                              DstTerminal   1
                            }
                            Branch {
                              DstComponent  "Compare to\nConstant"
                              DstTerminal   1
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Mux"
                            SrcTerminal   1
                            DstComponent  "1"
                            DstTerminal   1
                          }
                        }
                      }
                      Parameter {
                        Variable      "Configuration"
                        Value         "polarity"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Mux"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Seq"
                      SrcTerminal   1
                      Points        [80, 140]
                      Branch {
                        DstComponent  "Mux"
                        DstTerminal   2
                      }
                      Branch {
                        DstComponent  "Mux"
                        DstTerminal   3
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Sub1"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector2"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector2"
                      SrcTerminal   2
                      DstComponent  "Logical\nOperator"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Sub"
                      SrcTerminal   1
                      DstComponent  "Cont\nSelector"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "In1"
                      SrcTerminal   1
                      Points        [45, 55]
                      Branch {
                        Points        [45, 30]
                        DstComponent  "Sub1"
                        DstTerminal   2
                      }
                      Branch {
                        Points        [45, 85]
                        DstComponent  "Sub"
                        DstTerminal   2
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector"
                      SrcTerminal   2
                      Points        [325, 85]
                      DstComponent  "Switch"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Logical\nOperator"
                      SrcTerminal   1
                      Points        [325, 30]
                      DstComponent  "Switch"
                      DstTerminal   3
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Switch"
                      SrcTerminal   1
                      DstComponent  "Out1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Cont\nSelector1"
                      SrcTerminal   2
                      Points        [355, 145]
                      DstComponent  "Switch"
                      DstTerminal   4
                    }
                  }
                }
                Parameter {
                  Variable      "Configuration"
                  Value         "sequence"
                  Show          off
                }
              }
              Component {
                Type          ConfigurableSubsystem
                Name          "enable"
                Show          on
                Position      [345, 75]
                Direction     up
                Flipped       off
                Frame         [-15, -15; 15, 15]
                LabelPosition [0, 18]
                LabelAlign    up
                SampleTime    "-1"
                CodeGenDiscretizationMethod "2"
                CodeGenTarget "Generic"
                MaskIconFrame on
                MaskIconOpaque off
                MaskIconRotates on
                Terminal {
                  Type          Output
                  Position      [19, 0]
                  Direction     right
                }
                Terminal {
                  Type          Input
                  Position      [-15, -5]
                  Direction     left
                }
                Terminal {
                  Type          Input
                  Position      [-15, 5]
                  Direction     left
                }
                TerminalNames { "1", "2", "3" }
                Location      [1158, 129; 1357, 312]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Configurations {
                  Name          "Active state is \"1\""
                  Schematic {
                    Component {
                      Type          Output
                      Name          "1"
                      Show          off
                      Position      [200, 50]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "2"
                      Show          off
                      Position      [95, 35]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "3"
                      Show          off
                      Position      [95, 65]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "3"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          LogicalOperator
                      Name          "Logical\nOperator"
                      Show          off
                      Position      [150, 50]
                      Direction     up
                      Flipped       off
                      Parameter {
                        Variable      "Operator"
                        Value         "1"
                        Show          off
                      }
                      Parameter {
                        Variable      "Inputs"
                        Value         "2"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Logical\nOperator"
                      SrcTerminal   1
                      DstComponent  "1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "2"
                      SrcTerminal   1
                      Points        [120, 35]
                      DstComponent  "Logical\nOperator"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "3"
                      SrcTerminal   1
                      Points        [120, 65]
                      DstComponent  "Logical\nOperator"
                      DstTerminal   3
                    }
                  }
                  Name          "Active state is \"0\""
                  Schematic {
                    Component {
                      Type          Output
                      Name          "1"
                      Show          off
                      Position      [500, 50]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "1"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "2"
                      Show          off
                      Position      [345, 35]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "2"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          Input
                      Name          "3"
                      Show          off
                      Position      [345, 65]
                      Direction     right
                      Flipped       off
                      Parameter {
                        Variable      "Index"
                        Value         "3"
                        Show          on
                      }
                      Parameter {
                        Variable      "Width"
                        Value         "-1"
                        Show          off
                      }
                    }
                    Component {
                      Type          LogicalOperator
                      Name          "Logical\nOperator"
                      Show          off
                      Position      [450, 50]
                      Direction     up
                      Flipped       off
                      Parameter {
                        Variable      "Operator"
                        Value         "2"
                        Show          off
                      }
                      Parameter {
                        Variable      "Inputs"
                        Value         "2"
                        Show          off
                      }
                    }
                    Component {
                      Type          LogicalOperator
                      Name          "Logical\nOperator1"
                      Show          off
                      Position      [395, 65]
                      Direction     up
                      Flipped       off
                      Parameter {
                        Variable      "Operator"
                        Value         "6"
                        Show          off
                      }
                      Parameter {
                        Variable      "Inputs"
                        Value         "2"
                        Show          off
                      }
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Logical\nOperator"
                      SrcTerminal   1
                      DstComponent  "1"
                      DstTerminal   1
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "2"
                      SrcTerminal   1
                      Points        [420, 35]
                      DstComponent  "Logical\nOperator"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "3"
                      SrcTerminal   1
                      DstComponent  "Logical\nOperator1"
                      DstTerminal   2
                    }
                    Connection {
                      Type          Signal
                      SrcComponent  "Logical\nOperator1"
                      SrcTerminal   1
                      Points        [420, 65]
                      DstComponent  "Logical\nOperator"
                      DstTerminal   3
                    }
                  }
                }
                Parameter {
                  Variable      "Configuration"
                  Value         "polarity"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "enable"
                SrcTerminal   1
                DstComponent  "s'"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "En"
                SrcTerminal   1
                DstComponent  "Enable\nPort"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "Cont\nSelector1"
                SrcTerminal   2
                DstComponent  "enable"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "s"
                SrcTerminal   1
                DstComponent  "Blanking Time"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "Blanking Time"
                SrcTerminal   1
                DstComponent  "sw"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "Seq"
                SrcTerminal   1
                Points        [170, 125; 170, 80]
                DstComponent  "sw"
                DstTerminal   3
              }
              Connection {
                Type          Signal
                SrcComponent  "sw"
                SrcTerminal   2
                DstComponent  "Cont\nSelector1"
                DstTerminal   1
              }
              Connection {
                Type          Signal
                SrcComponent  "Enable\nPort"
                SrcTerminal   1
                Points        [310, 140; 310, 80]
                DstComponent  "enable"
                DstTerminal   3
              }
            }
            Name          "Disabled"
            Schematic {
              Component {
                Type          Input
                Name          "s"
                Show          on
                Position      [35, 70]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Output
                Name          "s'"
                Show          on
                Position      [330, 70]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "-1"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "Seq"
                Show          on
                Position      [35, 120]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "3"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "En"
                Show          on
                Position      [35, 160]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "4"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
            }
          }
          Parameter {
            Variable      "Configuration"
            Value         "outmode\t\t"
            Show          off
          }
        }
        Component {
          Type          ConfigurableSubsystem
          Name          "Sequence"
          Show          on
          Position      [110, 170]
          Direction     up
          Flipped       off
          Frame         [-20, -20; 20, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Output
            Position      [24, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-20, 0]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [0, -20]
            Direction     up
          }
          TerminalNames { "1", "2", "Seq" }
          Location      [593, 739; 810, 955]
          ZoomFactor    1
          SliderPosition [0, 0]
          ShowBrowser   off
          BrowserWidth  100
          Configurations {
            Name          "Positive Sequence"
            Schematic {
              Component {
                Type          Output
                Name          "1"
                Show          off
                Position      [215, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "2"
                Show          off
                Position      [65, 80]
                Direction     left
                Flipped       on
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "Seq"
                Show          on
                Position      [145, 160]
                Direction     left
                Flipped       on
                Parameter {
                  Variable      "Index"
                  Value         "3"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "2"
                SrcTerminal   1
                DstComponent  "1"
                DstTerminal   1
              }
            }
            Name          "Negative Sequence"
            Schematic {
              Component {
                Type          Output
                Name          "1"
                Show          off
                Position      [215, 80]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "2"
                Show          off
                Position      [65, 80]
                Direction     left
                Flipped       on
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          Constant
                Name          "Constant1"
                Show          off
                Position      [100, 55]
                Direction     left
                Flipped       on
                Frame         [-10, -10; 10, 10]
                LabelPosition [0, -13]
                LabelAlign    down
                Parameter {
                  Variable      "Value"
                  Value         "1"
                  Show          off
                }
                Parameter {
                  Variable      "DataType"
                  Value         "10"
                  Show          off
                }
              }
              Component {
                Type          Sum
                Name          "Sum"
                Show          off
                Position      [135, 80]
                Direction     up
                Flipped       off
                Parameter {
                  Variable      "IconShape"
                  Value         "2"
                  Show          off
                }
                Parameter {
                  Variable      "Inputs"
                  Value         "+-|"
                  Show          off
                }
                Parameter {
                  Variable      "DataType"
                  Value         "11"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "Seq"
                Show          on
                Position      [145, 160]
                Direction     left
                Flipped       on
                Parameter {
                  Variable      "Index"
                  Value         "3"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "Constant1"
                SrcTerminal   1
                DstComponent  "Sum"
                DstTerminal   2
              }
              Connection {
                Type          Signal
                SrcComponent  "2"
                SrcTerminal   1
                DstComponent  "Sum"
                DstTerminal   3
              }
              Connection {
                Type          Signal
                SrcComponent  "Sum"
                SrcTerminal   1
                DstComponent  "1"
                DstTerminal   1
              }
            }
            Name          "Variable Sequence"
            Schematic {
              Component {
                Type          Output
                Name          "1"
                Show          off
                Position      [320, 100]
                Direction     right
                Flipped       off
                Parameter {
                  Variable      "Index"
                  Value         "1"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "2"
                Show          off
                Position      [70, 125]
                Direction     left
                Flipped       on
                Parameter {
                  Variable      "Index"
                  Value         "2"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Component {
                Type          Constant
                Name          "Constant1"
                Show          off
                Position      [70, 95]
                Direction     right
                Flipped       off
                Frame         [-10, -10; 10, 10]
                LabelPosition [0, 13]
                LabelAlign    up
                Parameter {
                  Variable      "Value"
                  Value         "1"
                  Show          off
                }
                Parameter {
                  Variable      "DataType"
                  Value         "10"
                  Show          off
                }
              }
              Component {
                Type          SignalSwitch
                Name          "Switch"
                Show          off
                Position      [215, 100]
                Direction     left
                Flipped       on
                Parameter {
                  Variable      "Criteria"
                  Value         "3"
                  Show          off
                }
                Parameter {
                  Variable      "Threshold"
                  Value         "1.5"
                  Show          off
                }
              }
              Component {
                Type          Sum
                Name          "Sum"
                Show          off
                Position      [115, 95]
                Direction     up
                Flipped       on
                Parameter {
                  Variable      "IconShape"
                  Value         "2"
                  Show          off
                }
                Parameter {
                  Variable      "Inputs"
                  Value         "-+|"
                  Show          off
                }
                Parameter {
                  Variable      "DataType"
                  Value         "11"
                  Show          off
                }
              }
              Component {
                Type          Input
                Name          "Seq"
                Show          on
                Position      [100, 175]
                Direction     left
                Flipped       on
                Parameter {
                  Variable      "Index"
                  Value         "3"
                  Show          on
                }
                Parameter {
                  Variable      "Width"
                  Value         "numel(pwm)"
                  Show          off
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "Seq"
                SrcTerminal   1
                Points        [215, 175]
                DstComponent  "Switch"
                DstTerminal   4
              }
              Connection {
                Type          Signal
                SrcComponent  "Sum"
                SrcTerminal   1
                DstComponent  "Switch"
                DstTerminal   3
              }
              Connection {
                Type          Signal
                SrcComponent  "Constant1"
                SrcTerminal   1
                DstComponent  "Sum"
                DstTerminal   3
              }
              Connection {
                Type          Signal
                SrcComponent  "2"
                SrcTerminal   1
                Points        [115, 125]
                Branch {
                  DstComponent  "Sum"
                  DstTerminal   2
                }
                Branch {
                  Points        [160, 125; 160, 105]
                  DstComponent  "Switch"
                  DstTerminal   2
                }
              }
              Connection {
                Type          Signal
                SrcComponent  "Switch"
                SrcTerminal   1
                DstComponent  "1"
                DstTerminal   1
              }
            }
          }
          Parameter {
            Variable      "Configuration"
            Value         "sequence"
            Show          off
          }
        }
        Component {
          Type          ConstantRelationalOperator
          Name          "Compare to\nConstant"
          Show          off
          Position      [165, 55]
          Direction     right
          Flipped       off
          Frame         [-20, -10; 20, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Operator"
            Value         "6"
            Show          off
          }
          Parameter {
            Variable      "Threshold"
            Value         "0"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Mux"
          SrcTerminal   1
          Points        [330, 175]
          Branch {
            DstComponent  "Cont\nSelector"
            DstTerminal   1
          }
          Branch {
            Points        [330, 215]
            DstComponent  "Cont\nSelector1"
            DstTerminal   1
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Modulator"
          SrcTerminal   3
          DstComponent  "Mux"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "Modulator"
          SrcTerminal   4
          DstComponent  "Mux"
          DstTerminal   4
        }
        Connection {
          Type          Signal
          SrcComponent  "Modulator"
          SrcTerminal   5
          DstComponent  "Mux"
          DstTerminal   5
        }
        Connection {
          Type          Signal
          SrcComponent  "Cont\nSelector"
          SrcTerminal   2
          DstComponent  "Pulse Divider1"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Pulse Divider1"
          SrcTerminal   2
          DstComponent  "Task"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Cont\nSelector1"
          SrcTerminal   2
          DstComponent  "Pulse Divider"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Pulse Divider"
          SrcTerminal   2
          DstComponent  "ADC"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "en"
          SrcTerminal   1
          Points        [325, 15]
          DstComponent  "Output Mode"
          DstTerminal   4
        }
        Connection {
          Type          Signal
          SrcComponent  "Sequence"
          SrcTerminal   1
          DstComponent  "Modulator"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Modulator"
          SrcTerminal   2
          Points        [240, 160; 240, 70]
          DstComponent  "Output Mode"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Output Mode"
          SrcTerminal   2
          DstComponent  "1"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "In1"
          SrcTerminal   1
          DstComponent  "Sequence"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Compare to\nConstant"
          SrcTerminal   2
          Points        [210, 55]
          Branch {
            DstComponent  "Output Mode"
            DstTerminal   3
          }
          Branch {
            Points        [210, 105; 110, 105]
            DstComponent  "Sequence"
            DstTerminal   3
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "seq"
          SrcTerminal   1
          DstComponent  "Compare to\nConstant"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "PWM (Variable)"
      Show          on
      Position      [50, 610]
      Direction     up
      Flipped       off
      Frame         [-35, -25; 35, 25]
      LabelPosition [0, 28]
      LabelAlign    up
      TargetPortIndices "5"
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C2000\""
", \"epwm_var\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      NonDftCodeFcn "local block = Target.Coder.GetTargetBlock(Block.UserData."
"bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()"
      MaskType      "PWM (Variable)"
      MaskDescription "Generate a complementary PWM signal pair with a variabl"
"e phase shift and synchronization options.\n"
"\n"
"The carrier starts at 0 and varies between 0 and 1. The PWM output is active "
"when the input is greater than the carrier."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/pwm_var_c2000.html"
      MaskDisplay   "Icon:text('PWM')\n"
"\n"
"local function drawTrigger(x,y)\n"
"\tIcon:color(125, 0, 8)\n"
"\tIcon:line({x-3.5,x+3.5},{y+2.5, y+2.5})\n"
"\tIcon:line({x, x},{y+2.5, y-2.5})\n"
"\tIcon:line({x-2.5, x-2.5},{y+2.5, y-2.5})\n"
"\tIcon:line({x+2.5, x+2.5},{y+2.5, y-2.5})\n"
"\tIcon:circle(x, y-2.5,0.5)\n"
"\tIcon:circle(x-2.5, y-2.5,0.5)\n"
"\tIcon:circle(x+2.5, y-2.5,0.5)\n"
"end\n"
"\n"
"\n"
"if Dialog:get('sync_src')>='2' then\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  if direction == 0.0 then\n"
"    if flipped then\n"
"\t   drawTrigger(-18, 0)\n"
"\t   drawTrigger(0, 30)\n"
"    else\n"
"\t   drawTrigger(18, 0)\n"
"\t   drawTrigger(0, 30)\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    if flipped then\n"
"\t   drawTrigger(0, -18)\n"
"\t   drawTrigger(-30, 0)\n"
"    else\n"
"\t   drawTrigger(0, 18)\n"
"\t   drawTrigger(-30, 0)\n"
"    end  \n"
"  end\n"
"  if direction == 0.5 then\n"
"    if flipped then\n"
"\t   drawTrigger(18, 0)\n"
"\t   drawTrigger(0, -30)\n"
"    else\n"
"\t   drawTrigger(-18, 0)\n"
"\t   drawTrigger(0, -30)\n"
"    end \n"
"  end\n"
"  if direction == 0.75 then\n"
"    if flipped then\n"
"\t   drawTrigger(0, 18) \n"
"\t   drawTrigger(30, 0)\n"
"    else\n"
"\t   drawTrigger(0, -18)\n"
"\t   drawTrigger(30, 0)\n"
"    end \n"
"  end \n"
"end\n"
"\n"
"if Dialog:get('SyncOut')>='2' then\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  if direction == 0.0 then\n"
"    if flipped then\n"
"\t   drawTrigger(0, 30)\n"
"    else\n"
"\t   drawTrigger(0, 30)\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    if flipped then\n"
"\t   drawTrigger(-30, 0)\n"
"    else\n"
"      drawTrigger(-30, 0)\n"
"    end  \n"
"  end\n"
"  if direction == 0.5 then\n"
"    if flipped then\n"
"      drawTrigger(0, -30)\n"
"    else\n"
"\t   drawTrigger(0, -30)\n"
"    end \n"
"  end\n"
"  if direction == 0.75 then\n"
"    if flipped then \n"
"\t   drawTrigger(30, 0)\n"
"    else\n"
"\t   drawTrigger(30, 0)\n"
"    end \n"
"  end \n"
"end\n"
"\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      MaskInit      "% experimental settings\n"
"% OverrideSyncoSelVal = 1\n"
"\n"
"sys_clk = 1/100e6;\n"
"prd = round(1/ (fc * sys_clk));\n"
"limit_delta = 1;\n"
"offset = 0;\n"
"gain_offline = 1/type/limit_delta;\n"
"num_channel = num_pwm;\n"
"num_channel_1 = num_channel-1;\n"
"\n"
"if num_pwm~=1 && num_pwm~=2 && num_pwm~=3,\n"
"   error('\"Number of synchronized PWMs\" must be an integer value of 1, 2, o"
"r 3.')\n"
"end\n"
"\n"
"if numel(pwm_1) ~= 1, \n"
"  error('\"Group of 1 PWM Generator\" must be scalar.');\n"
"end\n"
"if numel(pwm_2) ~= 1,\n"
"  error('\"Group of 2 PWM Generator(s)\" must be scalar.');\n"
"end\n"
"if numel(pwm_3) ~= 1,\n"
"  error('\"Group of 3 PWM Generator(s)\" must be scalar.');\n"
"end\n"
"\n"
"\n"
"if numel(fc) ~= 1,\n"
"  error('\"Carrier frequency\" must be scalar.');\n"
"end\n"
"\n"
"if any(fc <= 0)\n"
"\terror('\"Carrier frequency [Hz]\" must be greater than 0.')\n"
"end\n"
"\n"
"if any(fc > 25e6)\n"
"\terror('\"Carrier frequency [Hz]\" greater than 25 MHz exceeds toggling freq"
"uency of GPIO pins, please reduce the carrier frequency.')\n"
"end\n"
"\n"
"if any(fc < 0.01)\n"
"   plecs('warning', '\"Carrier frequency [Hz]\" lower than 0.01 Hz, please us"
"e \"Digital Out\" to generate low frequency PWM.')\n"
"end\n"
"\n"
"if numel(fc_tol) ~= 1,\n"
"  error('\"Frequency tolerance\" must be scalar.');\n"
"end\n"
"\n"
"if numel(delay) ~= 1,\n"
"  error('\"Blanking time\" must be scalar.');\n"
"end\n"
"\n"
"if any(delay < 0)\n"
"\terror('\"Blanking time [s]\" must be greater than zero seconds.')\n"
"end\n"
"\n"
"if any(delay >= (1/fc/2))\n"
"\terror(['\"Blanking time [s]\" should not be larger than half the carrier pe"
"riod ' num2str(1/fc/2) 's.'])\n"
"end\n"
"\n"
"if numel(type) ~= 1,\n"
"  error('\"Carrier type\" must be scalar.');\n"
"end\n"
"\n"
"if numel(polarity) ~= 1,\n"
"  error('\"Polarity\" must be scalar.');\n"
"end\n"
"\n"
"if numel(sync_src) ~= 1,\n"
"  error('\"Synchronization impulse from\" must be scalar.');\n"
"end\n"
"\n"
"if (sync_src==3) && (numel(sync_gpio) ~= 1 || ~isvector(sync_gpio) ...\n"
"   || any(floor(sync_gpio) ~= sync_gpio) || any(sync_gpio < 0)),\n"
"   error('\"External GPIO\" must be a scalar positive integer.');\n"
"end\n"
"\n"
"if numel(socsel) ~= 1,\n"
"  error('\"ADC trigger\" must be scalar.');\n"
"end\n"
"\n"
"if numel(intsel) ~= 1,\n"
"  error('\"Task trigger\" must be scalar.');\n"
"end\n"
"\n"
"if numel(tz1mode) ~= 1 || numel(tz2mode) ~= 1 || numel(tz3mode) ~= 1 ,\n"
"  error('\"TZ mode\" must be scalar.');\n"
"end\n"
"\n"
"if ~isnan(socsel_prd) && ((floor(socsel_prd) ~= socsel_prd) || (socsel_prd < "
"1))\n"
"  error('\"ADC trigger divider\" must be an integer and greater than zero.');"
"\n"
"end\n"
"\n"
"if ~isnan(intsel_prd) && ((floor(intsel_prd) ~= intsel_prd) || (intsel_prd < "
"1))\n"
"  error('\"Task trigger divider\" must be an integer and greater than zero.')"
";\n"
"end\n"
"\n"
"\n"
      MaskDialogCallback "Block:showTerminal('Task', Dialog:get('intsel')~='1'"
")\n"
"Block:showTerminal('ADC', Dialog:get('socsel')~='1')\n"
"Dialog:set('socsel_prd', 'Visible', Dialog:get('socsel')~='1')\n"
"Dialog:set('intsel_prd', 'Visible', Dialog:get('intsel')~='1')\n"
"if Dialog:get('sync_src')=='2' then\n"
"\tBlock:showTerminal('synci', true)\n"
"else\n"
"\tBlock:showTerminal('synci', false)\n"
"end\n"
"if Dialog:get('SyncOut')=='2' then\n"
"\tBlock:showTerminal('synco', true)\n"
"else\n"
"\tBlock:showTerminal('synco', false)\n"
"end\n"
"\n"
"Dialog:set('pwm_1', 'Visible', Dialog:get('num_pwm')=='1')\n"
"Dialog:set('pwm_2', 'Visible', Dialog:get('num_pwm')=='2')\n"
"Dialog:set('pwm_3', 'Visible', Dialog:get('num_pwm')=='3')\n"
"\n"
"for i=1,3 do\n"
"  -- self destruct deprecated parameters\n"
"  Dialog:set('tz%imode' % {i}, 'Visible', Dialog:get('tz%imode' % {i})~='1') "
" \n"
"end\n"
"\n"
"if Dialog:get('fvar')=='2' then\n"
"\tBlock:showTerminal('f\\'', true)\n"
"else\n"
"\tBlock:showTerminal('f\\'', false)\n"
"end\n"
      Parameter {
        Variable      "num_pwm"
        Prompt        "Number of synchronized PWMs"
        Type          FixedText
        PossibleValues {"1", "2", "3"}
        Value         "3"
        Show          off
        Tunable       off
        TabName       "Main"
      }
      Parameter {
        Variable      "pwm_3"
        Prompt        "Group of 3 PWM generator(s) "
        Type          FixedText
        PossibleValues {"1,2,3", "4,5,6", "7,8,9", "10,11,12"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Main"
      }
      Parameter {
        Variable      "pwm_2"
        Prompt        "Group of 2 PWM generator(s)"
        Type          FixedText
        PossibleValues {"1,2", "4,5", "7,8", "10,11"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Main"
      }
      Parameter {
        Variable      "pwm_1"
        Prompt        "Group of 1 PWM generator"
        Type          FixedText
        PossibleValues {"1", "4", "7", "10"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Main"
      }
      Parameter {
        Variable      "type"
        Prompt        "Carrier type"
        Type          FixedText
        PossibleValues {"Sawtooth", "Symmetrical"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       "Main"
      }
      Parameter {
        Variable      "fc"
        Prompt        "Carrier frequency [Hz]"
        Type          FreeText
        Value         "10e3"
        Show          off
        Tunable       off
        TabName       "Main"
      }
      Parameter {
        Variable      "fc_tol"
        Prompt        "Frequency tolerance"
        Type          FixedText
        PossibleValues {"Enforce exact value", "Round to closest achievable va"
"lue"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Main"
      }
      Parameter {
        Variable      "delay"
        Prompt        "Blanking time [s]"
        Type          FreeText
        Value         "0.1e-6"
        Show          off
        Tunable       off
        TabName       "Main"
      }
      Parameter {
        Variable      "polarity"
        Prompt        "Polarity"
        Type          FixedText
        PossibleValues {"Active state is logic '1'", "Active state is logic '0"
"'"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Main"
      }
      Parameter {
        Variable      "fvar"
        Prompt        "Frequency variation"
        Type          FixedText
        PossibleValues {"Disabled", "Enabled"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Main"
      }
      Parameter {
        Variable      "sync_src"
        Prompt        "Synchronization impulse from"
        Type          FixedText
        PossibleValues {"Self", "External"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Sync"
      }
      Parameter {
        Variable      "SyncOut"
        Prompt        "Synchronization output"
        Type          FixedText
        PossibleValues {"Disabled", "Enabled"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       "Sync"
      }
      Parameter {
        Variable      "socsel"
        Prompt        "ADC trigger"
        Type          FixedText
        PossibleValues {"Disabled", "Underflow", "Overflow", "Underflow and Ov"
"erflow"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "socsel_prd"
        Prompt        "ADC trigger divider"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "intsel"
        Prompt        "Task trigger"
        Type          FixedText
        PossibleValues {"Disabled", "Underflow", "Overflow", "Underflow and Ov"
"erflow"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "intsel_prd"
        Prompt        "Task trigger divider"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "tz1mode"
        Prompt        "Reaction to TZ1"
        Type          FixedText
        PossibleValues {"Configured by Powerstage Protection block", "Cycle-by"
"-cycle", "Disable powerstage (one-shot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Deprecated"
      }
      Parameter {
        Variable      "tz2mode"
        Prompt        "Reaction to TZ2"
        Type          FixedText
        PossibleValues {"Configured by Powerstage Protection block", "Cycle-by"
"-cycle", "Disable powerstage (one-shot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Deprecated"
      }
      Parameter {
        Variable      "tz3mode"
        Prompt        "Reaction to TZ3"
        Type          FixedText
        PossibleValues {"Configured by Powerstage Protection block", "Cycle-by"
"-cycle", "Disable powerstage (one-shot)"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Deprecated"
      }
      Terminal {
        Type          Input
        Position      [-35, -10]
        Direction     left
      }
      Terminal {
        Type          EventOutput
        Position      [39, 15]
        Direction     right
      }
      Terminal {
        Type          EventOutput
        Position      [39, -15]
        Direction     right
      }
      Terminal {
        Type          Input
        Position      [-35, 10]
        Direction     left
      }
      Terminal {
        Type          EventOutput
        Position      [39, 0]
        Direction     right
      }
      Terminal {
        Type          EventInput
        Position      [0, -25]
        Direction     up
      }
      Terminal {
        Type          Input
        Position      [-35, 0]
        Direction     left
      }
      Schematic {
        Location      [306, 73; 876, 308]
        ZoomFactor    1.00225
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetOutput
          Name          "1"
          Show          on
          Position      [445, 70]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "2*num_pwm"
            Show          off
          }
        }
        Component {
          Type          Input
          Name          "m"
          Show          on
          Position      [60, 40]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "InitialOutput"
            Value         "[]"
            Show          off
          }
          Parameter {
            Variable      "HasDirectFeedthrough"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "num_pwm"
            Show          off
          }
        }
        Component {
          Type          EventOutput
          Name          "Task"
          Show          on
          Position      [445, 95]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
        }
        Component {
          Type          EventOutput
          Name          "ADC"
          Show          on
          Position      [445, 125]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "3"
            Show          on
          }
        }
        Component {
          Type          Input
          Name          "ph'"
          Show          on
          Position      [60, 120]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "4"
            Show          on
          }
          Parameter {
            Variable      "InitialOutput"
            Value         "[]"
            Show          off
          }
          Parameter {
            Variable      "HasDirectFeedthrough"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "num_pwm"
            Show          off
          }
        }
        Component {
          Type          EventOutput
          Name          "synco"
          Show          off
          Position      [445, 155]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "5"
            Show          on
          }
        }
        Component {
          Type          EventInput
          Name          "synci"
          Show          off
          Position      [60, 160]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "6"
            Show          on
          }
        }
        Component {
          Type          LogicalOperator
          Name          "Logical\nOperator"
          Show          off
          Position      [220, 125]
          Direction     up
          Flipped       off
          Parameter {
            Variable      "Operator"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Inputs"
            Value         "2"
            Show          off
          }
        }
        Component {
          Type          SignalSelector
          Name          "Cont\nSelector"
          Show          off
          Position      [320, 95]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "InputWidth"
            Value         "4"
            Show          off
          }
          Parameter {
            Variable      "OutputIndices"
            Value         "[intsel]"
            Show          off
          }
        }
        Component {
          Type          SignalMux
          Name          "Mux"
          Show          off
          Position      [270, 95]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "4"
            Show          off
          }
        }
        Component {
          Type          SignalSelector
          Name          "Cont\nSelector1"
          Show          off
          Position      [320, 125]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "InputWidth"
            Value         "4"
            Show          off
          }
          Parameter {
            Variable      "OutputIndices"
            Value         "[socsel]"
            Show          off
          }
        }
        Component {
          Type          Subsystem
          Name          "synco\nselect"
          Show          on
          Position      [220, 155]
          Direction     up
          Flipped       off
          Frame         [-15, -15; 15, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-15, -5]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [19, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-15, 5]
            Direction     left
          }
          Schematic {
            Location      [415, 55; 672, 241]
            ZoomFactor    1
            SliderPosition [0, 79]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "self"
              Show          on
              Position      [60, 55]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "o"
              Show          on
              Position      [180, 60]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "other"
              Show          on
              Position      [60, 95]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          SignalSwitch
              Name          "Switch"
              Show          off
              Position      [130, 60]
              Direction     left
              Flipped       on
              Parameter {
                Variable      "Criteria"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Threshold"
                Value         "0"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant"
              Show          off
              Position      [110, 95]
              Direction     right
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "sync_src-2"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant"
              SrcTerminal   1
              Points        [130, 95]
              DstComponent  "Switch"
              DstTerminal   4
            }
            Connection {
              Type          Signal
              SrcComponent  "Switch"
              SrcTerminal   1
              DstComponent  "o"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "other"
              SrcTerminal   1
              Points        [90, 95; 90, 65]
              DstComponent  "Switch"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "self"
              SrcTerminal   1
              DstComponent  "Switch"
              DstTerminal   3
            }
          }
        }
        Component {
          Type          Input
          Name          "f'"
          Show          on
          Position      [60, 80]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "7"
            Show          on
          }
          Parameter {
            Variable      "InitialOutput"
            Value         "[]"
            Show          off
          }
          Parameter {
            Variable      "HasDirectFeedthrough"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          Subsystem
          Name          "Pulse Divider1"
          Show          off
          Position      [385, 95]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          MaskInit      "if isnan(N) || N < 2\n"
"\timp = 1;\n"
"else\n"
"\timp = 2;\n"
"end"
          Parameter {
            Variable      "N"
            Prompt        "Period"
            Type          FreeText
            Value         "intsel_prd"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
          }
          Schematic {
            Location      [415, 55; 1080, 354]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [65, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out1"
              Show          off
              Position      [220, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Implementation"
              Show          on
              Position      [145, 80]
              Direction     up
              Flipped       off
              Frame         [-25, -15; 25, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-25, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [29, 0]
                Direction     right
              }
              TerminalNames { "In1", "Out1" }
              Location      [1726, 819; 2167, 1017]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "No Divider"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [120, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [195, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                }
                Name          "Divider"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [145, 35]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [255, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Subsystem
                    Name          "Triggered\nSubsystem"
                    Show          off
                    Position      [195, 75]
                    Direction     up
                    Flipped       off
                    Frame         [-25, -15; 25, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    TreatAsAtomicUnit on
                    SampleTime    "-1"
                    CodeGenDiscretizationMethod "2"
                    CodeGenTarget "Generic"
                    MaskDisplayLang "2"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Output
                      Position      [29, 0]
                      Direction     right
                      Index         "1"
                    }
                    Terminal {
                      Type          Input
                      Position      [0, -15]
                      Direction     up
                      Index         "1"
                    }
                    Schematic {
                      Location      [2032, 1123; 2519, 1321]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [335, 80]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "InitialOutput"
                          Value         "[]"
                          Show          off
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Trigger
                        Name          "Trigger"
                        Show          on
                        Position      [140, 20]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                        Parameter {
                          Variable      "TriggerType"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "ShowOutput"
                          Value         "1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Offset
                        Name          "Offset"
                        Show          off
                        Position      [140, 80]
                        Direction     right
                        Flipped       off
                        Frame         [-20, -10; 20, 10]
                        LabelPosition [0, 13]
                        LabelAlign    up
                        Parameter {
                          Variable      "Offset"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "DataType"
                          Value         "11"
                          Show          off
                        }
                      }
                      Component {
                        Type          SignalSwitch
                        Name          "Switch"
                        Show          on
                        Position      [195, 130]
                        Direction     right
                        Flipped       on
                        Parameter {
                          Variable      "Criteria"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "Threshold"
                          Value         "N"
                          Show          on
                        }
                      }
                      Component {
                        Type          ConstantRelationalOperator
                        Name          "Compare to\nConstant"
                        Show          off
                        Position      [275, 80]
                        Direction     right
                        Flipped       off
                        Frame         [-20, -10; 20, 10]
                        LabelPosition [0, 13]
                        LabelAlign    up
                        Parameter {
                          Variable      "Operator"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "Threshold"
                          Value         "N"
                          Show          off
                        }
                      }
                      Component {
                        Type          Memory
                        Name          "Memory"
                        Show          off
                        Position      [140, 130]
                        Direction     right
                        Flipped       on
                        Parameter {
                          Variable      "X0"
                          Value         "0"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Offset"
                        SrcTerminal   2
                        Points        [195, 80]
                        Branch {
                          Points        [230, 80]
                          Branch {
                            DstComponent  "Compare to\nConstant"
                            DstTerminal   1
                          }
                          Branch {
                            Points        [230, 135]
                            DstComponent  "Switch"
                            DstTerminal   3
                          }
                        }
                        Branch {
                          DstComponent  "Switch"
                          DstTerminal   4
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Compare to\nConstant"
                        SrcTerminal   2
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Switch"
                        SrcTerminal   1
                        DstComponent  "Memory"
                        DstTerminal   1
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Memory"
                        SrcTerminal   2
                        Points        [95, 130; 95, 80]
                        DstComponent  "Offset"
                        DstTerminal   1
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    Points        [195, 35]
                    DstComponent  "Triggered\nSubsystem"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Triggered\nSubsystem"
                    SrcTerminal   1
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "imp"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In1"
              SrcTerminal   1
              DstComponent  "Implementation"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Implementation"
              SrcTerminal   2
              DstComponent  "Out1"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          Subsystem
          Name          "Pulse Divider"
          Show          on
          Position      [385, 125]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          MaskInit      "if isnan(N) || N < 2\n"
"\timp = 1;\n"
"else\n"
"\timp = 2;\n"
"end"
          Parameter {
            Variable      "N"
            Prompt        "Period"
            Type          FreeText
            Value         "socsel_prd"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
          }
          Schematic {
            Location      [415, 55; 1080, 354]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [65, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out1"
              Show          off
              Position      [220, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Implementation"
              Show          on
              Position      [145, 80]
              Direction     up
              Flipped       off
              Frame         [-25, -15; 25, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-25, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [29, 0]
                Direction     right
              }
              TerminalNames { "In1", "Out1" }
              Location      [2017, 828; 2458, 1026]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "No Divider"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [120, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [195, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                }
                Name          "Divider"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [145, 35]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [255, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Subsystem
                    Name          "Triggered\nSubsystem"
                    Show          off
                    Position      [195, 75]
                    Direction     up
                    Flipped       off
                    Frame         [-25, -15; 25, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    TreatAsAtomicUnit on
                    SampleTime    "-1"
                    CodeGenDiscretizationMethod "2"
                    CodeGenTarget "Generic"
                    MaskDisplayLang "2"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Output
                      Position      [29, 0]
                      Direction     right
                      Index         "1"
                    }
                    Terminal {
                      Type          Input
                      Position      [0, -15]
                      Direction     up
                      Index         "1"
                    }
                    Schematic {
                      Location      [2032, 1123; 2519, 1321]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [335, 80]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "InitialOutput"
                          Value         "[]"
                          Show          off
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Trigger
                        Name          "Trigger"
                        Show          on
                        Position      [140, 20]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                        Parameter {
                          Variable      "TriggerType"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "ShowOutput"
                          Value         "1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Offset
                        Name          "Offset"
                        Show          off
                        Position      [140, 80]
                        Direction     right
                        Flipped       off
                        Frame         [-20, -10; 20, 10]
                        LabelPosition [0, 13]
                        LabelAlign    up
                        Parameter {
                          Variable      "Offset"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "DataType"
                          Value         "11"
                          Show          off
                        }
                      }
                      Component {
                        Type          SignalSwitch
                        Name          "Switch"
                        Show          on
                        Position      [195, 130]
                        Direction     right
                        Flipped       on
                        Parameter {
                          Variable      "Criteria"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "Threshold"
                          Value         "N"
                          Show          on
                        }
                      }
                      Component {
                        Type          ConstantRelationalOperator
                        Name          "Compare to\nConstant"
                        Show          off
                        Position      [275, 80]
                        Direction     right
                        Flipped       off
                        Frame         [-20, -10; 20, 10]
                        LabelPosition [0, 13]
                        LabelAlign    up
                        Parameter {
                          Variable      "Operator"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "Threshold"
                          Value         "N"
                          Show          off
                        }
                      }
                      Component {
                        Type          Memory
                        Name          "Memory"
                        Show          off
                        Position      [140, 130]
                        Direction     right
                        Flipped       on
                        Parameter {
                          Variable      "X0"
                          Value         "0"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Offset"
                        SrcTerminal   2
                        Points        [195, 80]
                        Branch {
                          Points        [230, 80]
                          Branch {
                            DstComponent  "Compare to\nConstant"
                            DstTerminal   1
                          }
                          Branch {
                            Points        [230, 135]
                            DstComponent  "Switch"
                            DstTerminal   3
                          }
                        }
                        Branch {
                          DstComponent  "Switch"
                          DstTerminal   4
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Compare to\nConstant"
                        SrcTerminal   2
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Switch"
                        SrcTerminal   1
                        DstComponent  "Memory"
                        DstTerminal   1
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Memory"
                        SrcTerminal   2
                        Points        [95, 130; 95, 80]
                        DstComponent  "Offset"
                        DstTerminal   1
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    Points        [195, 35]
                    DstComponent  "Triggered\nSubsystem"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Triggered\nSubsystem"
                    SrcTerminal   1
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "imp"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In1"
              SrcTerminal   1
              DstComponent  "Implementation"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Implementation"
              SrcTerminal   2
              DstComponent  "Out1"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          Subsystem
          Name          "PWM"
          Show          on
          Position      [150, 85]
          Direction     up
          Flipped       off
          Frame         [-20, -25; 20, 25]
          LabelPosition [0, 28]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Output
            Position      [24, -15]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-20, 5]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, -5]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, -15]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, 15]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [24, -5]
            Direction     right
          }
          Terminal {
            Type          Output
            Position      [24, 5]
            Direction     right
          }
          Schematic {
            Location      [290, 209; 1037, 590]
            ZoomFactor    0.995515
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Product
              Name          "Divide"
              Show          off
              Position      [185, 155]
              Direction     up
              Flipped       on
              Parameter {
                Variable      "IconShape"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "*/"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "11"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant3"
              Show          off
              Position      [130, 190]
              Direction     right
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "prd"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
            }
            Component {
              Type          Product
              Name          "Product2"
              Show          off
              Position      [245, 115]
              Direction     up
              Flipped       on
              Parameter {
                Variable      "IconShape"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "11"
                Show          off
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Configurable\nSubsystem"
              Show          off
              Position      [300, 115]
              Direction     up
              Flipped       on
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, -13]
              LabelAlign    down
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-20, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [24, 0]
                Direction     right
              }
              Terminal {
                Type          Input
                Position      [0, -10]
                Direction     up
              }
              TerminalNames { "mi", "mo", "sync1" }
              Location      [787, 674; 1192, 910]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "Edge triggered"
                Schematic {
                  Component {
                    Type          Input
                    Name          "mi"
                    Show          on
                    Position      [60, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "mo"
                    Show          on
                    Position      [240, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "sync1"
                    Show          off
                    Position      [60, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          CScript
                    Name          "Vectroised\nTrigger"
                    Show          on
                    Position      [165, 75]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "DialogGeometry"
                      Value         "[707 618 588 359]"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumInputs"
                      Value         "num_channel*2"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumOutputs"
                      Value         "num_channel"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumContStates"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumDiscStates"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumZCSignals"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "DirectFeedthrough"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Ts"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "Parameters"
                      Value         "num_channel"
                      Show          off
                    }
                    Parameter {
                      Variable      "LangStandard"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "GnuExtensions"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "RuntimeCheck"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Declarations"
                      Value         "#include <stdlib.h>\n"
"#include <math.h>\n"
"#include <string.h>\n"
"#include <limits.h>\n"
"#include <float.h>\n"
"\n"
"static int num_channel;\n"
"static int* sync_pre;"
                      Show          off
                    }
                    Parameter {
                      Variable      "StartFcn"
                      Value         "num_channel = ParamRealData(0,0);\n"
"sync_pre = (int*) malloc(num_channel*sizeof(int));"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputFcn"
                      Value         "if(IsMajorStep)\n"
"{\n"
"\tfor(int id = 0; id < num_channel; id++)\n"
"\t{\n"
"\t\tif(Input(id) == 1 && sync_pre[id] == 0)\n"
"\t\t{\n"
"\t\t\tOutput(id) = Input(num_channel+id);\n"
"\t\t}\n"
"\t\tsync_pre[id] = Input(id);\n"
"\t}\n"
"}"
                      Show          off
                    }
                    Parameter {
                      Variable      "UpdateFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "DerivativeFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "TerminateFcn"
                      Value         "free(sync_pre);"
                      Show          off
                    }
                    Parameter {
                      Variable      "StoreCustomStateFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "RestoreCustomStateFcn"
                      Value         ""
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalMux
                    Name          "Mux"
                    Show          off
                    Position      [110, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Width"
                      Value         "[num_channel num_channel]"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "mi"
                    SrcTerminal   1
                    DstComponent  "Mux"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Mux"
                    SrcTerminal   1
                    DstComponent  "Vectroised\nTrigger"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Vectroised\nTrigger"
                    SrcTerminal   2
                    DstComponent  "mo"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "sync1"
                    SrcTerminal   1
                    Points        [90, 40; 90, 70]
                    DstComponent  "Mux"
                    DstTerminal   2
                  }
                }
                Name          "Natural"
                Schematic {
                  Component {
                    Type          Input
                    Name          "mi"
                    Show          on
                    Position      [60, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "mo"
                    Show          on
                    Position      [240, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "sync1"
                    Show          off
                    Position      [60, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "mi"
                    SrcTerminal   1
                    DstComponent  "mo"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "1"
                Show          off
              }
            }
            Component {
              Type          ConstantRelationalOperator
              Name          "Compare to\nConstant"
              Show          off
              Position      [150, 235]
              Direction     right
              Flipped       off
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Operator"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Threshold"
                Value         "0"
                Show          off
              }
            }
            Component {
              Type          Sum
              Name          "Sum1"
              Show          off
              Position      [185, 210]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "IconShape"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "|++"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "11"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "s"
              Show          on
              Position      [645, 205]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "ph'"
              Show          on
              Position      [40, 210]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "fc'"
              Show          on
              Position      [40, 150]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "m"
              Show          on
              Position      [40, 110]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "4"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Comparator
              Name          "Comparator"
              Show          off
              Position      [360, 205]
              Direction     right
              Flipped       off
            }
            Component {
              Type          Output
              Name          "z"
              Show          on
              Position      [645, 250]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "6"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "p"
              Show          on
              Position      [645, 290]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "7"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Sum
              Name          "Sum"
              Show          off
              Position      [150, 110]
              Direction     up
              Flipped       on
              Parameter {
                Variable      "IconShape"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "|++"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "11"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant"
              Show          off
              Position      [130, 80]
              Direction     left
              Flipped       on
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, -13]
              LabelAlign    down
              Parameter {
                Variable      "Value"
                Value         "offset"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
            }
            Component {
              Type          Gain
              Name          "Gain1"
              Show          off
              Position      [195, 110]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "K"
                Value         "gain_offline"
                Show          off
              }
              Parameter {
                Variable      "Multiplication"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "11"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "sync_i"
              Show          on
              Position      [40, 280]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "5"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Subsystem
              Name          "init"
              Show          on
              Position      [100, 150]
              Direction     up
              Flipped       off
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 0]
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Output
                Position      [24, 0]
                Direction     right
              }
              Terminal {
                Type          Input
                Position      [-20, 0]
                Direction     left
              }
              Schematic {
                Location      [1092, 117; 1495, 305]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Component {
                  Type          Output
                  Name          "o"
                  Show          on
                  Position      [225, 75]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "1"
                    Show          on
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                }
                Component {
                  Type          Input
                  Name          "i"
                  Show          on
                  Position      [60, 80]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "2"
                    Show          on
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                }
                Component {
                  Type          CScript
                  Name          "C-Script"
                  Show          on
                  Position      [130, 80]
                  Direction     up
                  Flipped       off
                  Parameter {
                    Variable      "DialogGeometry"
                    Value         "[1274 393 576 370]"
                    Show          off
                  }
                  Parameter {
                    Variable      "NumInputs"
                    Value         "1"
                    Show          off
                  }
                  Parameter {
                    Variable      "NumOutputs"
                    Value         "2"
                    Show          off
                  }
                  Parameter {
                    Variable      "NumContStates"
                    Value         "0"
                    Show          off
                  }
                  Parameter {
                    Variable      "NumDiscStates"
                    Value         "0"
                    Show          off
                  }
                  Parameter {
                    Variable      "NumZCSignals"
                    Value         "0"
                    Show          off
                  }
                  Parameter {
                    Variable      "DirectFeedthrough"
                    Value         "1"
                    Show          off
                  }
                  Parameter {
                    Variable      "Ts"
                    Value         "0"
                    Show          off
                  }
                  Parameter {
                    Variable      "Parameters"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "LangStandard"
                    Value         "2"
                    Show          off
                  }
                  Parameter {
                    Variable      "GnuExtensions"
                    Value         "1"
                    Show          off
                  }
                  Parameter {
                    Variable      "RuntimeCheck"
                    Value         "2"
                    Show          off
                  }
                  Parameter {
                    Variable      "Declarations"
                    Value         "static int nonzero_received;"
                    Show          off
                  }
                  Parameter {
                    Variable      "StartFcn"
                    Value         "nonzero_received = 0;"
                    Show          off
                  }
                  Parameter {
                    Variable      "OutputFcn"
                    Value         "if(IsMajorStep)\n"
"{\n"
"\tif(Input(0)!=0. && nonzero_received==0)\n"
"\t{\n"
"\t\tnonzero_received = 1;\n"
"\t}\n"
"\tif(Input(0)==0. && nonzero_received==1)\n"
"\t{\n"
"\t\tOutput(1) = 1; //Error \n"
"\t}\n"
"}\n"
"if(nonzero_received)\n"
"{\n"
"\tOutput(0) = Input(0);\n"
"}\n"
"else\n"
"{\n"
"\tOutput(0) = 1.;\n"
"}"
                    Show          off
                  }
                  Parameter {
                    Variable      "UpdateFcn"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "DerivativeFcn"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "TerminateFcn"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "StoreCustomStateFcn"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "RestoreCustomStateFcn"
                    Value         ""
                    Show          off
                  }
                }
                Component {
                  Type          Reference
                  SrcComponent  "Components/Assertions/Assert Upper Limit"
                  Name          "Assert Upper Limit"
                  Show          off
                  Position      [225, 120]
                  Direction     up
                  Flipped       off
                  Frame         [-15, -15; 15, 15]
                  LabelPosition [0, 18]
                  LabelAlign    up
                  Parameter {
                    Variable      "upper_limit"
                    Value         "0"
                    Show          off
                  }
                  Parameter {
                    Variable      "include_limit"
                    Value         "1"
                    Show          off
                  }
                  Parameter {
                    Variable      "action"
                    Value         "2"
                    Show          off
                  }
                  Parameter {
                    Variable      "message"
                    Value         "Signal exceeds upper limit."
                    Show          off
                    Evaluate      off
                  }
                  Terminal {
                    Type          Input
                    Position      [-15, 0]
                    Direction     left
                  }
                }
                Component {
                  Type          SignalDemux
                  Name          "Demux"
                  Show          off
                  Position      [185, 80]
                  Direction     right
                  Flipped       on
                  Parameter {
                    Variable      "Width"
                    Value         "2"
                    Show          off
                  }
                }
                Connection {
                  Type          Signal
                  SrcComponent  "i"
                  SrcTerminal   1
                  DstComponent  "C-Script"
                  DstTerminal   1
                }
                Connection {
                  Type          Signal
                  SrcComponent  "C-Script"
                  SrcTerminal   2
                  DstComponent  "Demux"
                  DstTerminal   1
                }
                Connection {
                  Type          Signal
                  SrcComponent  "Demux"
                  SrcTerminal   2
                  DstComponent  "o"
                  DstTerminal   1
                }
                Connection {
                  Type          Signal
                  SrcComponent  "Demux"
                  SrcTerminal   3
                  Points        [195, 85]
                  DstComponent  "Assert Upper Limit"
                  DstTerminal   1
                }
              }
            }
            Component {
              Type          Subsystem
              Name          "synco\nselect"
              Show          on
              Position      [220, 210]
              Direction     up
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-10, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [14, 0]
                Direction     right
              }
              Schematic {
                Location      [0, 1046; 283, 1214]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Component {
                  Type          Input
                  Name          "i"
                  Show          on
                  Position      [60, 80]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "1"
                    Show          on
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                }
                Component {
                  Type          Output
                  Name          "o"
                  Show          on
                  Position      [180, 80]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "2"
                    Show          on
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                }
                Component {
                  Type          CScript
                  Name          "C-Script"
                  Show          on
                  Position      [120, 80]
                  Direction     up
                  Flipped       off
                  Parameter {
                    Variable      "DialogGeometry"
                    Value         "[1644 701 622 399]"
                    Show          off
                  }
                  Parameter {
                    Variable      "NumInputs"
                    Value         "num_channel"
                    Show          off
                  }
                  Parameter {
                    Variable      "NumOutputs"
                    Value         "num_channel"
                    Show          off
                  }
                  Parameter {
                    Variable      "NumContStates"
                    Value         "0"
                    Show          off
                  }
                  Parameter {
                    Variable      "NumDiscStates"
                    Value         "0"
                    Show          off
                  }
                  Parameter {
                    Variable      "NumZCSignals"
                    Value         "0"
                    Show          off
                  }
                  Parameter {
                    Variable      "DirectFeedthrough"
                    Value         "1"
                    Show          off
                  }
                  Parameter {
                    Variable      "Ts"
                    Value         "0"
                    Show          off
                  }
                  Parameter {
                    Variable      "Parameters"
                    Value         "sync_src"
                    Show          off
                  }
                  Parameter {
                    Variable      "LangStandard"
                    Value         "2"
                    Show          off
                  }
                  Parameter {
                    Variable      "GnuExtensions"
                    Value         "1"
                    Show          off
                  }
                  Parameter {
                    Variable      "RuntimeCheck"
                    Value         "2"
                    Show          off
                  }
                  Parameter {
                    Variable      "Declarations"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "StartFcn"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "OutputFcn"
                    Value         "for(int id_channel=0; id_channel<NumInputSi"
"gnals(0); id_channel++)\n"
"{\n"
"\tif(ParamRealData(0,0)!=2 && id_channel==0)\n"
"\t{\n"
"\t\tOutputSignal(0,id_channel) = 0;\n"
"\t}\n"
"\telse\n"
"\t{\n"
"\t\tOutputSignal(0,id_channel) = InputSignal(0,id_channel);\n"
"\t}\n"
"}"
                    Show          off
                  }
                  Parameter {
                    Variable      "UpdateFcn"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "DerivativeFcn"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "TerminateFcn"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "StoreCustomStateFcn"
                    Value         ""
                    Show          off
                  }
                  Parameter {
                    Variable      "RestoreCustomStateFcn"
                    Value         ""
                    Show          off
                  }
                }
                Connection {
                  Type          Signal
                  SrcComponent  "i"
                  SrcTerminal   1
                  DstComponent  "C-Script"
                  DstTerminal   1
                }
                Connection {
                  Type          Signal
                  SrcComponent  "C-Script"
                  SrcTerminal   2
                  DstComponent  "o"
                  DstTerminal   1
                }
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Carrier"
              Show          on
              Position      [270, 220]
              Direction     up
              Flipped       off
              Frame         [-20, -40; 20, 40]
              LabelPosition [0, -43]
              LabelAlign    down
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              MaskInit      "num_channel_1 = num_channel - 1;"
              Parameter {
                Variable      "num_channel"
                Prompt        "Number of channels"
                Type          FreeText
                Value         "num_pwm"
                Show          off
                Tunable       off
                TabName       ""
              }
              Parameter {
                Variable      "clk_cntr"
                Prompt        "Counter clock [s]"
                Type          FreeText
                Value         "sys_clk"
                Show          off
                Tunable       off
                TabName       ""
              }
              Parameter {
                Variable      "update"
                Prompt        "Update"
                Type          FreeText
                Value         "4"
                Show          off
                Tunable       off
                TabName       ""
              }
              Parameter {
                Variable      "prd_init"
                Prompt        "Norminal period"
                Type          FreeText
                Value         "prd"
                Show          off
                Tunable       off
                TabName       ""
              }
              Parameter {
                Variable      "sync_src"
                Prompt        "Synchronisation impulse from"
                Type          FixedText
                PossibleValues {"Self", "Another PWM", "External GPIO"}
                Value         "sync_src"
                Show          off
                Tunable       off
                TabName       ""
              }
              Terminal {
                Type          Input
                Position      [-20, -30]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [24, -10]
                Direction     right
              }
              Terminal {
                Type          Output
                Position      [24, -30]
                Direction     right
              }
              Terminal {
                Type          Input
                Position      [-20, -10]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [24, 10]
                Direction     right
              }
              Terminal {
                Type          Output
                Position      [24, 30]
                Direction     right
              }
              Terminal {
                Type          Input
                Position      [-20, 10]
                Direction     left
              }
              TerminalNames { "prd", "cntr", "sync", "ph", "z", "p", "sync_i" }
              Location      [1099, 140; 1827, 570]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "Sawtooth"
                Schematic {
                  Component {
                    Type          Input
                    Name          "prd"
                    Show          on
                    Position      [60, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "cntr"
                    Show          on
                    Position      [340, 85]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "sync"
                    Show          on
                    Position      [340, 115]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "ph"
                    Show          on
                    Position      [60, 105]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "4"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "z"
                    Show          on
                    Position      [340, 165]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "5"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "p"
                    Show          on
                    Position      [340, 195]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "6"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "sync_i"
                    Show          on
                    Position      [60, 140]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "7"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          EdgeDetection
                    Name          "Edge Detection"
                    Show          off
                    Position      [115, 140]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Direction"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          CScript
                    Name          "Carrier"
                    Show          on
                    Position      [210, 100]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "DialogGeometry"
                      Value         "[546 45 1373 937]"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumInputs"
                      Value         "[1 num_channel+1 1]"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumOutputs"
                      Value         "[num_channel+1 num_channel+1 2]"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumContStates"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumDiscStates"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumZCSignals"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "DirectFeedthrough"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Ts"
                      Value         "[0,0;-2,0]"
                      Show          off
                    }
                    Parameter {
                      Variable      "Parameters"
                      Value         "clk_cntr, update, sync_src"
                      Show          off
                    }
                    Parameter {
                      Variable      "LangStandard"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "GnuExtensions"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "RuntimeCheck"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Declarations"
                      Value         "#include \"float.h\"\n"
"#include <stdlib.h>\n"
"\n"
"#define clk_cntr ParamRealData(0,0)\n"
"\n"
"#define num_channel NumInputSignals(1)\n"
"\n"
"static double cntr_max_buf;\n"
"typedef struct\n"
"{\n"
"\tdouble cntr;\n"
"\tdouble time;\n"
"\tdouble dirc;\n"
"} samplehit;\n"
"static samplehit *samplehit_pre_buf = NULL;\n"
"static samplehit *samplehit_1st_buf = NULL;\n"
"static samplehit *samplehit_2nd_buf = NULL;\n"
"static samplehit *samplehit_3rd_buf = NULL;\n"
"static double *ph_buf;\n"
"static int update_option;\n"
"static int sync_src_option;\n"
"\n"
"void update_samplehit(int id_channel, double cntr_max, double ph, double clk,"
" double currenttime, \n"
"\tsamplehit* buf_pre, samplehit* buf_1st, samplehit* buf_2nd, samplehit* buf_"
"3rd)\n"
"{\n"
"\tdouble cntr_out;\n"
"\t\n"
"\tif(ph == 0.)\n"
"\t{\n"
"\t\tcntr_out = 0.;\t\n"
"\t\t(buf_pre+id_channel)->cntr = cntr_out;\n"
"\t\t(buf_pre+id_channel)->time = currenttime + 0.;\n"
"\t\t(buf_pre+id_channel)->dirc = 1.;\n"
"\t\t(buf_1st+id_channel)->cntr = 0.;\n"
"\t\t(buf_1st+id_channel)->time = currenttime + cntr_max*clk;\n"
"\t\t(buf_1st+id_channel)->dirc = 1.;\n"
"\t\t(buf_2nd+id_channel)->cntr = 0.;\n"
"\t\t(buf_2nd+id_channel)->time = currenttime + 2*cntr_max*clk;\n"
"\t\t(buf_2nd+id_channel)->dirc = 1.;\n"
"\t\t(buf_3rd+id_channel)->cntr = 0.;\n"
"\t\t(buf_3rd+id_channel)->time = currenttime + 3*cntr_max*clk;\n"
"\t\t(buf_3rd+id_channel)->dirc = 1.;\n"
"\t}\n"
"\telse\n"
"\t{\n"
"\t\tcntr_out = (1-ph)*cntr_max;\n"
"\t\t(buf_pre+id_channel)->cntr = cntr_out;\n"
"\t\t(buf_pre+id_channel)->time = currenttime + 0.;\n"
"\t\t(buf_pre+id_channel)->dirc = 1.;\n"
"\t\t(buf_1st+id_channel)->cntr = 0.;\n"
"\t\t(buf_1st+id_channel)->time = currenttime + (cntr_max-cntr_out)*clk;\n"
"\t\t(buf_1st+id_channel)->dirc = 1.;\n"
"\t\t(buf_2nd+id_channel)->cntr = 0.;\n"
"\t\t(buf_2nd+id_channel)->time = currenttime + (2.*cntr_max-cntr_out)*clk;\n"
"\t\t(buf_2nd+id_channel)->dirc = 1.;\n"
"\t\t(buf_3rd+id_channel)->cntr = 0.;\n"
"\t\t(buf_3rd+id_channel)->time = currenttime + (3.*cntr_max-cntr_out)*clk;\n"
"\t\t(buf_3rd+id_channel)->dirc = 1.;\n"
"\n"
"\t}\n"
"}\n"
                      Show          off
                    }
                    Parameter {
                      Variable      "StartFcn"
                      Value         "NextSampleHit = DBL_MAX;\n"
"samplehit_pre_buf = (samplehit*) malloc(num_channel*sizeof(samplehit));\n"
"samplehit_1st_buf = (samplehit*) malloc(num_channel*sizeof(samplehit));\n"
"samplehit_2nd_buf = (samplehit*) malloc(num_channel*sizeof(samplehit));\n"
"samplehit_3rd_buf = (samplehit*) malloc(num_channel*sizeof(samplehit));\n"
"ph_buf = (double*) malloc(num_channel*sizeof(double));\n"
"update_option = ParamRealData(1,0);\n"
"sync_src_option = ParamRealData(2,0);\n"
"\n"
"samplehit_1st_buf[0].dirc = 1.;\n"
"samplehit_1st_buf[0].time = 0.;\n"
"\n"
"for (int id_channel = 0.; id_channel<num_channel; id_channel++)\n"
"{\n"
"\tph_buf[id_channel] = 0.;\n"
"}\n"
"\n"
"\n"
"\n"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputFcn"
                      Value         "if(IsMajorStep)\n"
"{\n"
"\tcntr_max_buf = InputSignal(0,0);\n"
"\tif(InputSignal(2,0) == 1.) // Update the sample hits for external synchroni"
"sation\n"
"\t{\t\t\t\t\t\t\t\n"
"\t\tfor(int id_channel_tmp = 0; id_channel_tmp < num_channel; id_channel_tmp+"
"+)\n"
"\t\t{\n"
"\t\t\tph_buf[id_channel_tmp] = InputSignal(1,id_channel_tmp);\t\n"
"\t\t\tupdate_samplehit(id_channel_tmp, cntr_max_buf, ph_buf[id_channel_tmp], "
"clk_cntr, CurrentTime, \n"
"\t\t\t\tsamplehit_pre_buf, samplehit_1st_buf, samplehit_2nd_buf, samplehit_3r"
"d_buf);\n"
"\t\t}\t\t\t\t\n"
"\t}\n"
"  \telse // Update the sample hits for external synchronisation\n"
"  \t{  \n"
"\t\tif(IsSampleHit(1) || CurrentTime == 0.)\n"
"\t\t{\t\t\n"
"\t\t\tfor (int id_channel = 0; id_channel < num_channel; id_channel++)\n"
"\t\t\t{\t\t\t\n"
"\t\t\t\tif(samplehit_1st_buf[id_channel].time <= CurrentTime+1e-10 && sampleh"
"it_1st_buf[id_channel].time >= CurrentTime-1e-10)\n"
"\t\t\t\t{\n"
"\t\t\t\t\tif(id_channel == 0 && samplehit_1st_buf[0].dirc == 1.)\n"
"\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\n"
"\t\t\t\t\t\tfor(int id_channel_tmp = 0; id_channel_tmp < num_channel; id_chan"
"nel_tmp++)\n"
"\t\t\t\t\t\t{\n"
"\t\t\t\t\t\t   if(id_channel_tmp > 1 && sync_src_option == 1)\n"
"\t\t\t\t\t\t   {\n"
"\t\t\t\t\t\t\t\tph_buf[id_channel_tmp] = InputSignal(1,id_channel_tmp);\n"
"\t\t\t\t\t\t\t}\n"
"\t\t\t\t\t\t\tupdate_samplehit(id_channel_tmp, cntr_max_buf, ph_buf[id_channe"
"l_tmp], clk_cntr, CurrentTime, \n"
"\t\t\t\t\t\t\t\tsamplehit_pre_buf, samplehit_1st_buf, samplehit_2nd_buf, samp"
"lehit_3rd_buf);\n"
"\t\t\t\t\t\t}\n"
"\t\t\t\t\t}\n"
"\t\t\t\t\telse\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tsamplehit_pre_buf[id_channel].cntr = samplehit_1st_buf[id_channel"
"].cntr;\n"
"\t\t\t\t\t\tsamplehit_pre_buf[id_channel].time = samplehit_1st_buf[id_channel"
"].time;\n"
"\t\t\t\t\t\tsamplehit_pre_buf[id_channel].dirc = samplehit_1st_buf[id_channel"
"].dirc;\n"
"\t\t\t\t\t\tsamplehit_1st_buf[id_channel].cntr = samplehit_2nd_buf[id_channel"
"].cntr;\n"
"\t\t\t\t\t\tsamplehit_1st_buf[id_channel].time = samplehit_2nd_buf[id_channel"
"].time;\n"
"\t\t\t\t\t\tsamplehit_1st_buf[id_channel].dirc = samplehit_2nd_buf[id_channel"
"].dirc;\t\n"
"\t\t\t\t\t\tsamplehit_2nd_buf[id_channel].cntr = samplehit_3rd_buf[id_channel"
"].cntr;\n"
"\t\t\t\t\t\tsamplehit_2nd_buf[id_channel].time = samplehit_3rd_buf[id_channel"
"].time;\n"
"\t\t\t\t\t\tsamplehit_2nd_buf[id_channel].dirc = samplehit_3rd_buf[id_channel"
"].dirc;\t\n"
"\t\t\t\t\t}\t\t\t\t\n"
"\t\t\t\t}\t\t\t\n"
"\t\t\t}\t\t\n"
"\t\t}\t\t\t\n"
"\t}\n"
"\t// Configure the closest sample hit in the future\n"
"\tdouble next_event = samplehit_1st_buf[0].time;\n"
"\tfor (int id_channel = 1; id_channel < num_channel; id_channel++)\n"
"\t{\t\t\n"
"\t\tif(samplehit_1st_buf[id_channel].time < next_event && samplehit_1st_buf[i"
"d_channel].time > CurrentTime)\n"
"\t\t{\n"
"\t\t\tnext_event = samplehit_1st_buf[id_channel].time;\n"
"\t\t}\t\t\t\n"
"\t}\n"
"\t\n"
"\tNextSampleHit = next_event;\n"
"}\n"
"\n"
"// Interpolate the carrier output at minor steps and output the synchrnoisati"
"on impulse\n"
"for (int id_channel = 0; id_channel < num_channel; id_channel++)\n"
"{\t\n"
"\tif(CurrentTime == 0.)\n"
"\t{\n"
"\t\tOutputSignal(0,id_channel) = 0.;\n"
"\t}\n"
"\telse\n"
"\t{\n"
"\n"
"\t   double output;\n"
"\t\toutput = samplehit_pre_buf[id_channel].cntr +  \n"
"\t\t\t\t\t(CurrentTime - samplehit_pre_buf[id_channel].time)\n"
"\t\t\t\t\t/clk_cntr;\n"
"\t\tOutputSignal(0,id_channel) = output;\n"
"\t\tif(update_option!=2)\n"
"\t\t{\n"
"\t\t\tif(output == 0. || output == cntr_max_buf)\n"
"\t\t\t{\n"
"\t\t\t\tOutputSignal(1,id_channel) = 1.;\t\t\t\t\t\t\t\n"
"\t\t\t}\n"
"\t\t\telse\n"
"\t\t\t{\n"
"\t\t\t\tOutputSignal(1,id_channel) = 0.;\n"
"\t\t\t}\n"
"\t\t}\n"
"\t\tif(id_channel == 1)\n"
"\t\t{\n"
"\t\t\t// generate zero and period events\n"
"\t\t\tOutputSignal(2,0) = (output == 0.);\n"
"\t\t\tOutputSignal(2,1) = (output == cntr_max_buf);\n"
"\t\t}\n"
"\t}\n"
"}\n"
"\n"
"\n"
                      Show          off
                    }
                    Parameter {
                      Variable      "UpdateFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "DerivativeFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "TerminateFcn"
                      Value         "free(samplehit_pre_buf);\n"
"free(samplehit_1st_buf);\n"
"free(samplehit_2nd_buf);\n"
"free(samplehit_3rd_buf);\n"
"free(ph_buf);"
                      Show          off
                    }
                    Parameter {
                      Variable      "StoreCustomStateFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "RestoreCustomStateFcn"
                      Value         ""
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector"
                    Show          off
                    Position      [295, 85]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "num_channel+1"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "[2:num_channel+1]"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector1"
                    Show          off
                    Position      [295, 115]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "num_channel+1"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "[2:num_channel+1]"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalMux
                    Name          "Mux"
                    Show          off
                    Position      [125, 100]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Width"
                      Value         "[1 num_channel]"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalDemux
                    Name          "Demux"
                    Show          off
                    Position      [300, 180]
                    Direction     right
                    Flipped       on
                    Parameter {
                      Variable      "Width"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          EdgeDetection
                    Name          "Edge Detection1"
                    Show          off
                    Position      [255, 155]
                    Direction     down
                    Flipped       off
                    Parameter {
                      Variable      "Direction"
                      Value         "1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "sync_i"
                    SrcTerminal   1
                    DstComponent  "Edge Detection"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Carrier"
                    SrcTerminal   5
                    Points        [260, 100; 260, 115]
                    DstComponent  "Cont\nSelector1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector1"
                    SrcTerminal   2
                    DstComponent  "sync"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "ph"
                    SrcTerminal   1
                    DstComponent  "Mux"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Demux"
                    SrcTerminal   3
                    Points        [310, 185]
                    DstComponent  "p"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Demux"
                    SrcTerminal   2
                    Points        [310, 175]
                    DstComponent  "z"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Carrier"
                    SrcTerminal   6
                    Points        [255, 110]
                    DstComponent  "Edge Detection1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector"
                    SrcTerminal   2
                    DstComponent  "cntr"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Edge Detection"
                    SrcTerminal   2
                    Points        [140, 140; 140, 110]
                    DstComponent  "Carrier"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "prd"
                    SrcTerminal   1
                    Points        [140, 60; 140, 90]
                    DstComponent  "Carrier"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Mux"
                    SrcTerminal   1
                    DstComponent  "Carrier"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Edge Detection1"
                    SrcTerminal   2
                    Points        [255, 180]
                    DstComponent  "Demux"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Carrier"
                    SrcTerminal   4
                    Points        [260, 90; 260, 85]
                    DstComponent  "Cont\nSelector"
                    DstTerminal   1
                  }
                }
                Name          "Symmetrical"
                Schematic {
                  Component {
                    Type          Input
                    Name          "prd"
                    Show          on
                    Position      [60, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "cntr"
                    Show          on
                    Position      [340, 85]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "sync"
                    Show          on
                    Position      [340, 115]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "ph"
                    Show          on
                    Position      [60, 105]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "4"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain"
                    Show          off
                    Position      [110, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "0.5"
                      Show          off
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "11"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "z"
                    Show          on
                    Position      [340, 170]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "5"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "p"
                    Show          on
                    Position      [340, 200]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "6"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "sync_i"
                    Show          on
                    Position      [60, 140]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "7"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          EdgeDetection
                    Name          "Edge Detection"
                    Show          off
                    Position      [115, 140]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Direction"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector"
                    Show          off
                    Position      [295, 85]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "num_channel+1"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "[2:num_channel+1]"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector1"
                    Show          off
                    Position      [295, 115]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "num_channel+1"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "[2:num_channel+1]"
                      Show          off
                    }
                  }
                  Component {
                    Type          CScript
                    Name          "Carrier"
                    Show          on
                    Position      [210, 100]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "DialogGeometry"
                      Value         "[120 45 1560 986]"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumInputs"
                      Value         "[1 num_channel+1 1]"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumOutputs"
                      Value         "[num_channel+1 num_channel+1 2]"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumContStates"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumDiscStates"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "NumZCSignals"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "DirectFeedthrough"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Ts"
                      Value         "[0,0;-2,0]"
                      Show          off
                    }
                    Parameter {
                      Variable      "Parameters"
                      Value         "clk_cntr, update, sync_src"
                      Show          off
                    }
                    Parameter {
                      Variable      "LangStandard"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "GnuExtensions"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "RuntimeCheck"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Declarations"
                      Value         "#include \"float.h\"\n"
"#include <stdlib.h>\n"
"\n"
"#define clk_cntr ParamRealData(0,0)\n"
"\n"
"#define num_channel NumInputSignals(1)\n"
"\n"
"static double cntr_max_buf;\n"
"typedef struct\n"
"{\n"
"\tdouble cntr;\n"
"\tdouble time;\n"
"\tdouble dirc;\n"
"} samplehit;\n"
"static samplehit *samplehit_pre_buf = NULL;\n"
"static samplehit *samplehit_1st_buf = NULL;\n"
"static samplehit *samplehit_2nd_buf = NULL;\n"
"static samplehit *samplehit_3rd_buf = NULL;\n"
"static double *ph_buf;\n"
"static int update_option;\n"
"static int sync_src_option;\n"
"\n"
"void update_samplehit(int id_channel, double cntr_max, double ph, double clk,"
" double currenttime, \n"
"\tsamplehit* buf_pre, samplehit* buf_1st, samplehit* buf_2nd, samplehit* buf_"
"3rd)\n"
"{\n"
"\tdouble cntr_out;\n"
"\tif(ph <= 0.5 && ph > 0.)\n"
"\t{\n"
"\t\tcntr_out = ph/0.5*cntr_max;\n"
"\t\t(buf_pre+id_channel)->cntr = cntr_out;\n"
"\t\t(buf_pre+id_channel)->time = currenttime + 0.;\n"
"\t\t(buf_pre+id_channel)->dirc = -1.;\n"
"\t\t(buf_1st+id_channel)->cntr = 0.;\n"
"\t\t(buf_1st+id_channel)->time = currenttime + cntr_out*clk;\n"
"\t\t(buf_1st+id_channel)->dirc = 1.;\n"
"\t\t(buf_2nd+id_channel)->cntr = cntr_max;\n"
"\t\t(buf_2nd+id_channel)->time = currenttime + (cntr_out+cntr_max)*clk;\n"
"\t\t(buf_2nd+id_channel)->dirc = -1.;\n"
"\t\t(buf_3rd+id_channel)->cntr = 0.;\n"
"\t\t(buf_3rd+id_channel)->time = currenttime + (cntr_out+2*cntr_max)*clk;\n"
"\t\t(buf_3rd+id_channel)->dirc = 1.;\n"
"\n"
"\t}\n"
"\telse if(ph == 0.)\n"
"\t{\n"
"\t\tcntr_out = 0.;\t\n"
"\t\t(buf_pre+id_channel)->cntr = cntr_out;\n"
"\t\t(buf_pre+id_channel)->time = currenttime + 0.;\n"
"\t\t(buf_pre+id_channel)->dirc = 1.;\n"
"\t\t(buf_1st+id_channel)->cntr = cntr_max;\n"
"\t\t(buf_1st+id_channel)->time = currenttime + cntr_max*clk;\n"
"\t\t(buf_1st+id_channel)->dirc = -1.;\n"
"\t\t(buf_2nd+id_channel)->cntr = 0.;\n"
"\t\t(buf_2nd+id_channel)->time = currenttime + 2*cntr_max*clk;\n"
"\t\t(buf_2nd+id_channel)->dirc = 1.;\n"
"\t\t(buf_3rd+id_channel)->cntr = cntr_max;\n"
"\t\t(buf_3rd+id_channel)->time = currenttime + 3*cntr_max*clk;\n"
"\t\t(buf_3rd+id_channel)->dirc = -1.;\n"
"\t}\n"
"\telse\n"
"\t{\n"
"\t\tdouble cntr_out = (1. - (ph-0.5)/0.5)*cntr_max;\n"
"\t\t(buf_pre+id_channel)->cntr = cntr_out;\n"
"\t\t(buf_pre+id_channel)->time = currenttime + 0.;\n"
"\t\t(buf_pre+id_channel)->dirc = 1.;\n"
"\t\t(buf_1st+id_channel)->cntr = cntr_max;\n"
"\t\t(buf_1st+id_channel)->time = currenttime + (cntr_max-cntr_out)*clk;\n"
"\t\t(buf_1st+id_channel)->dirc = -1.;\n"
"\t\t(buf_2nd+id_channel)->cntr = 0.;\n"
"\t\t(buf_2nd+id_channel)->time = currenttime + (cntr_max-cntr_out+cntr_max)*c"
"lk;\n"
"\t\t(buf_2nd+id_channel)->dirc = 1.;\n"
"\t\t(buf_3rd+id_channel)->cntr = cntr_max;\n"
"\t\t(buf_3rd+id_channel)->time = currenttime + (cntr_max-cntr_out+2*cntr_max)"
"*clk;\n"
"\t\t(buf_3rd+id_channel)->dirc = -1.;\n"
"\t}\n"
"}\n"
                      Show          off
                    }
                    Parameter {
                      Variable      "StartFcn"
                      Value         "NextSampleHit = DBL_MAX;\n"
"samplehit_pre_buf = (samplehit*) malloc(num_channel*sizeof(samplehit));\n"
"samplehit_1st_buf = (samplehit*) malloc(num_channel*sizeof(samplehit));\n"
"samplehit_2nd_buf = (samplehit*) malloc(num_channel*sizeof(samplehit));\n"
"samplehit_3rd_buf = (samplehit*) malloc(num_channel*sizeof(samplehit));\n"
"ph_buf = (double*) malloc(num_channel*sizeof(double));\n"
"update_option = ParamRealData(1,0);\n"
"sync_src_option = ParamRealData(2,0);\n"
"\n"
"samplehit_1st_buf[0].dirc = 1.;\n"
"samplehit_1st_buf[0].time = 0.;\n"
"\n"
"for (int id_channel = 0.; id_channel<num_channel; id_channel++)\n"
"{\n"
"\tph_buf[id_channel] = 0.;\n"
"}\n"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputFcn"
                      Value         "if(IsMajorStep)\n"
"{\t  \n"
"\tcntr_max_buf = InputSignal(0,0);\n"
"   if(InputSignal(2,0) == 1.) // Update the sample hits for external synchron"
"isation\n"
"\t{\n"
"\t\tfor(int id_channel_tmp = 0; id_channel_tmp < num_channel; id_channel_tmp+"
"+)\n"
"\t\t{\n"
"\t\t\tph_buf[id_channel_tmp] = InputSignal(1,id_channel_tmp);\t\t\t\t\t\t\t\t"
"\t\t\t\n"
"\t\t\tupdate_samplehit(id_channel_tmp, cntr_max_buf, ph_buf[id_channel_tmp], "
"clk_cntr, CurrentTime, \n"
"\t\t\t\tsamplehit_pre_buf, samplehit_1st_buf, samplehit_2nd_buf, samplehit_3r"
"d_buf);\n"
"\t\t}\t\t\n"
"\t}\n"
"  \telse // Update the sample hits for external synchronisation\n"
"  \t{  \n"
"  \t\tif(IsSampleHit(1) || CurrentTime == 0.)\n"
"  \t\t{\t\t\t \t\t\n"
"\t\t\tfor (int id_channel = 0; id_channel < num_channel; id_channel++)\n"
"\t\t\t{\t\t\t\n"
"\t\t\t\tif(samplehit_1st_buf[id_channel].time <= CurrentTime+1e-10 && sampleh"
"it_1st_buf[id_channel].time >= CurrentTime-1e-10)\n"
"\t\t\t\t{\n"
"\t\t\t\t\tif(id_channel == 0 && samplehit_1st_buf[0].dirc == 1.)\n"
"\t\t\t\t\t{\t\t\t\t\n"
"\t\t\t\t\t\tfor(int id_channel_tmp = 0; id_channel_tmp < num_channel; id_chan"
"nel_tmp++)\n"
"\t\t\t\t\t\t{\n"
"\t\t\t\t\t\t\tif(id_channel_tmp > 1 && sync_src_option == 1)\n"
"\t\t\t\t\t\t   {\n"
"\t\t\t\t\t\t\t\tph_buf[id_channel_tmp] = InputSignal(1,id_channel_tmp);\n"
"\t\t\t\t\t\t\t}\n"
"\t\t\t\t\t\t\tupdate_samplehit(id_channel_tmp, cntr_max_buf, ph_buf[id_channe"
"l_tmp], clk_cntr, CurrentTime, \n"
"\t\t\t\t\t\t\t\tsamplehit_pre_buf, samplehit_1st_buf, samplehit_2nd_buf, samp"
"lehit_3rd_buf);\n"
"\t\t\t\t\t\t}\n"
"\t\t\t\t\t}\n"
"\t\t\t\t\telse\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tsamplehit_pre_buf[id_channel].cntr = samplehit_1st_buf[id_channel"
"].cntr;\n"
"\t\t\t\t\t\tsamplehit_pre_buf[id_channel].time = samplehit_1st_buf[id_channel"
"].time;\n"
"\t\t\t\t\t\tsamplehit_pre_buf[id_channel].dirc = samplehit_1st_buf[id_channel"
"].dirc;\n"
"\t\t\t\t\t\tsamplehit_1st_buf[id_channel].cntr = samplehit_2nd_buf[id_channel"
"].cntr;\n"
"\t\t\t\t\t\tsamplehit_1st_buf[id_channel].time = samplehit_2nd_buf[id_channel"
"].time;\n"
"\t\t\t\t\t\tsamplehit_1st_buf[id_channel].dirc = samplehit_2nd_buf[id_channel"
"].dirc;\t\n"
"\t\t\t\t\t\tsamplehit_2nd_buf[id_channel].cntr = samplehit_3rd_buf[id_channel"
"].cntr;\n"
"\t\t\t\t\t\tsamplehit_2nd_buf[id_channel].time = samplehit_3rd_buf[id_channel"
"].time;\n"
"\t\t\t\t\t\tsamplehit_2nd_buf[id_channel].dirc = samplehit_3rd_buf[id_channel"
"].dirc;\t\n"
"\t\t\t\t\t}\t\t\t\t\n"
"\t\t\t\t}\t\t\t\n"
"\t\t\t}  \t\t\n"
"  \t\t}\n"
"  \t}\n"
"  \t// Configure the closest sample hit in the future\n"
"   double next_event = samplehit_1st_buf[0].time;\n"
"   for (int id_channel = 1; id_channel < num_channel; id_channel++)\n"
"\t{\t\t\n"
"  \t\tif(samplehit_1st_buf[id_channel].time < next_event && samplehit_1st_buf"
"[id_channel].time > CurrentTime)\n"
"  \t\t{\n"
"  \t\t\tnext_event = samplehit_1st_buf[id_channel].time;\n"
"  \t\t}\t\t\t\n"
"  \t}\n"
"  \t\n"
"  \tNextSampleHit = next_event;\t\t\n"
"}\n"
"\n"
"// Interpolate the carrier output at minor steps and output the synchrnoisati"
"on impulse\n"
"for (int id_channel = 0; id_channel < num_channel; id_channel++)\n"
"{\t\n"
"\tif(CurrentTime == 0.)\n"
"\t{\n"
"\t\tOutputSignal(0,id_channel) = 0.;\n"
"\t}\n"
"\telse\n"
"\t{\n"
"\t   double output;\n"
"\t\toutput = samplehit_pre_buf[id_channel].cntr +  \n"
"\t\t\t\t\t(CurrentTime - samplehit_pre_buf[id_channel].time)\n"
"\t\t\t\t\t/(samplehit_1st_buf[id_channel].time - samplehit_pre_buf[id_channel"
"].time)\n"
"\t\t\t\t\t*(samplehit_1st_buf[id_channel].cntr-samplehit_pre_buf[id_channel]."
"cntr);\n"
"\t\tOutputSignal(0,id_channel) = output;\n"
"\t\tswitch(update_option)\n"
"\t\t{\n"
"\t\t\tcase 1:\n"
"\t\t\t\tif(output == 0.)\n"
"\t\t\t\t{\n"
"\t\t\t\t\tOutputSignal(1,id_channel) = 1.;\t\t\t\t\t\t\t\n"
"\t\t\t\t}\n"
"\t\t\t\telse\n"
"\t\t\t\t{\n"
"\t\t\t\t\tOutputSignal(1,id_channel) = 0.;\n"
"\t\t\t\t}\n"
"\t\t\t\tbreak;\n"
"\t\t\tcase 3:\n"
"\t\t\t\tif(output == cntr_max_buf)\n"
"\t\t\t\t{\n"
"\t\t\t\t\tOutputSignal(1,id_channel) = 1.;\n"
"\t\t\t\t}\n"
"\t\t\t\telse\n"
"\t\t\t\t{\n"
"\t\t\t\t\tOutputSignal(1,id_channel) = 0.;\n"
"\t\t\t\t}\n"
"\t\t\t\tbreak;\n"
"\t\t\tcase 4:\n"
"\t\t\t\tif(output == cntr_max_buf||output == 0.)\n"
"\t\t\t\t{\n"
"\t\t\t\t\tOutputSignal(1,id_channel) = 1.;\n"
"\t\t\t\t}\n"
"\t\t\t\telse\n"
"\t\t\t\t{\n"
"\t\t\t\t\tOutputSignal(1,id_channel) = 0.;\n"
"\t\t\t\t}\n"
"\t\t\t\tbreak;\n"
"\t\t\tdefault:\n"
"\t\t\t\tbreak;\n"
"\t\t}\n"
"\t\tif(id_channel == 1)\n"
"\t\t{\n"
"\t\t\t// generate zero and period events\n"
"\t\t\tOutputSignal(2,0) = (output == 0.);\n"
"\t\t\tOutputSignal(2,1) = (output == cntr_max_buf);\n"
"\t\t}\n"
"\t}\n"
"}\n"
"\n"
"\n"
                      Show          off
                    }
                    Parameter {
                      Variable      "UpdateFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "DerivativeFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "TerminateFcn"
                      Value         "free(samplehit_pre_buf);\n"
"free(samplehit_1st_buf);\n"
"free(samplehit_2nd_buf);\n"
"free(samplehit_3rd_buf);\n"
"free(ph_buf);"
                      Show          off
                    }
                    Parameter {
                      Variable      "StoreCustomStateFcn"
                      Value         ""
                      Show          off
                    }
                    Parameter {
                      Variable      "RestoreCustomStateFcn"
                      Value         ""
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalMux
                    Name          "Mux"
                    Show          off
                    Position      [125, 100]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Width"
                      Value         "[1 num_channel]"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalDemux
                    Name          "Demux"
                    Show          off
                    Position      [295, 185]
                    Direction     right
                    Flipped       on
                    Parameter {
                      Variable      "Width"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          EdgeDetection
                    Name          "Edge Detection1"
                    Show          off
                    Position      [255, 155]
                    Direction     down
                    Flipped       off
                    Parameter {
                      Variable      "Direction"
                      Value         "1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "prd"
                    SrcTerminal   1
                    DstComponent  "Gain"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "sync_i"
                    SrcTerminal   1
                    DstComponent  "Edge Detection"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector1"
                    SrcTerminal   2
                    DstComponent  "sync"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector"
                    SrcTerminal   2
                    DstComponent  "cntr"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "ph"
                    SrcTerminal   1
                    DstComponent  "Mux"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Carrier"
                    SrcTerminal   5
                    Points        [260, 100; 260, 115]
                    DstComponent  "Cont\nSelector1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Demux"
                    SrcTerminal   2
                    Points        [305, 180; 305, 170]
                    DstComponent  "z"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Demux"
                    SrcTerminal   3
                    Points        [305, 190; 305, 200]
                    DstComponent  "p"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Carrier"
                    SrcTerminal   6
                    Points        [255, 110]
                    DstComponent  "Edge Detection1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Edge Detection"
                    SrcTerminal   2
                    Points        [140, 140; 140, 110]
                    DstComponent  "Carrier"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain"
                    SrcTerminal   2
                    Points        [140, 60; 140, 90]
                    DstComponent  "Carrier"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Mux"
                    SrcTerminal   1
                    DstComponent  "Carrier"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Edge Detection1"
                    SrcTerminal   2
                    Points        [255, 185]
                    DstComponent  "Demux"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Carrier"
                    SrcTerminal   4
                    Points        [260, 90; 260, 85]
                    DstComponent  "Cont\nSelector"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "type"
                Show          off
              }
            }
            Component {
              Type          Reference
              SrcComponent  "Components/Control/Modulators/Blanking Time"
              Name          "Blanking Time"
              Show          on
              Position      [540, 205]
              Direction     up
              Flipped       off
              Frame         [-20, -20; 20, 20]
              LabelPosition [0, 23]
              LabelAlign    up
              Parameter {
                Variable      "tb"
                Value         "delay"
                Show          off
              }
              Terminal {
                Type          Output
                Position      [24, 0]
                Direction     right
              }
              Terminal {
                Type          Input
                Position      [-20, 0]
                Direction     left
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "sw"
              Show          on
              Position      [595, 205]
              Direction     up
              Flipped       off
              Frame         [-15, -15; 15, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-15, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [19, 0]
                Direction     right
              }
              TerminalNames { "In1", "Out1" }
              Location      [468, 133; 780, 319]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "Active High"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [20, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [240, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConstantRelationalOperator
                    Name          "Compare to\nConstant"
                    Show          off
                    Position      [100, 50]
                    Direction     right
                    Flipped       off
                    Frame         [-20, -10; 20, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Operator"
                      Value         "6"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConstantRelationalOperator
                    Name          "Compare to\nConstant1"
                    Show          off
                    Position      [100, 70]
                    Direction     right
                    Flipped       off
                    Frame         [-20, -10; 20, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Operator"
                      Value         "3"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector"
                    Show          off
                    Position      [180, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "num_pwm*2"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "reshape([1:num_pwm; (num_pwm+1):num_pwm*2"
"], [1 num_pwm*2])"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalMux
                    Name          "Mux"
                    Show          off
                    Position      [140, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Width"
                      Value         "[num_pwm num_pwm]"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Compare to\nConstant"
                    SrcTerminal   2
                    DstComponent  "Mux"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Compare to\nConstant1"
                    SrcTerminal   2
                    DstComponent  "Mux"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Mux"
                    SrcTerminal   1
                    DstComponent  "Cont\nSelector"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector"
                    SrcTerminal   2
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    Points        [65, 60]
                    Branch {
                      DstComponent  "Compare to\nConstant1"
                      DstTerminal   1
                    }
                    Branch {
                      DstComponent  "Compare to\nConstant"
                      DstTerminal   1
                    }
                  }
                }
                Name          "Active Low"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [20, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [240, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConstantRelationalOperator
                    Name          "Compare to\nConstant"
                    Show          off
                    Position      [100, 50]
                    Direction     right
                    Flipped       off
                    Frame         [-20, -10; 20, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Operator"
                      Value         "4"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConstantRelationalOperator
                    Name          "Compare to\nConstant1"
                    Show          off
                    Position      [100, 70]
                    Direction     right
                    Flipped       off
                    Frame         [-20, -10; 20, 10]
                    LabelPosition [0, 13]
                    LabelAlign    up
                    Parameter {
                      Variable      "Operator"
                      Value         "5"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector"
                    Show          off
                    Position      [180, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "num_pwm*2"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "reshape([1:num_pwm; (num_pwm+1):num_pwm*2"
"], [1 num_pwm*2])"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalMux
                    Name          "Mux"
                    Show          off
                    Position      [140, 60]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Width"
                      Value         "[num_pwm num_pwm]"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Compare to\nConstant"
                    SrcTerminal   2
                    DstComponent  "Mux"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Compare to\nConstant1"
                    SrcTerminal   2
                    DstComponent  "Mux"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Mux"
                    SrcTerminal   1
                    DstComponent  "Cont\nSelector"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector"
                    SrcTerminal   2
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    Points        [65, 60]
                    Branch {
                      DstComponent  "Compare to\nConstant1"
                      DstTerminal   1
                    }
                    Branch {
                      DstComponent  "Compare to\nConstant"
                      DstTerminal   1
                    }
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "polarity"
                Show          off
              }
            }
            Component {
              Type          Offset
              Name          "Offset"
              Show          on
              Position      [480, 205]
              Direction     right
              Flipped       off
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Offset"
                Value         "-0.5"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "11"
                Show          off
              }
            }
            Component {
              Type          DataType
              Name          "Data Type"
              Show          off
              Position      [420, 205]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant3"
              SrcTerminal   1
              Points        [150, 190; 150, 160]
              DstComponent  "Divide"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Product2"
              SrcTerminal   1
              DstComponent  "Configurable\nSubsystem"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Compare to\nConstant"
              SrcTerminal   2
              DstComponent  "Sum1"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Sum"
              SrcTerminal   1
              DstComponent  "Gain1"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Gain1"
              SrcTerminal   2
              DstComponent  "Product2"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant"
              SrcTerminal   1
              Points        [150, 80]
              DstComponent  "Sum"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Divide"
              SrcTerminal   1
              Points        [210, 155]
              Branch {
                Points        [210, 190]
                DstComponent  "Carrier"
                DstTerminal   1
              }
              Branch {
                Points        [210, 120]
                DstComponent  "Product2"
                DstTerminal   2
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "m"
              SrcTerminal   1
              DstComponent  "Sum"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "init"
              SrcTerminal   1
              DstComponent  "Divide"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "fc'"
              SrcTerminal   1
              DstComponent  "init"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "ph'"
              SrcTerminal   1
              Points        [115, 210]
              Branch {
                DstComponent  "Compare to\nConstant"
                DstTerminal   1
              }
              Branch {
                DstComponent  "Sum1"
                DstTerminal   2
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Sum1"
              SrcTerminal   1
              DstComponent  "synco\nselect"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "synco\nselect"
              SrcTerminal   2
              DstComponent  "Carrier"
              DstTerminal   4
            }
            Connection {
              Type          Signal
              SrcComponent  "Carrier"
              SrcTerminal   5
              Points        [310, 230; 310, 250]
              DstComponent  "z"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Carrier"
              SrcTerminal   6
              Points        [300, 250; 300, 290]
              DstComponent  "p"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Configurable\nSubsystem"
              SrcTerminal   2
              Points        [330, 115]
              DstComponent  "Comparator"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Blanking Time"
              SrcTerminal   1
              DstComponent  "sw"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Offset"
              SrcTerminal   2
              DstComponent  "Blanking Time"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Data Type"
              SrcTerminal   2
              DstComponent  "Offset"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "sw"
              SrcTerminal   2
              DstComponent  "s"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "sync_i"
              SrcTerminal   1
              Points        [235, 280]
              DstComponent  "Carrier"
              DstTerminal   7
            }
            Connection {
              Type          Signal
              SrcComponent  "Carrier"
              SrcTerminal   3
              Points        [300, 190]
              DstComponent  "Configurable\nSubsystem"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Comparator"
              SrcTerminal   3
              DstComponent  "Data Type"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Carrier"
              SrcTerminal   2
              DstComponent  "Comparator"
              DstTerminal   2
            }
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "f'"
          SrcTerminal   1
          DstComponent  "PWM"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "PWM"
          SrcTerminal   1
          DstComponent  "1"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "ph'"
          SrcTerminal   1
          Points        [90, 120; 90, 90]
          DstComponent  "PWM"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Logical\nOperator"
          SrcTerminal   1
          Points        [245, 125; 245, 110]
          DstComponent  "Mux"
          DstTerminal   5
        }
        Connection {
          Type          Signal
          SrcComponent  "Mux"
          SrcTerminal   1
          Points        [285, 95]
          Branch {
            DstComponent  "Cont\nSelector"
            DstTerminal   1
          }
          Branch {
            Points        [285, 125]
            DstComponent  "Cont\nSelector1"
            DstTerminal   1
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "PWM"
          SrcTerminal   6
          Points        [190, 80; 190, 90]
          Branch {
            Points        [190, 120]
            Branch {
              DstComponent  "Logical\nOperator"
              DstTerminal   2
            }
            Branch {
              DstComponent  "synco\nselect"
              DstTerminal   1
            }
          }
          Branch {
            DstComponent  "Mux"
            DstTerminal   3
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "PWM"
          SrcTerminal   7
          Points        [180, 90; 180, 100]
          Branch {
            Points        [180, 130]
            DstComponent  "Logical\nOperator"
            DstTerminal   3
          }
          Branch {
            DstComponent  "Mux"
            DstTerminal   4
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "synco\nselect"
          SrcTerminal   2
          DstComponent  "synco"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "m"
          SrcTerminal   1
          Points        [90, 40; 90, 70]
          DstComponent  "PWM"
          DstTerminal   4
        }
        Connection {
          Type          Signal
          SrcComponent  "synci"
          SrcTerminal   1
          Points        [100, 160]
          Branch {
            DstComponent  "synco\nselect"
            DstTerminal   3
          }
          Branch {
            Points        [100, 100]
            DstComponent  "PWM"
            DstTerminal   5
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Cont\nSelector"
          SrcTerminal   2
          DstComponent  "Pulse Divider1"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Pulse Divider1"
          SrcTerminal   2
          DstComponent  "Task"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Cont\nSelector1"
          SrcTerminal   2
          DstComponent  "Pulse Divider"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Pulse Divider"
          SrcTerminal   2
          DstComponent  "ADC"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "External Sync"
      Show          on
      Position      [45, 675]
      Direction     up
      Flipped       off
      Frame         [-30, -20; 30, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "3"
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C2000\""
", \"extsync\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      NonDftCodeFcn "local block = Target.Coder.GetTargetBlock(Block.UserData."
"bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()\n"
      MaskType      "External Sync"
      MaskDescription "External synchronization port for PWM output."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/ext_sync_c2000.html"
      MaskDisplay   "Icon:text('External\\nSync')\n"
"\n"
"local function drawTrigger(x,y)\n"
"\tIcon:color(125, 0, 8)\n"
"\tIcon:line({x-3.5,x+3.5},{y+2.5, y+2.5})\n"
"\tIcon:line({x, x},{y+2.5, y-2.5})\n"
"\tIcon:line({x-2.5, x-2.5},{y+2.5, y-2.5})\n"
"\tIcon:line({x+2.5, x+2.5},{y+2.5, y-2.5})\n"
"\tIcon:circle(x, y-2.5,0.5)\n"
"\tIcon:circle(x-2.5, y-2.5,0.5)\n"
"\tIcon:circle(x+2.5, y-2.5,0.5)\n"
"end\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')\n"
"\n"
"local flipped = Block:get(\"Flipped\")\n"
"local direction = Block:get(\"Direction\")\n"
"if direction == 0.0 then\n"
"  if flipped then\n"
"\t drawTrigger(0, 25)\n"
"  else\n"
"\t drawTrigger(0, 25)\n"
"  end\n"
"end\n"
"if direction == 0.25 then\n"
"  if flipped then\n"
"\t drawTrigger(-25, 0)\n"
"  else\n"
"    drawTrigger(-25, 0)\n"
"  end  \n"
"end\n"
"if direction == 0.5 then\n"
"  if flipped then\n"
"  drawTrigger(0, -25)\n"
"  else\n"
"\t drawTrigger(0, -25)\n"
"  end \n"
"end\n"
"if direction == 0.75 then\n"
"  if flipped then \n"
"\t drawTrigger(25, 0)\n"
"  else\n"
"\t drawTrigger(25, 0)\n"
"  end \n"
"end "
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      Parameter {
        Variable      "Unit"
        Prompt        "Unit"
        Type          FixedText
        PossibleValues {"EXTSYNC 1", "EXTSYNC 2"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "sync_gpio"
        Prompt        "GPIO number"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          EventOutput
        Position      [34, 0]
        Direction     right
      }
      Schematic {
        Location      [125, 172; 1003, 407]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [120, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          EventOutput
          Name          "sync"
          Show          off
          Position      [260, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
        }
        Component {
          Type          EdgeDetection
          Name          "Edge Detection"
          Show          on
          Position      [190, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Direction"
            Value         "1"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "Edge Detection"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Edge Detection"
          SrcTerminal   2
          DstComponent  "sync"
          DstTerminal   1
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Counter"
      Show          on
      Position      [40, 735]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "4"
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C2000\""
", \"qep\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      NonDftCodeFcn "local block = Target.Coder.GetTargetBlock(Block.UserData."
"bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()\n"
      MaskType      "Quadrature Encoder Counter"
      MaskDescription "Counts edges of quadrature pulse train."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/encoder_counter_c2000.h"
"tml"
      MaskDisplay   "Icon:text('QEP')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      MaskInit      "if (qep ~= 1 && qep ~= 2 && qep ~= 3 && qep ~= 4),\n"
"   error('Parameter \"QEP module\" must be a single integer value between 1 a"
"nd 4.');\n"
"end\n"
"\n"
"if numel(abi) ~= 3 || ~isvector(abi) ...\n"
"   || any(floor(abi) ~= abi) || any(abi < 0),\n"
"   error('Parameter \"GPIO numbers [A,B,I]\" must be a vector of three positi"
"ve or zero integers.');\n"
"end\n"
"\n"
"if ~isreal(prd) || numel(prd) ~= 1 ...\n"
"   || any(floor(prd) ~= prd) || any(prd <= 0),\n"
"   error('\"Maximum counter value\" must be a single positive integer value.'"
");\n"
"end\n"
"\n"
"if rst ~= 1 && rst ~=2,\n"
"   error('Parameter \"Counter reset method\" must have an integer value of 1 "
"or 2.');\n"
"end\n"
"\n"
"disk_cnt = (prd+1)/4;\n"
"if (disk_cnt ~= round(disk_cnt))\n"
"\terror('(Maximum counter value + 1) must be an integer multiple of 4.');\n"
"end"
      Parameter {
        Variable      "qep"
        Prompt        "QEP module"
        Type          FixedText
        PossibleValues {"eQEP 1", "eQEP 2", "eQEP 3", "eQEP 4"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "abi"
        Prompt        "GPIO numbers [A,B,I]"
        Type          FreeText
        Value         "[0,1,2]"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "prd"
        Prompt        "Maximum counter value"
        Type          FreeText
        Value         "4095"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "rst"
        Prompt        "Counter reset method"
        Type          FixedText
        PossibleValues {"Free running", "Index pulse"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       ""
      }
      Terminal {
        Type          Output
        Position      [29, -10]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 10]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Schematic {
        Location      [555, 265; 1171, 673]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          Output
          Name          "c"
          Show          on
          Position      [260, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "6"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "ic"
          Show          on
          Position      [260, 135]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "6"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "i"
          Show          on
          Position      [260, 195]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "3"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "10"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "-1"
            Show          off
          }
        }
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [65, 75]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "3"
            Show          off
          }
        }
        Component {
          Type          Subsystem
          Name          "Triggered\nSubsystem"
          Show          off
          Position      [145, 130]
          Direction     up
          Flipped       on
          Frame         [-15, -15; 15, 15]
          LabelPosition [0, -18]
          LabelAlign    down
          TreatAsAtomicUnit on
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [15, 5]
            Direction     right
            Index         "1"
          }
          Terminal {
            Type          Output
            Position      [19, -5]
            Direction     right
            Index         "1"
          }
          Terminal {
            Type          Input
            Position      [-15, 0]
            Direction     left
            Index         "2"
          }
          Schematic {
            Location      [415, 55; 699, 222]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "i"
              Show          on
              Position      [60, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "o"
              Show          on
              Position      [220, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Trigger
              Name          "Trigger"
              Show          on
              Position      [140, 40]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
              Parameter {
                Variable      "TriggerType"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "ShowOutput"
                Value         "1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "i"
              SrcTerminal   1
              DstComponent  "o"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          ControlTaskHit
          Name          "Control Task Hit"
          Show          on
          Position      [65, 215]
          Direction     right
          Flipped       off
        }
        Component {
          Type          Subsystem
          Name          "Latch"
          Show          on
          Position      [205, 195]
          Direction     up
          Flipped       off
          Frame         [-20, -20; 20, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Output
            Position      [24, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-20, 10]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, -10]
            Direction     left
          }
          Schematic {
            Location      [960, 468; 1296, 743]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Memory
              Name          "Memory"
              Show          off
              Position      [210, 185]
              Direction     right
              Flipped       on
              Parameter {
                Variable      "X0"
                Value         "0"
                Show          off
              }
            }
            Component {
              Type          LogicalOperator
              Name          "Logical\nOperator1"
              Show          off
              Position      [210, 100]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "Operator"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          LogicalOperator
              Name          "Logical\nOperator2"
              Show          off
              Position      [210, 150]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "Operator"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          LogicalOperator
              Name          "Logical\nOperator3"
              Show          off
              Position      [80, 170]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "Operator"
                Value         "6"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          LogicalOperator
              Name          "Logical\nOperator4"
              Show          off
              Position      [140, 135]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "Operator"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out"
              Show          on
              Position      [290, 100]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "Rst"
              Show          on
              Position      [25, 170]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "In"
              Show          on
              Position      [25, 95]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Logical\nOperator2"
              SrcTerminal   1
              Points        [245, 150; 245, 185]
              DstComponent  "Memory"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Memory"
              SrcTerminal   2
              Points        [175, 185]
              Branch {
                Points        [175, 105]
                DstComponent  "Logical\nOperator1"
                DstTerminal   3
              }
              Branch {
                Points        [110, 185]
                DstComponent  "Logical\nOperator4"
                DstTerminal   3
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Logical\nOperator4"
              SrcTerminal   1
              Points        [170, 135; 170, 145]
              DstComponent  "Logical\nOperator2"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Logical\nOperator3"
              SrcTerminal   1
              Points        [160, 170; 160, 155]
              DstComponent  "Logical\nOperator2"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Logical\nOperator1"
              SrcTerminal   1
              DstComponent  "Out"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Rst"
              SrcTerminal   1
              DstComponent  "Logical\nOperator3"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "In"
              SrcTerminal   1
              Points        [110, 95]
              Branch {
                DstComponent  "Logical\nOperator1"
                DstTerminal   2
              }
              Branch {
                DstComponent  "Logical\nOperator4"
                DstTerminal   2
              }
            }
          }
        }
        Component {
          Type          EdgeDetection
          Name          "Edge Detection2"
          Show          off
          Position      [145, 175]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Direction"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          EdgeDetection
          Name          "Edge Detection3"
          Show          off
          Position      [145, 215]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Direction"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          SignalDemux
          Name          "Demux"
          Show          off
          Position      [105, 75]
          Direction     right
          Flipped       on
          Parameter {
            Variable      "Width"
            Value         "3"
            Show          off
          }
        }
        Component {
          Type          Subsystem
          Name          "eQEP"
          Show          on
          Position      [145, 75]
          Direction     up
          Flipped       off
          Frame         [-20, -20; 20, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          MaskInit      "disk_cnt = (cntr_max+1)/4;\n"
"if (disk_cnt ~= round(disk_cnt))\n"
"\terror('(Maximum counter value + 1) should be integer multiple of 4!');\n"
"end"
          Parameter {
            Variable      "cntr_max"
            Prompt        "Maximum counter value"
            Type          FreeText
            Value         "prd"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Input
            Position      [-20, -10]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, 0]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, 10]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [24, 0]
            Direction     right
          }
          Schematic {
            Location      [1644, 56; 2004, 290]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "A"
              Show          on
              Position      [80, 50]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "B"
              Show          on
              Position      [80, 90]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "I"
              Show          on
              Position      [80, 130]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          CScript
              Name          "Counter"
              Show          on
              Position      [210, 60]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "DialogGeometry"
                Value         "[603 507 1188 825]"
                Show          off
              }
              Parameter {
                Variable      "NumInputs"
                Value         "3"
                Show          off
              }
              Parameter {
                Variable      "NumOutputs"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "NumContStates"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "NumDiscStates"
                Value         "0"
                Show          off
              }
              Parameter {
                Variable      "NumZCSignals"
                Value         "0"
                Show          off
              }
              Parameter {
                Variable      "DirectFeedthrough"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Ts"
                Value         "0"
                Show          off
              }
              Parameter {
                Variable      "Parameters"
                Value         "cntr_max"
                Show          off
              }
              Parameter {
                Variable      "LangStandard"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "GnuExtensions"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "RuntimeCheck"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Declarations"
                Value         "static int edge_prev; //1 for A, 2 for B \n"
"static int edge_type_prev; //-1 for down, 1 for up\n"
"static int edge_actual; //1 for A, 2 for B \n"
"static int edge_type_actual; //-1 for down, 1 for up\n"
"\n"
"static int value_A_prev;\n"
"static int value_A_actual;\n"
"static int value_B_prev;\n"
"static int value_B_actual;\n"
"static int value_I_prev;\n"
"static int value_I_actual;\n"
"static int direction_actual; //-1 for minus, 1 for plus\n"
"static int cntr_max;\n"
"static int edge_detected;\n"
"static int cntr;"
                Show          off
              }
              Parameter {
                Variable      "StartFcn"
                Value         "edge_prev = 1;\n"
"edge_type_prev = 1; \n"
"edge_actual = 1; \n"
"edge_type_actual = 1; \n"
"value_A_prev = 0;\n"
"value_A_actual = 0;\n"
"value_B_prev = 0;\n"
"value_B_actual = 0;\n"
"direction_actual = 1;\n"
"cntr_max = ParamRealData(0, 0);\n"
"edge_detected = 0;\n"
"cntr = 0;"
                Show          off
              }
              Parameter {
                Variable      "OutputFcn"
                Value         "if(IsMajorStep)\n"
"{\n"
"\tvalue_A_actual = Input(0);\n"
"\tvalue_B_actual = Input(1);\n"
"\tvalue_I_actual = Input(2);\n"
"\t\n"
"\t// Determine the edge source and type\n"
"\tif ((value_A_prev==0)&&(value_A_actual==1))\n"
"\t{\n"
"\t\tedge_actual = 1; //1 for A, 2 for B \n"
"\t\tedge_type_actual = 1; //-1 for down, 1 for up\n"
"\t\tedge_detected = 1;\n"
"\t}\n"
"\telse if ((value_A_prev==1)&&(value_A_actual==0))\n"
"\t{\n"
"\t\tedge_actual = 1; //1 for A, 2 for B \n"
"\t\tedge_type_actual = -1; //-1 for down, 1 for up\n"
"\t\tedge_detected = 1;\n"
"\t}\n"
"\telse if ((value_B_prev==0)&&(value_B_actual==1))\n"
"\t{\n"
"\t\tedge_actual = 2; //1 for A, 2 for B \n"
"\t\tedge_type_actual = 1; //-1 for down, 1 for up\n"
"\t\tedge_detected = 1;\n"
"\t}\n"
"\telse if ((value_B_prev==1)&&(value_B_actual==0))\n"
"\t{\n"
"\t\tedge_actual = 2; //1 for A, 2 for B \n"
"\t\tedge_type_actual = -1; //-1 for down, 1 for up\n"
"\t\tedge_detected = 1;\n"
"\t}\n"
"\telse\n"
"\t{\n"
"\t\tedge_detected = 0;\n"
"\t}\t\n"
"\t\n"
"\tif(edge_detected)\n"
"\t{\n"
"\t\t// Determine the direction\n"
"\t\tif(edge_prev == 1)\t\n"
"\t\t{\n"
"\t\t\tif(edge_type_prev == 1)\n"
"\t\t\t{\n"
"\t\t\t\tif(edge_actual==2)\n"
"\t\t\t\t{\n"
"\t\t\t\t\tif(edge_type_actual==1)\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = 1;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t\telse\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = -1;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t}\n"
"\t\t\t\telse\n"
"\t\t\t\t{\n"
"\t\t\t\t\tif(edge_type_actual==-1)\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = -direction_actual;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t}\n"
"\t\t\t}\n"
"\t\t\telse\n"
"\t\t\t{\n"
"\t\t\t\tif(edge_actual==2)\n"
"\t\t\t\t{\n"
"\t\t\t\t\tif(edge_type_actual==-1)\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = 1;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t\telse\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = -1;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t}\n"
"\t\t\t\telse\n"
"\t\t\t\t{\n"
"\t\t\t\t\tdirection_actual = -direction_actual;\n"
"\t\t\t\t}\n"
"\t\t\t}\n"
"\t\t}\n"
"\t\telse\n"
"\t\t{\n"
"\t\t\tif(edge_type_prev==1)\n"
"\t\t\t{\n"
"\t\t\t\tif(edge_actual==1)\n"
"\t\t\t\t{\n"
"\t\t\t\t\tif(edge_type_actual==1)\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = -1;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t\telse\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = 1;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t}\n"
"\t\t\t\telse\n"
"\t\t\t\t{\n"
"\t\t\t\t\tif(edge_type_actual==-1)\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = -direction_actual;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t}\n"
"\t\t\t}\n"
"\t\t\telse\n"
"\t\t\t{\n"
"\t\t\t\tif(edge_actual==1)\n"
"\t\t\t\t{\n"
"\t\t\t\t\tif(edge_type_actual==-1)\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = -1;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t\telse\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = 1;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t}\n"
"\t\t\t\telse\n"
"\t\t\t\t{\n"
"\t\t\t\t\tif(edge_type_actual==1)\n"
"\t\t\t\t\t{\n"
"\t\t\t\t\t\tdirection_actual = -direction_actual;\n"
"\t\t\t\t\t}\n"
"\t\t\t\t}\n"
"\t\t\t}\n"
"\t\t}\t\n"
"\t\t\n"
"\t\t// Update the counter\n"
"\t\tif(direction_actual == 1)\n"
"\t\t{\n"
"\t\t\tcntr = cntr + 1;\n"
"\t\t\tif(cntr > cntr_max)\n"
"\t\t\t{\n"
"\t\t\t\tcntr = 0;\n"
"\t\t\t}\t\n"
"\t\t}\n"
"\t\telse\n"
"\t\t{\n"
"\t\t\tcntr = cntr - 1;\n"
"\t\t\tif(cntr < 0)\n"
"\t\t\t{\n"
"\t\t\t\tcntr = cntr_max;\n"
"\t\t\t}\n"
"\t\t}\t\t\t\t\n"
"\t}\n"
"\t\n"
"\t// Reset the counter with index pulse\n"
"\tif(direction_actual == 1)\n"
"\t{\n"
"\t\tif(value_I_prev == 0 && value_I_actual == 1)\n"
"\t\t{\n"
"\t\t\tcntr = 0;\n"
"\t\t}\t\t\t\t\n"
"\t}\n"
"\telse\n"
"\t{\n"
"\t\tif(value_I_prev == 1 && value_I_actual == 0)\n"
"\t\t{\n"
"\t\t\tcntr = cntr_max;\n"
"\t\t}\n"
"\t\t\t\n"
"\t}\n"
"\t\n"
"\tOutput(0) = cntr;\t\t\n"
"\t\n"
"\tvalue_A_prev = value_A_actual;\n"
"\tvalue_B_prev = value_B_actual;\n"
"\tvalue_I_prev = value_I_actual;\n"
"\tedge_prev = edge_actual;\n"
"\tedge_type_prev = edge_type_actual;\n"
"}\n"
"\n"
                Show          off
              }
              Parameter {
                Variable      "UpdateFcn"
                Value         ""
                Show          off
              }
              Parameter {
                Variable      "DerivativeFcn"
                Value         ""
                Show          off
              }
              Parameter {
                Variable      "TerminateFcn"
                Value         ""
                Show          off
              }
              Parameter {
                Variable      "StoreCustomStateFcn"
                Value         ""
                Show          off
              }
              Parameter {
                Variable      "RestoreCustomStateFcn"
                Value         ""
                Show          off
              }
            }
            Component {
              Type          SignalMux
              Name          "Mux"
              Show          off
              Position      [155, 60]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "3"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "cnt"
              Show          on
              Position      [275, 60]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "4"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "A"
              SrcTerminal   1
              DstComponent  "Mux"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "B"
              SrcTerminal   1
              Points        [120, 90; 120, 60]
              DstComponent  "Mux"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "I"
              SrcTerminal   1
              Points        [130, 130; 130, 70]
              DstComponent  "Mux"
              DstTerminal   4
            }
            Connection {
              Type          Signal
              SrcComponent  "Mux"
              SrcTerminal   1
              DstComponent  "Counter"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Counter"
              SrcTerminal   2
              DstComponent  "cnt"
              DstTerminal   1
            }
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Triggered\nSubsystem"
          SrcTerminal   2
          DstComponent  "ic"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Latch"
          SrcTerminal   1
          DstComponent  "i"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Edge Detection3"
          SrcTerminal   2
          Points        [170, 215]
          DstComponent  "Latch"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Edge Detection2"
          SrcTerminal   2
          Points        [170, 175]
          DstComponent  "Latch"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "Control Task Hit"
          SrcTerminal   1
          DstComponent  "Edge Detection3"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Demux"
          SrcTerminal   2
          DstComponent  "eQEP"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Demux"
          SrcTerminal   3
          DstComponent  "eQEP"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Demux"
          SrcTerminal   4
          Points        [110, 85]
          Branch {
            DstComponent  "eQEP"
            DstTerminal   3
          }
          Branch {
            Points        [110, 130]
            Branch {
              DstComponent  "Triggered\nSubsystem"
              DstTerminal   3
            }
            Branch {
              Points        [110, 175]
              DstComponent  "Edge Detection2"
              DstTerminal   1
            }
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "Demux"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "eQEP"
          SrcTerminal   4
          Points        [180, 75]
          Branch {
            Points        [180, 125]
            DstComponent  "Triggered\nSubsystem"
            DstTerminal   1
          }
          Branch {
            DstComponent  "c"
            DstTerminal   1
          }
        }
      }
    }
    Component {
      Type          TargetCode
      Name          "Capture"
      Show          on
      Position      [40, 795]
      Direction     up
      Flipped       off
      Frame         [-25, -20; 25, 20]
      LabelPosition [0, 23]
      LabelAlign    up
      TargetPortIndices "5"
      SampleTime    "0"
      EnforceBaseTask "1"
      CodeFcnLang   "2"
      CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C2000\""
", \"cap\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
      NonDftCodeFcn "local block = Target.Coder.GetTargetBlock(Block.UserData."
"bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()\n"
      MaskType      "Pulse Capture"
      MaskDescription "Time-stamps edges of a pulse train."
      MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/capture_c2000.html"
      MaskDisplay   "Icon:text('CAP')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates off
      MaskInit      "evts = [evt1 + 1]; % first event does not have 'disabled'"
" option\n"
"rsts = [reset1];\n"
"if evt2 ~= 1\n"
"\tevts = [evts, evt2];\n"
"\trsts = [rsts, reset2];\n"
"\tif evt3 ~= 1\n"
"\t\tevts = [evts, evt3];\n"
"\t\trsts = [rsts, reset3];\n"
"\t\tif evt4 ~= 1\n"
"\t\t\tevts = [evts, evt4];\n"
"\t\t\trsts = [rsts, reset4];\n"
"\t\tend\n"
"\tend\n"
"end\n"
"\n"
"ediv = 1;\n"
"if pre_en ~= 1 \n"
"\tediv = pre_div;\n"
"end\n"
"\n"
"% for offline model\n"
"vsel = 1:numel(evts);\n"
"epol = zeros(1,4);\n"
"rsel = zeros(1,4);\n"
"\n"
"for i = 1:size(evts, 2)\n"
"\tif(evts(i) == 2)\n"
"\t\tepol(i) = 1;\n"
"\tend\n"
"\tif(rsts(i) == 2)\n"
"\t\trsel(i) = 1;\n"
"\tend\n"
"end\n"
"\n"
"captype = type-1;\n"
"\n"
"Tclk = 1/(FsysclkMHz * 1e6);"
      MaskDialogCallback "Dialog:set('pre_div', 'Visible', Dialog:get('pre_en'"
")~='1')\n"
"\n"
"\n"
"\n"
"Dialog:set('evt3', 'Visible', Dialog:get('evt2')~='1')\n"
"Dialog:set('evt4', 'Visible', Dialog:get('evt2')~='1' and Dialog:get('evt3')~"
"='1')\n"
"\n"
"Dialog:set('reset2', 'Visible', Dialog:get('evt2')~='1')\n"
"Dialog:set('reset3', 'Visible', Dialog:get('evt2')~='1' and Dialog:get('evt3'"
")~='1')\n"
"Dialog:set('reset4', 'Visible', Dialog:get('evt2')~='1' and Dialog:get('evt3'"
")~='1' and Dialog:get('evt4')~='1')"
      Parameter {
        Variable      "cap"
        Prompt        "CAP module"
        Type          FixedText
        PossibleValues {"eCAP 1", "eCAP 2", "eCAP 3", "eCAP 4", "eCAP 5", "eCA"
"P 6", "eCAP 7"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "gpio"
        Prompt        "Input GPIO number"
        Type          FreeText
        Value         "10"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "pre_en"
        Prompt        "Prescaling"
        Type          FixedText
        PossibleValues {"Disabled", "Enabled"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "pre_div"
        Prompt        "Prescale value"
        Type          FreeText
        Value         ""
        Show          off
        Tunable       off
        TabName       ""
      }
      Parameter {
        Variable      "evt1"
        Prompt        "Event 1"
        Type          FixedText
        PossibleValues {"Rising", "Falling"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "reset1"
        Prompt        "Reset counter on Event 1"
        Type          Bool
        Value         "2"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "evt2"
        Prompt        "Event 2"
        Type          FixedText
        PossibleValues {"Disabled", "Rising", "Falling"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "reset2"
        Prompt        "Reset counter on Event 2"
        Type          Bool
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "evt3"
        Prompt        "Event 3"
        Type          FixedText
        PossibleValues {"Disabled", "Rising", "Falling"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "reset3"
        Prompt        "Reset counter on Event 3"
        Type          Bool
        Value         "2"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "evt4"
        Prompt        "Event 4"
        Type          FixedText
        PossibleValues {"Disabled", "Rising", "Falling"}
        Value         "1"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "reset4"
        Prompt        "Reset counter on Event 4"
        Type          Bool
        Value         "2"
        Show          off
        Tunable       off
        TabName       "Events"
      }
      Parameter {
        Variable      "FsysclkMHz"
        Prompt        "System clock frequency (SYSCLK) [MHz]"
        Type          FreeText
        Value         "100"
        Show          off
        Tunable       off
        TabName       "Offline only"
      }
      Parameter {
        Variable      "type"
        Prompt        "eCAP type"
        Type          FixedText
        PossibleValues {"Type-0", "Type-1 and above"}
        Value         "2"
        Show          off
        Tunable       off
        TabName       "Offline only"
      }
      Terminal {
        Type          Output
        Position      [29, -10]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 0]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 10]
        Direction     right
      }
      Schematic {
        Location      [291, 143; 1259, 674]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          Output
          Name          "c"
          Show          on
          Position      [800, 420]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "6"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "numel(evts)"
            Show          off
          }
        }
        Component {
          Type          Output
          Name          "v"
          Show          on
          Position      [795, 65]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "2"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "6"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          TargetInput
          Name          "1"
          Show          on
          Position      [45, 40]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          ControlTaskHit
          Name          "Control Task Hit"
          Show          on
          Position      [45, 90]
          Direction     right
          Flipped       off
        }
        Component {
          Type          EdgeDetection
          Name          "Edge Detection1"
          Show          off
          Position      [220, 90]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Direction"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          FsmBlock
          Name          "Event Counter"
          Show          on
          Position      [420, 70]
          Direction     up
          Flipped       off
          Frame         [-50, -20; 50, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          Parameter {
            Variable      "InputVariables"
            Value         "u,e,r"
            Show          off
          }
          Parameter {
            Variable      "InputTypes"
            Value         "1,2,2"
            Show          off
          }
          Parameter {
            Variable      "InternalConstants"
            Value         "Tclk,CapType,NumEvents,epol1,epol2,epol3,epol4"
            Show          off
          }
          Parameter {
            Variable      "InternalConstantValues"
            Value         "Tclk,captype,numel(evts),epol(1),epol(2),epol(3),ep"
"ol(4)"
            Show          off
          }
          Parameter {
            Variable      "InternalVariables"
            Value         "v"
            Show          off
          }
          Parameter {
            Variable      "InternalVariableValues"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "OutputVariables"
            Value         "ectr_a,ectr"
            Show          off
          }
          Parameter {
            Variable      "Declarations"
            Value         ""
            Show          off
          }
          Parameter {
            Variable      "TransitionOrder"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "SampleTime"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "Animate"
            Value         "1"
            Show          off
          }
          FSM {
            Location       [299, 311; 1166, 664]
            ZoomFactor     0.988825
            SliderPosition [0, 0]
            FsmState {
              Name          "Counting"
              Position      [240, 160]
              Frame         [-90, -50; 90, 50]
              Parameter {
                Name     "EnterAction"
                Value    ""
              }
              Parameter {
                Name     "DuringAction"
                Value    ""
              }
              Parameter {
                Name     "ExitAction"
                Value    ""
              }
            }
            FsmState {
              Name          ".PointState"
              Position      [230, 50]
            }
            FsmState {
              Name          "Debounce"
              Position      [730, 160]
              Frame         [-90, -50; 90, 50]
              Parameter {
                Name     "EnterAction"
                Value    ""
              }
              Parameter {
                Name     "DuringAction"
                Value    ""
              }
              Parameter {
                Name     "ExitAction"
                Value    "if((CapType == 0) && (ectr == NumEvents)){\n\tectr ="
" 0;\n}"
              }
            }
            FsmTransition {
              FsmSrcInfo {
                StatePath        ".PointState"
                TerminalLoc      bottom
                TerminalCoord    0.5
                External         on
              }
              FsmDstInfo {
                StatePath        "Counting"
                TerminalLoc      top
                TerminalCoord    0.439024
                External         on
              }
              SegmentLengths      []
              LabelPosition       0.5
              Parameter {
                Name     "Trigger"
                Value    ""
              }
              Parameter {
                Name     "Condition"
                Value    ""
              }
              Parameter {
                Name     "Action"
                Value    "ectr = 0;\nectr_a = 0;"
              }
              Parameter {
                Name     "Priority"
                Value    "1"
              }
            }
            FsmTransition {
              FsmSrcInfo {
                StatePath        "Counting"
                TerminalLoc      right
                TerminalCoord    0.485408
                External         on
              }
              FsmDstInfo {
                StatePath        "Debounce"
                TerminalLoc      left
                TerminalCoord    0.485408
                External         on
              }
              SegmentLengths      []
              LabelPosition       0.485
              Parameter {
                Name     "Trigger"
                Value    "e"
              }
              Parameter {
                Name     "Condition"
                Value    "((ectr==0) && (u==epol1)) || ((ectr==1) && (u==epol2"
")) || ((ectr==2) && (u==epol3)) || ((ectr==3) && (u==epol4))"
              }
              Parameter {
                Name     "Action"
                Value    "ectr++;\nif(ectr_a < NumEvents){\n\tectr_a = ectr;\n"
"}\n\n\t"
              }
              Parameter {
                Name     "Priority"
                Value    "2"
              }
            }
            FsmTransition {
              FsmSrcInfo {
                StatePath        "Debounce"
                TerminalLoc      bottom
                TerminalCoord    0.396796
                External         on
              }
              FsmDstInfo {
                StatePath        "Counting"
                TerminalLoc      bottom
                TerminalCoord    0.58437
                External         on
              }
              SegmentLengths      []
              LabelPosition       0.49
              Parameter {
                Name     "Trigger"
                Value    "AFTER(Tclk)"
              }
              Parameter {
                Name     "Condition"
                Value    ""
              }
              Parameter {
                Name     "Action"
                Value    ""
              }
              Parameter {
                Name     "Priority"
                Value    "1"
              }
            }
            FsmTransition {
              FsmSrcInfo {
                StatePath        "Counting"
                TerminalLoc      left
                TerminalCoord    0.62988
                External         on
              }
              FsmDstInfo {
                StatePath        "Counting"
                TerminalLoc      left
                TerminalCoord    0.304819
                External         on
              }
              SegmentLengths      [-39.77946047076075]
              LabelPosition       0.5
              Parameter {
                Name     "Trigger"
                Value    "r"
              }
              Parameter {
                Name     "Condition"
                Value    "ectr_a == NumEvents"
              }
              Parameter {
                Name     "Action"
                Value    "ectr_a = 0;\nectr = 0;\n"
              }
              Parameter {
                Name     "Priority"
                Value    "1"
              }
            }
          }
        }
        Component {
          Type          Reference
          SrcComponent  "Components/Control/Delays/Pulse Delay"
          Name          "Pulse Delay1"
          Show          off
          Position      [155, 90]
          Direction     up
          Flipped       off
          Frame         [-15, -15; 15, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          Parameter {
            Variable      "T_d"
            Value         "Tclk"
            Show          off
          }
          Parameter {
            Variable      "y_init"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "buffer_size"
            Value         "1024"
            Show          off
          }
          Terminal {
            Type          Output
            Position      [19, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-15, 0]
            Direction     left
          }
        }
        Component {
          Type          Integrator
          Name          "Integrator"
          Show          off
          Position      [355, 420]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "ExternalReset"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "InitialConditionSource"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "x0"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "ShowStatePort"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "EnableWrapping"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "UpperLimit"
            Value         "inf"
            Show          off
          }
          Parameter {
            Variable      "LowerLimit"
            Value         "-inf"
            Show          off
          }
        }
        Component {
          Type          ConstantRelationalOperator
          Name          "Compare to\nConstant"
          Show          off
          Position      [305, 350]
          Direction     right
          Flipped       on
          Frame         [-20, -10; 20, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Operator"
            Value         "5"
            Show          off
          }
          Parameter {
            Variable      "Threshold"
            Value         "2^32"
            Show          on
          }
        }
        Component {
          Type          Constant
          Name          "Constant"
          Show          on
          Position      [285, 445]
          Direction     right
          Flipped       off
          Frame         [-10, -10; 10, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Value"
            Value         "1/Tclk"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "10"
            Show          off
          }
        }
        Component {
          Type          LogicalOperator
          Name          "Logical\nOperator"
          Show          off
          Position      [225, 385]
          Direction     right
          Flipped       on
          Parameter {
            Variable      "Operator"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Inputs"
            Value         "2"
            Show          off
          }
        }
        Component {
          Type          ConstantRelationalOperator
          Name          "Compare to\nConstant1"
          Show          off
          Position      [550, 135]
          Direction     up
          Flipped       on
          Frame         [-10, -20; 10, 20]
          LabelPosition [13, 0]
          LabelAlign    left
          Parameter {
            Variable      "Operator"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "Threshold"
            Value         "[1 2 3 4]"
            Show          on
          }
        }
        Component {
          Type          Subsystem
          Name          "Triggered\nSubsystem"
          Show          off
          Position      [500, 380]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          TreatAsAtomicUnit on
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
            Index         "1"
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
            Index         "1"
          }
          Terminal {
            Type          Input
            Position      [0, -15]
            Direction     up
            Index         "2"
          }
          Schematic {
            Location      [415, 55; 699, 222]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [60, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out1"
              Show          off
              Position      [220, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Trigger
              Name          "Trigger"
              Show          on
              Position      [140, 40]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
              Parameter {
                Variable      "TriggerType"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "ShowOutput"
                Value         "1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In1"
              SrcTerminal   1
              DstComponent  "Out1"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          EdgeDetection
          Name          "Edge Detection2"
          Show          off
          Position      [550, 185]
          Direction     up
          Flipped       on
          Parameter {
            Variable      "Direction"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          Subsystem
          Name          "Triggered\nSubsystem1"
          Show          off
          Position      [535, 415]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          TreatAsAtomicUnit on
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
            Index         "1"
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
            Index         "1"
          }
          Terminal {
            Type          Input
            Position      [0, -15]
            Direction     up
            Index         "2"
          }
          Schematic {
            Location      [415, 55; 699, 222]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [60, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out1"
              Show          off
              Position      [220, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Trigger
              Name          "Trigger"
              Show          on
              Position      [140, 40]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
              Parameter {
                Variable      "TriggerType"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "ShowOutput"
                Value         "1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In1"
              SrcTerminal   1
              DstComponent  "Out1"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          Subsystem
          Name          "Triggered\nSubsystem2"
          Show          off
          Position      [570, 450]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          TreatAsAtomicUnit on
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
            Index         "1"
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
            Index         "1"
          }
          Terminal {
            Type          Input
            Position      [0, -15]
            Direction     up
            Index         "2"
          }
          Schematic {
            Location      [415, 55; 699, 222]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [60, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out1"
              Show          off
              Position      [220, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Trigger
              Name          "Trigger"
              Show          on
              Position      [140, 40]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
              Parameter {
                Variable      "TriggerType"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "ShowOutput"
                Value         "1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In1"
              SrcTerminal   1
              DstComponent  "Out1"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          Subsystem
          Name          "Triggered\nSubsystem3"
          Show          off
          Position      [605, 485]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          TreatAsAtomicUnit on
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
            Index         "1"
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
            Index         "1"
          }
          Terminal {
            Type          Input
            Position      [0, -15]
            Direction     up
            Index         "2"
          }
          Schematic {
            Location      [415, 55; 699, 222]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [60, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out1"
              Show          off
              Position      [220, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Trigger
              Name          "Trigger"
              Show          on
              Position      [140, 40]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
              Parameter {
                Variable      "TriggerType"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "ShowOutput"
                Value         "1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In1"
              SrcTerminal   1
              DstComponent  "Out1"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          SignalDemux
          Name          "Demux"
          Show          off
          Position      [550, 325]
          Direction     up
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "4"
            Show          off
          }
        }
        Component {
          Type          LogicalOperator
          Name          "Logical\nOperator1"
          Show          off
          Position      [365, 235]
          Direction     down
          Flipped       on
          Parameter {
            Variable      "Operator"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Inputs"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          Gain
          Name          "Gain"
          Show          off
          Position      [430, 235]
          Direction     right
          Flipped       on
          Parameter {
            Variable      "K"
            Value         "rsel"
            Show          on
          }
          Parameter {
            Variable      "Multiplication"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "DataType"
            Value         "11"
            Show          off
          }
        }
        Component {
          Type          SignalSelector
          Name          "Cont\nSelector"
          Show          off
          Position      [740, 420]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "InputWidth"
            Value         "4"
            Show          off
          }
          Parameter {
            Variable      "OutputIndices"
            Value         "vsel"
            Show          on
          }
        }
        Component {
          Type          SignalMux
          Name          "Mux1"
          Show          off
          Position      [675, 420]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Width"
            Value         "4"
            Show          off
          }
        }
        Component {
          Type          ConstantRelationalOperator
          Name          "Compare to\nConstant2"
          Show          off
          Position      [625, 65]
          Direction     left
          Flipped       on
          Frame         [-20, -10; 20, 10]
          LabelPosition [0, -13]
          LabelAlign    down
          Parameter {
            Variable      "Operator"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "Threshold"
            Value         "numel(evts)"
            Show          on
          }
        }
        Component {
          Type          Reference
          SrcComponent  "Components/Control/Discontinuous/Quantizer"
          Name          "Quantizer"
          Show          off
          Position      [415, 380]
          Direction     up
          Flipped       off
          Frame         [-15, -15; 15, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          Parameter {
            Variable      "q"
            Value         "1"
            Show          on
          }
          Parameter {
            Variable      "stepDetection"
            Value         "1"
            Show          off
          }
          Terminal {
            Type          Input
            Position      [-15, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [19, 0]
            Direction     right
          }
        }
        Component {
          Type          Subsystem
          Name          "Pulse Divider"
          Show          on
          Position      [220, 40]
          Direction     up
          Flipped       off
          Frame         [-25, -15; 25, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          MaskInit      "if isnan(N) || N < 2\n"
"\timp = 1;\n"
"else\n"
"\timp = 2;\n"
"end"
          Parameter {
            Variable      "N"
            Prompt        "Period"
            Type          FreeText
            Value         "ediv"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
          }
          Schematic {
            Location      [542, 306; 1207, 605]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [65, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out1"
              Show          off
              Position      [220, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Implementation"
              Show          on
              Position      [145, 80]
              Direction     up
              Flipped       off
              Frame         [-25, -15; 25, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-25, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [29, 0]
                Direction     right
              }
              TerminalNames { "In1", "Out1" }
              Location      [1415, 355; 1856, 553]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "No Divider"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [120, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [195, 40]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                }
                Name          "Divider"
                Schematic {
                  Component {
                    Type          Input
                    Name          "In1"
                    Show          off
                    Position      [145, 35]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "Out1"
                    Show          off
                    Position      [255, 75]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Subsystem
                    Name          "Triggered\nSubsystem"
                    Show          off
                    Position      [195, 75]
                    Direction     up
                    Flipped       off
                    Frame         [-25, -15; 25, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    TreatAsAtomicUnit on
                    SampleTime    "-1"
                    CodeGenDiscretizationMethod "2"
                    CodeGenTarget "Generic"
                    MaskDisplayLang "2"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Output
                      Position      [29, 0]
                      Direction     right
                      Index         "1"
                    }
                    Terminal {
                      Type          Input
                      Position      [0, -15]
                      Direction     up
                      Index         "1"
                    }
                    Schematic {
                      Location      [1236, 905; 1723, 1103]
                      ZoomFactor    1
                      SliderPosition [0, 0]
                      ShowBrowser   off
                      BrowserWidth  100
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [335, 80]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "InitialOutput"
                          Value         "[]"
                          Show          off
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Trigger
                        Name          "Trigger"
                        Show          on
                        Position      [140, 20]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                        Parameter {
                          Variable      "TriggerType"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "ShowOutput"
                          Value         "1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Offset
                        Name          "Offset"
                        Show          off
                        Position      [140, 80]
                        Direction     right
                        Flipped       off
                        Frame         [-20, -10; 20, 10]
                        LabelPosition [0, 13]
                        LabelAlign    up
                        Parameter {
                          Variable      "Offset"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "DataType"
                          Value         "11"
                          Show          off
                        }
                      }
                      Component {
                        Type          SignalSwitch
                        Name          "Switch"
                        Show          on
                        Position      [195, 130]
                        Direction     right
                        Flipped       on
                        Parameter {
                          Variable      "Criteria"
                          Value         "1"
                          Show          off
                        }
                        Parameter {
                          Variable      "Threshold"
                          Value         "N"
                          Show          on
                        }
                      }
                      Component {
                        Type          ConstantRelationalOperator
                        Name          "Compare to\nConstant"
                        Show          off
                        Position      [275, 80]
                        Direction     right
                        Flipped       off
                        Frame         [-20, -10; 20, 10]
                        LabelPosition [0, 13]
                        LabelAlign    up
                        Parameter {
                          Variable      "Operator"
                          Value         "6"
                          Show          off
                        }
                        Parameter {
                          Variable      "Threshold"
                          Value         "N/2"
                          Show          off
                        }
                      }
                      Component {
                        Type          Memory
                        Name          "Memory"
                        Show          off
                        Position      [140, 130]
                        Direction     right
                        Flipped       on
                        Parameter {
                          Variable      "X0"
                          Value         "0"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Compare to\nConstant"
                        SrcTerminal   2
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Offset"
                        SrcTerminal   2
                        Points        [195, 80]
                        Branch {
                          Points        [230, 80]
                          Branch {
                            DstComponent  "Compare to\nConstant"
                            DstTerminal   1
                          }
                          Branch {
                            Points        [230, 135]
                            DstComponent  "Switch"
                            DstTerminal   3
                          }
                        }
                        Branch {
                          DstComponent  "Switch"
                          DstTerminal   4
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Switch"
                        SrcTerminal   1
                        DstComponent  "Memory"
                        DstTerminal   1
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Memory"
                        SrcTerminal   2
                        Points        [95, 130; 95, 80]
                        DstComponent  "Offset"
                        DstTerminal   1
                      }
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "In1"
                    SrcTerminal   1
                    Points        [195, 35]
                    DstComponent  "Triggered\nSubsystem"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Triggered\nSubsystem"
                    SrcTerminal   1
                    DstComponent  "Out1"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "imp"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In1"
              SrcTerminal   1
              DstComponent  "Implementation"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Implementation"
              SrcTerminal   2
              DstComponent  "Out1"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          Reference
          SrcComponent  "Components/Control/Delays/Pulse Delay"
          Name          "Pulse Delay2"
          Show          off
          Position      [155, 40]
          Direction     up
          Flipped       off
          Frame         [-15, -15; 15, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          Parameter {
            Variable      "T_d"
            Value         "Tclk"
            Show          off
          }
          Parameter {
            Variable      "y_init"
            Value         "0"
            Show          off
          }
          Parameter {
            Variable      "buffer_size"
            Value         "1024"
            Show          off
          }
          Terminal {
            Type          Output
            Position      [19, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-15, 0]
            Direction     left
          }
        }
        Component {
          Type          Output
          Name          "o"
          Show          on
          Position      [440, 290]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Index"
            Value         "3"
            Show          on
          }
          Parameter {
            Variable      "DataType"
            Value         "10"
            Show          off
          }
          Parameter {
            Variable      "Width"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          EdgeDetection
          Name          "Edge Detection3"
          Show          off
          Position      [310, 70]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Direction"
            Value         "3"
            Show          off
          }
        }
        Component {
          Type          Subsystem
          Name          "Latch"
          Show          on
          Position      [370, 290]
          Direction     up
          Flipped       off
          Frame         [-20, -20; 20, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          SampleTime    "-1"
          CodeGenDiscretizationMethod "2"
          CodeGenTarget "Generic"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates on
          Terminal {
            Type          Output
            Position      [24, 0]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-20, -5]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [-20, 10]
            Direction     left
          }
          Schematic {
            Location      [960, 468; 1296, 743]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Memory
              Name          "Memory"
              Show          off
              Position      [210, 185]
              Direction     right
              Flipped       on
              Parameter {
                Variable      "X0"
                Value         "0"
                Show          off
              }
            }
            Component {
              Type          LogicalOperator
              Name          "Logical\nOperator1"
              Show          off
              Position      [210, 100]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "Operator"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          LogicalOperator
              Name          "Logical\nOperator2"
              Show          off
              Position      [210, 150]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "Operator"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          LogicalOperator
              Name          "Logical\nOperator3"
              Show          off
              Position      [80, 170]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "Operator"
                Value         "6"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          LogicalOperator
              Name          "Logical\nOperator4"
              Show          off
              Position      [140, 135]
              Direction     up
              Flipped       off
              Parameter {
                Variable      "Operator"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Inputs"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out"
              Show          on
              Position      [290, 100]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "Rst"
              Show          on
              Position      [25, 170]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "In"
              Show          on
              Position      [25, 95]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Logical\nOperator2"
              SrcTerminal   1
              Points        [245, 150; 245, 185]
              DstComponent  "Memory"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Memory"
              SrcTerminal   2
              Points        [175, 185]
              Branch {
                Points        [175, 105]
                DstComponent  "Logical\nOperator1"
                DstTerminal   3
              }
              Branch {
                Points        [110, 185]
                DstComponent  "Logical\nOperator4"
                DstTerminal   3
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Logical\nOperator4"
              SrcTerminal   1
              Points        [170, 135; 170, 145]
              DstComponent  "Logical\nOperator2"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Logical\nOperator3"
              SrcTerminal   1
              Points        [160, 170; 160, 155]
              DstComponent  "Logical\nOperator2"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Logical\nOperator1"
              SrcTerminal   1
              DstComponent  "Out"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Rst"
              SrcTerminal   1
              DstComponent  "Logical\nOperator3"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "In"
              SrcTerminal   1
              Points        [110, 95]
              Branch {
                DstComponent  "Logical\nOperator1"
                DstTerminal   2
              }
              Branch {
                DstComponent  "Logical\nOperator4"
                DstTerminal   2
              }
            }
          }
        }
        Component {
          Type          EdgeDetection
          Name          "Edge Detection4"
          Show          off
          Position      [305, 310]
          Direction     right
          Flipped       off
          Parameter {
            Variable      "Direction"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          ConstantRelationalOperator
          Name          "Compare to\nConstant3"
          Show          off
          Position      [495, 135]
          Direction     down
          Flipped       off
          Frame         [-10, -20; 10, 20]
          LabelPosition [-13, 0]
          LabelAlign    right
          Parameter {
            Variable      "Operator"
            Value         "1"
            Show          off
          }
          Parameter {
            Variable      "Threshold"
            Value         "[1 2 3 4]"
            Show          on
          }
        }
        Component {
          Type          EdgeDetection
          Name          "Edge Detection5"
          Show          off
          Position      [495, 185]
          Direction     up
          Flipped       on
          Parameter {
            Variable      "Direction"
            Value         "1"
            Show          off
          }
        }
        Component {
          Type          ConstantRelationalOperator
          Name          "Compare to\nConstant4"
          Show          off
          Position      [100, 40]
          Direction     right
          Flipped       off
          Frame         [-20, -10; 20, 10]
          LabelPosition [0, 13]
          LabelAlign    up
          Parameter {
            Variable      "Operator"
            Value         "2"
            Show          off
          }
          Parameter {
            Variable      "Threshold"
            Value         "0"
            Show          off
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Constant"
          SrcTerminal   1
          Points        [315, 445; 315, 415]
          DstComponent  "Integrator"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Logical\nOperator"
          SrcTerminal   1
          Points        [225, 425]
          DstComponent  "Integrator"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "Compare to\nConstant1"
          SrcTerminal   2
          DstComponent  "Edge Detection2"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Demux"
          SrcTerminal   4
          Points        [555, 350; 570, 350]
          DstComponent  "Triggered\nSubsystem2"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "Demux"
          SrcTerminal   5
          Points        [565, 340; 605, 340]
          DstComponent  "Triggered\nSubsystem3"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "Demux"
          SrcTerminal   2
          Points        [535, 340; 500, 340]
          DstComponent  "Triggered\nSubsystem"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "Demux"
          SrcTerminal   3
          Points        [545, 350; 535, 350]
          DstComponent  "Triggered\nSubsystem1"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "Gain"
          SrcTerminal   2
          DstComponent  "Logical\nOperator1"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Triggered\nSubsystem"
          SrcTerminal   2
          Points        [650, 380; 650, 405]
          DstComponent  "Mux1"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Triggered\nSubsystem1"
          SrcTerminal   2
          DstComponent  "Mux1"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "Triggered\nSubsystem2"
          SrcTerminal   2
          Points        [650, 450; 650, 425]
          DstComponent  "Mux1"
          DstTerminal   4
        }
        Connection {
          Type          Signal
          SrcComponent  "Triggered\nSubsystem3"
          SrcTerminal   2
          Points        [660, 485]
          DstComponent  "Mux1"
          DstTerminal   5
        }
        Connection {
          Type          Signal
          SrcComponent  "Mux1"
          SrcTerminal   1
          DstComponent  "Cont\nSelector"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Cont\nSelector"
          SrcTerminal   2
          DstComponent  "c"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Pulse Delay2"
          SrcTerminal   1
          DstComponent  "Pulse Divider"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Pulse Delay1"
          SrcTerminal   1
          DstComponent  "Edge Detection1"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Quantizer"
          SrcTerminal   2
          Points        [455, 380]
          Branch {
            DstComponent  "Triggered\nSubsystem"
            DstTerminal   1
          }
          Branch {
            Points        [455, 415]
            Branch {
              DstComponent  "Triggered\nSubsystem1"
              DstTerminal   1
            }
            Branch {
              Points        [455, 450]
              Branch {
                DstComponent  "Triggered\nSubsystem2"
                DstTerminal   1
              }
              Branch {
                Points        [455, 485]
                DstComponent  "Triggered\nSubsystem3"
                DstTerminal   1
              }
            }
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Compare to\nConstant2"
          SrcTerminal   2
          DstComponent  "v"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Control Task Hit"
          SrcTerminal   1
          DstComponent  "Pulse Delay1"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Edge Detection3"
          SrcTerminal   2
          DstComponent  "Event Counter"
          DstTerminal   4
        }
        Connection {
          Type          Signal
          SrcComponent  "Edge Detection4"
          SrcTerminal   2
          Points        [335, 310]
          DstComponent  "Latch"
          DstTerminal   3
        }
        Connection {
          Type          Signal
          SrcComponent  "Logical\nOperator1"
          SrcTerminal   1
          Points        [220, 235]
          DstComponent  "Logical\nOperator"
          DstTerminal   2
        }
        Connection {
          Type          Signal
          SrcComponent  "Integrator"
          SrcTerminal   4
          Points        [355, 380]
          Branch {
            DstComponent  "Quantizer"
            DstTerminal   1
          }
          Branch {
            Points        [355, 350]
            DstComponent  "Compare to\nConstant"
            DstTerminal   1
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Compare to\nConstant"
          SrcTerminal   2
          Points        [265, 350]
          Branch {
            Points        [230, 350]
            DstComponent  "Logical\nOperator"
            DstTerminal   3
          }
          Branch {
            Points        [265, 310]
            DstComponent  "Edge Detection4"
            DstTerminal   1
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Latch"
          SrcTerminal   1
          DstComponent  "o"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Edge Detection2"
          SrcTerminal   2
          DstComponent  "Demux"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Event Counter"
          SrcTerminal   1
          Points        [550, 65]
          Branch {
            DstComponent  "Compare to\nConstant2"
            DstTerminal   1
          }
          Branch {
            DstComponent  "Compare to\nConstant1"
            DstTerminal   1
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Event Counter"
          SrcTerminal   2
          Points        [495, 75]
          DstComponent  "Compare to\nConstant3"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Compare to\nConstant3"
          SrcTerminal   2
          DstComponent  "Edge Detection5"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Edge Detection5"
          SrcTerminal   2
          Points        [495, 235]
          DstComponent  "Gain"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Pulse Divider"
          SrcTerminal   2
          Points        [270, 40]
          Branch {
            Points        [270, 70]
            DstComponent  "Edge Detection3"
            DstTerminal   1
          }
          Branch {
            Points        [340, 40; 340, 60]
            DstComponent  "Event Counter"
            DstTerminal   3
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "Edge Detection1"
          SrcTerminal   2
          Points        [265, 90]
          Branch {
            Points        [340, 90; 340, 80]
            DstComponent  "Event Counter"
            DstTerminal   5
          }
          Branch {
            Points        [265, 285]
            DstComponent  "Latch"
            DstTerminal   2
          }
        }
        Connection {
          Type          Signal
          SrcComponent  "1"
          SrcTerminal   1
          DstComponent  "Compare to\nConstant4"
          DstTerminal   1
        }
        Connection {
          Type          Signal
          SrcComponent  "Compare to\nConstant4"
          SrcTerminal   2
          DstComponent  "Pulse Delay2"
          DstTerminal   2
        }
      }
    }
    Component {
      Type          Subsystem
      Name          "Application Specific"
      Show          on
      Position      [40, 860]
      Direction     up
      Flipped       off
      Frame         [-25, -15; 25, 15]
      LabelPosition [0, 18]
      LabelAlign    up
      SampleTime    "-1"
      CodeGenDiscretizationMethod "2"
      CodeGenTarget "Generic"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      Terminal {
        Type          Output
        Position      [29, -5]
        Direction     right
      }
      Terminal {
        Type          Input
        Position      [-25, -5]
        Direction     left
      }
      Schematic {
        Location      [777, 52; 1060, 220]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetCode
          Name          "Peak Current Controller"
          Show          on
          Position      [65, 40]
          Direction     up
          Flipped       off
          Frame         [-35, -25; 35, 25]
          LabelPosition [0, 28]
          LabelAlign    up
          TargetPortIndices "1 2"
          SampleTime    "0"
          EnforceBaseTask "1"
          CodeFcnLang   "2"
          CodeFcn       "local block = Target.Coder.CreateTargetBlock(\"TI C20"
"00\", \"epwm_basic_pcc\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
          NonDftCodeFcn "local block = Target.Coder.GetTargetBlock(Block.UserD"
"ata.bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()\n"
          MaskType      "Peak Current Controller"
          MaskDescription "Implement peak current control with ramp compensati"
"on."
          MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/pcc_c2000.html"
          MaskDisplay   "Icon:text('Ipk\\nController')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates off
          MaskInit      "% TspMinVer = '1.4'\n"
"% TspMaxVer = '1.4'\n"
"% EnablePhaseSyncFromDownstream = 1\n"
"% SynchronizationInput = '{synco = {type = \"gpio1\", unit = 12}}'\n"
"% SynchronizationInput = '{synco = {type = \"pwm\", unit = 1}}'\n"
"\n"
"if OutMode == 2,\n"
"\tDelay = 0; % default value for single output\n"
"end\n"
"Type = 1; % sawtooth carrier\n"
"\n"
"if numel(PwmUnit) ~= 1 || any(floor(PwmUnit) ~= PwmUnit) || any(PwmUnit < 0),"
"\n"
"  error('\"PwmUnit generator\" must be a scalar positive or zero integer.')\n"
"end\n"
"\n"
"if numel(CarrierFreq) ~= 1,\n"
"  error('\"Carrier frequency\" must be scalar.');\n"
"end\n"
"\n"
"if any(CarrierFreq <= 0)\n"
"\terror('\"Carrier frequency [Hz]\" must be greater than 0.')\n"
"end\n"
"\n"
"if any(CarrierFreq > 25e6)\n"
"\terror('\"Carrier frequency [Hz]\" greater than 25 MHz exceeds toggling freq"
"uency of GPIO pins, please reduce the carrier frequency.')\n"
"end\n"
"\n"
"if any(CarrierFreq < 0.01)\n"
"   plecs('warning', '\"Carrier frequency [Hz]\" lower than 0.01 Hz, please us"
"e \"Digital Out\" to generate low frequency PWM.')\n"
"end\n"
"\n"
"if numel(CarrierFreqTol) ~= 1,\n"
"  error('\"Frequency tolerance\" must be scalar.');\n"
"end\n"
"\n"
"if numel(Delay) ~= 1,\n"
"  error('\"Blanking time\" must be scalar.');\n"
"end\n"
"\n"
"if any(Delay < 0)\n"
"\terror('\"Blanking time [s]\" must be greater than zero seconds.')\n"
"end\n"
"\n"
"if any(Delay >= (1/CarrierFreq/2))\n"
"\terror(['\"Blanking time [s]\" should not be larger than half the carrier pe"
"riod ' num2str(1/CarrierFreq/2) 's.'])\n"
"end\n"
"\n"
"if numel(Type) ~= 1,\n"
"  error('\"Carrier type\" must be scalar.');\n"
"end\n"
"\n"
"if numel(Polarity) ~= 1,\n"
"  error('\"Polarity\" must be scalar.');\n"
"end\n"
"\n"
"if numel(SocSel) ~= 1,\n"
"  error('\"ADC trigger\" must be scalar.');\n"
"end\n"
"\n"
"if numel(IntSel) ~= 1,\n"
"  error('\"Task trigger\" must be scalar.');\n"
"end\n"
"\n"
"if ~isnan(SocSelPeriod) && ((floor(SocSelPeriod) ~= SocSelPeriod) || (SocSelP"
"eriod < 1))\n"
"  error('\"ADC trigger divider\" must be an integer and greater than zero.');"
"\n"
"end\n"
"\n"
"if ~isnan(IntSelPeriod) && ((floor(IntSelPeriod) ~= IntSelPeriod) || (IntSelP"
"eriod < 1))\n"
"  error('\"Task trigger divider\" must be an integer and greater than zero.')"
";\n"
"end\n"
"\n"
"if numel(RampOffset) ~= 1,\n"
"  error('\"Ramp offset\" must be scalar.');\n"
"end\n"
"\n"
"if (numel(RampSlope) ~= 1) || (RampSlope < 0),\n"
"  error('\"Ramp slope\" must be a nonnegative scalar.');\n"
"end\n"
"\n"
"if numel(SenseGain) ~= 1,\n"
"  error('\"Sense gain\" must be scalar.');\n"
"end\n"
"\n"
"if (numel(LeadingEdgeBlanking) ~= 1) || (LeadingEdgeBlanking < 0),\n"
"  error('\"Leading edge blanking time\" must a nonnegative scalar.');\n"
"end\n"
"\n"
"if (AdcChannel == 2) && (isnan(AdcChannel) || (numel(AdcChannel) ~= 1) || (fl"
"oor(AdcChannel) ~= AdcChannel) || (AdcChannel < 0))\n"
"  error('\"ADC input channel\" must be an integer and greater than zero.');\n"
"end\n"
"\n"
"if (SenseInputType == 2) && (isnan(PgaUnit) || (numel(PgaUnit) ~= 1) || (floo"
"r(PgaUnit) ~= PgaUnit) || (PgaUnit < 1))\n"
"  error('\"PGA unit\" must be an integer and greater than one.');\n"
"end\n"
"\n"
"if isnan(SysClkMHz) || (numel(SysClkMHz) ~= 1) || (SysClkMHz <= 0.0),\n"
"  error('\"System clock\" must be a positive scalar.');\n"
"end\n"
"\n"
"% for offline model\n"
"i_slope = RampSlope / CarrierFreq;\n"
"\n"
"if RampSlope > 0\n"
"  rampSel = 2;\n"
"else\n"
"  rampSel = 1;\n"
"end\n"
"\n"
"if LeadingEdgeBlanking > 0.0\n"
"   leadingEdgeDutyPercent = LeadingEdgeBlanking/(1/CarrierFreq)*100;\n"
"else\n"
"   leadingEdgeDutyPercent = 1;\n"
"end\n"
"\n"
"maxDutyPercent = 90;\n"
"if leadingEdgeDutyPercent >= maxDutyPercent,\n"
"  leadingEdgeDutyPercent = maxDutyPercent - 1;\n"
"end\n"
" \n"
"fSysClk = SysClkMHz*1e6;\n"
          MaskDialogCallback "Block:showTerminal('Task', Dialog:get('IntSel')~"
"='1')\n"
"Block:showTerminal('ADC', Dialog:get('SocSel')~='1')\n"
"\n"
"Dialog:set('IntSelPeriod', 'Visible', Dialog:get('IntSel')~='1')\n"
"Dialog:set('SocSelPeriod', 'Visible', Dialog:get('SocSel')~='1')\n"
"\n"
"Dialog:set('Delay', 'Visible', Dialog:get('OutMode')=='1')\n"
"Dialog:set('Polarity', 'Visible', Dialog:get('OutMode')~='3')\n"
"\n"
"local parent = Block:get(\"Parent\")\n"
"local blockName = Block:get(\"Name\")\n"
"parent:showTerminal(\"%s / Out \" % { blockName }, Dialog:get('OutMode')~='3'"
")\n"
"\n"
"\n"
"Dialog:set('AdcUnit', 'Visible', Dialog:get('SenseInputType')=='1')\n"
"Dialog:set('AdcChannel', 'Visible', Dialog:get('SenseInputType')=='1')\n"
"Dialog:set('PgaUnit', 'Visible', Dialog:get('SenseInputType')=='2')"
          Parameter {
            Variable      "PwmUnit"
            Prompt        "PWM generator [1 .. N]"
            Type          FreeText
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "CarrierFreq"
            Prompt        "Carrier frequency [Hz]"
            Type          FreeText
            Value         "10e3"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "CarrierFreqTol"
            Prompt        "Frequency tolerance"
            Type          FixedText
            PossibleValues {"Enforce exact value", "Round to closest achievabl"
"e value"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "SenseInputType"
            Prompt        "Sense input"
            Type          FixedText
            PossibleValues {"ADC input", "PGA input"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "AdcUnit"
            Prompt        "ADC unit"
            Type          FixedText
            PossibleValues {"A", "B", "C", "D"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "PgaUnit"
            Prompt        "PGA unit"
            Type          FreeText
            Value         ""
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "AdcChannel"
            Prompt        "ADC input channel"
            Type          FreeText
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "SenseGain"
            Prompt        "Current sense gain [V/A]"
            Type          FreeText
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "RampSlope"
            Prompt        "Ramp slope [A/s]"
            Type          FreeText
            Value         "0"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "RampOffset"
            Prompt        "Ramp offset [A]"
            Type          FreeText
            Value         "0"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "LeadingEdgeBlanking"
            Prompt        "Leading edge blanking time [s]"
            Type          FreeText
            Value         "0"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "OutMode"
            Prompt        "Mode"
            Type          FixedText
            PossibleValues {"Complementary outputs", "Single output (channel A"
")"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       "Output"
          }
          Parameter {
            Variable      "Delay"
            Prompt        "Blanking time [s]"
            Type          FreeText
            Value         "0"
            Show          off
            Tunable       off
            TabName       "Output"
          }
          Parameter {
            Variable      "Polarity"
            Prompt        "Polarity"
            Type          FixedText
            PossibleValues {"Active state is logic '1'", "Active state is logi"
"c '0'"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       "Output"
          }
          Parameter {
            Variable      "SocSel"
            Prompt        "ADC trigger"
            Type          FixedText
            PossibleValues {"Disabled", "Underflow"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       "Events"
          }
          Parameter {
            Variable      "SocSelPeriod"
            Prompt        "ADC trigger divider"
            Type          FreeText
            Value         ""
            Show          off
            Tunable       off
            TabName       "Events"
          }
          Parameter {
            Variable      "IntSel"
            Prompt        "Task trigger"
            Type          FixedText
            PossibleValues {"Disabled", "Underflow"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       "Events"
          }
          Parameter {
            Variable      "IntSelPeriod"
            Prompt        "Task trigger divider"
            Type          FreeText
            Value         ""
            Show          off
            Tunable       off
            TabName       "Events"
          }
          Parameter {
            Variable      "SysClkMHz"
            Prompt        "System clock frequency (SYSCLK) [MHz]"
            Type          FreeText
            Value         ""
            Show          off
            Tunable       off
            TabName       "Offline only"
          }
          Terminal {
            Type          Input
            Position      [-35, 0]
            Direction     left
          }
          Terminal {
            Type          EventOutput
            Position      [39, 15]
            Direction     right
          }
          Terminal {
            Type          EventOutput
            Position      [39, -15]
            Direction     right
          }
          Schematic {
            Location      [773, 154; 1468, 564]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          TargetOutput
              Name          "Out"
              Show          on
              Position      [640, 205]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [65, 270]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "HasDirectFeedthrough"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "1"
                Show          off
              }
            }
            Component {
              Type          EventOutput
              Name          "Task"
              Show          on
              Position      [635, 75]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
            }
            Component {
              Type          EventOutput
              Name          "ADC"
              Show          on
              Position      [635, 115]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Events"
              Show          on
              Position      [390, 80]
              Direction     up
              Flipped       off
              Frame         [-30, -25; 30, 25]
              LabelPosition [0, 28]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Output
                Position      [34, -10]
                Direction     right
              }
              Terminal {
                Type          Output
                Position      [34, 0]
                Direction     right
              }
              Terminal {
                Type          Output
                Position      [34, 10]
                Direction     right
              }
              TerminalNames { "z", "p", "zp" }
              Location      [460, 354; 897, 813]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "sawtooth"
                Schematic {
                  Component {
                    Type          Output
                    Name          "z"
                    Show          on
                    Position      [250, 130]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "p"
                    Show          on
                    Position      [250, 175]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          PulseGenerator
                    Name          "Pulse\nGenerator"
                    Show          off
                    Position      [110, 130]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Hi"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Lo"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "f"
                      Value         "CarrierFreq"
                      Show          off
                    }
                    Parameter {
                      Variable      "DutyCycle"
                      Value         "0.5"
                      Show          off
                    }
                    Parameter {
                      Variable      "Delay"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          EdgeDetection
                    Name          "Edge Detection"
                    Show          off
                    Position      [180, 130]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Direction"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "zp"
                    Show          on
                    Position      [250, 220]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Pulse\nGenerator"
                    SrcTerminal   1
                    DstComponent  "Edge Detection"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Edge Detection"
                    SrcTerminal   2
                    Points        [215, 130]
                    Branch {
                      DstComponent  "z"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [215, 175]
                      Branch {
                        DstComponent  "p"
                        DstTerminal   1
                      }
                      Branch {
                        Points        [215, 220]
                        DstComponent  "zp"
                        DstTerminal   1
                      }
                    }
                  }
                }
                Name          "symmetrical"
                Schematic {
                  Component {
                    Type          Output
                    Name          "z"
                    Show          on
                    Position      [275, 145]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          PulseGenerator
                    Name          "Pulse\nGenerator"
                    Show          off
                    Position      [135, 165]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Hi"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Lo"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "f"
                      Value         "CarrierFreq"
                      Show          off
                    }
                    Parameter {
                      Variable      "DutyCycle"
                      Value         "0.5"
                      Show          off
                    }
                    Parameter {
                      Variable      "Delay"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          EdgeDetection
                    Name          "Edge Detection"
                    Show          off
                    Position      [205, 145]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Direction"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          EdgeDetection
                    Name          "Edge Detection1"
                    Show          off
                    Position      [205, 190]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Direction"
                      Value         "2"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "p"
                    Show          on
                    Position      [275, 190]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "zp"
                    Show          on
                    Position      [275, 240]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          PulseGenerator
                    Name          "Pulse\nGenerator1"
                    Show          off
                    Position      [135, 240]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Hi"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Lo"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "f"
                      Value         "2*CarrierFreq"
                      Show          off
                    }
                    Parameter {
                      Variable      "DutyCycle"
                      Value         "0.5"
                      Show          off
                    }
                    Parameter {
                      Variable      "Delay"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          EdgeDetection
                    Name          "Edge Detection2"
                    Show          off
                    Position      [205, 240]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Direction"
                      Value         "1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Edge Detection"
                    SrcTerminal   2
                    DstComponent  "z"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Edge Detection1"
                    SrcTerminal   2
                    DstComponent  "p"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Pulse\nGenerator"
                    SrcTerminal   1
                    Points        [165, 165]
                    Branch {
                      Points        [165, 145]
                      DstComponent  "Edge Detection"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [165, 190]
                      DstComponent  "Edge Detection1"
                      DstTerminal   1
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Pulse\nGenerator1"
                    SrcTerminal   1
                    DstComponent  "Edge Detection2"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Edge Detection2"
                    SrcTerminal   2
                    DstComponent  "zp"
                    DstTerminal   1
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "Type"
                Show          off
              }
            }
            Component {
              Type          SignalSelector
              Name          "Cont\nSelector"
              Show          off
              Position      [505, 75]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "InputWidth"
                Value         "4"
                Show          off
              }
              Parameter {
                Variable      "OutputIndices"
                Value         "[IntSel]"
                Show          off
              }
            }
            Component {
              Type          SignalMux
              Name          "Mux"
              Show          off
              Position      [455, 75]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "4"
                Show          off
              }
            }
            Component {
              Type          SignalSelector
              Name          "Cont\nSelector1"
              Show          off
              Position      [505, 115]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "InputWidth"
                Value         "4"
                Show          off
              }
              Parameter {
                Variable      "OutputIndices"
                Value         "[SocSel]"
                Show          off
              }
            }
            Component {
              Type          Subsystem
              Name          "Pulse Divider1"
              Show          off
              Position      [570, 75]
              Direction     up
              Flipped       off
              Frame         [-25, -15; 25, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              MaskInit      "if isnan(N) || N < 2\n"
"\timp = 1\n"
"else\n"
"\timp = 2\n"
"end"
              Parameter {
                Variable      "N"
                Prompt        "Period"
                Type          FreeText
                Value         "IntSelPeriod"
                Show          off
                Tunable       off
                TabName       ""
              }
              Terminal {
                Type          Input
                Position      [-25, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [29, 0]
                Direction     right
              }
              Schematic {
                Location      [415, 55; 1080, 354]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Component {
                  Type          Input
                  Name          "In1"
                  Show          off
                  Position      [65, 80]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "1"
                    Show          on
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                }
                Component {
                  Type          Output
                  Name          "Out1"
                  Show          off
                  Position      [220, 80]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "2"
                    Show          on
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                }
                Component {
                  Type          ConfigurableSubsystem
                  Name          "Implementation"
                  Show          on
                  Position      [145, 80]
                  Direction     up
                  Flipped       off
                  Frame         [-25, -15; 25, 15]
                  LabelPosition [0, 18]
                  LabelAlign    up
                  SampleTime    "-1"
                  CodeGenDiscretizationMethod "2"
                  CodeGenTarget "Generic"
                  MaskDisplayLang "2"
                  MaskIconFrame on
                  MaskIconOpaque off
                  MaskIconRotates on
                  Terminal {
                    Type          Input
                    Position      [-25, 0]
                    Direction     left
                  }
                  Terminal {
                    Type          Output
                    Position      [29, 0]
                    Direction     right
                  }
                  TerminalNames { "In1", "Out1" }
                  Location      [1350, 735; 1791, 933]
                  ZoomFactor    1
                  SliderPosition [0, 0]
                  ShowBrowser   off
                  BrowserWidth  100
                  Configurations {
                    Name          "No Divider"
                    Schematic {
                      Component {
                        Type          Input
                        Name          "In1"
                        Show          off
                        Position      [120, 40]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [195, 40]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "In1"
                        SrcTerminal   1
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                    }
                    Name          "Divider"
                    Schematic {
                      Component {
                        Type          Input
                        Name          "In1"
                        Show          off
                        Position      [145, 35]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [255, 75]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Subsystem
                        Name          "Triggered\nSubsystem"
                        Show          off
                        Position      [195, 75]
                        Direction     up
                        Flipped       off
                        Frame         [-25, -15; 25, 15]
                        LabelPosition [0, 18]
                        LabelAlign    up
                        TreatAsAtomicUnit on
                        SampleTime    "-1"
                        CodeGenDiscretizationMethod "2"
                        CodeGenTarget "Generic"
                        MaskDisplayLang "2"
                        MaskIconFrame on
                        MaskIconOpaque off
                        MaskIconRotates on
                        Terminal {
                          Type          Output
                          Position      [29, 0]
                          Direction     right
                          Index         "1"
                        }
                        Terminal {
                          Type          Input
                          Position      [0, -15]
                          Direction     up
                          Index         "1"
                        }
                        Schematic {
                          Location      [1350, 756; 1837, 954]
                          ZoomFactor    1
                          SliderPosition [0, 0]
                          ShowBrowser   off
                          BrowserWidth  100
                          Component {
                            Type          Output
                            Name          "Out1"
                            Show          off
                            Position      [335, 80]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "InitialOutput"
                              Value         "[]"
                              Show          off
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Trigger
                            Name          "Trigger"
                            Show          on
                            Position      [140, 20]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                            Parameter {
                              Variable      "TriggerType"
                              Value         "1"
                              Show          off
                            }
                            Parameter {
                              Variable      "ShowOutput"
                              Value         "1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Offset
                            Name          "Offset"
                            Show          off
                            Position      [140, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Offset"
                              Value         "1"
                              Show          off
                            }
                            Parameter {
                              Variable      "DataType"
                              Value         "11"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalSwitch
                            Name          "Switch"
                            Show          on
                            Position      [195, 130]
                            Direction     right
                            Flipped       on
                            Parameter {
                              Variable      "Criteria"
                              Value         "1"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "N"
                              Show          on
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [275, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "1"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "N"
                              Show          off
                            }
                          }
                          Component {
                            Type          Memory
                            Name          "Memory"
                            Show          off
                            Position      [140, 130]
                            Direction     right
                            Flipped       on
                            Parameter {
                              Variable      "X0"
                              Value         "0"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Offset"
                            SrcTerminal   2
                            Points        [195, 80]
                            Branch {
                              Points        [230, 80]
                              Branch {
                                DstComponent  "Compare to\nConstant"
                                DstTerminal   1
                              }
                              Branch {
                                Points        [230, 135]
                                DstComponent  "Switch"
                                DstTerminal   3
                              }
                            }
                            Branch {
                              DstComponent  "Switch"
                              DstTerminal   4
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Out1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Switch"
                            SrcTerminal   1
                            DstComponent  "Memory"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Memory"
                            SrcTerminal   2
                            Points        [95, 130; 95, 80]
                            DstComponent  "Offset"
                            DstTerminal   1
                          }
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "In1"
                        SrcTerminal   1
                        Points        [195, 35]
                        DstComponent  "Triggered\nSubsystem"
                        DstTerminal   2
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Triggered\nSubsystem"
                        SrcTerminal   1
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                    }
                  }
                  Parameter {
                    Variable      "Configuration"
                    Value         "imp"
                    Show          off
                  }
                }
                Connection {
                  Type          Signal
                  SrcComponent  "In1"
                  SrcTerminal   1
                  DstComponent  "Implementation"
                  DstTerminal   1
                }
                Connection {
                  Type          Signal
                  SrcComponent  "Implementation"
                  SrcTerminal   2
                  DstComponent  "Out1"
                  DstTerminal   1
                }
              }
            }
            Component {
              Type          Subsystem
              Name          "Pulse Divider"
              Show          on
              Position      [570, 115]
              Direction     up
              Flipped       off
              Frame         [-25, -15; 25, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              MaskInit      "if isnan(N) || N < 2\n"
"\timp = 1\n"
"else\n"
"\timp = 2\n"
"end"
              Parameter {
                Variable      "N"
                Prompt        "Period"
                Type          FreeText
                Value         "SocSelPeriod"
                Show          off
                Tunable       off
                TabName       ""
              }
              Terminal {
                Type          Input
                Position      [-25, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [29, 0]
                Direction     right
              }
              Schematic {
                Location      [415, 55; 1080, 354]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Component {
                  Type          Input
                  Name          "In1"
                  Show          off
                  Position      [65, 80]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "1"
                    Show          on
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                }
                Component {
                  Type          Output
                  Name          "Out1"
                  Show          off
                  Position      [220, 80]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "2"
                    Show          on
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                }
                Component {
                  Type          ConfigurableSubsystem
                  Name          "Implementation"
                  Show          on
                  Position      [145, 80]
                  Direction     up
                  Flipped       off
                  Frame         [-25, -15; 25, 15]
                  LabelPosition [0, 18]
                  LabelAlign    up
                  SampleTime    "-1"
                  CodeGenDiscretizationMethod "2"
                  CodeGenTarget "Generic"
                  MaskDisplayLang "2"
                  MaskIconFrame on
                  MaskIconOpaque off
                  MaskIconRotates on
                  Terminal {
                    Type          Input
                    Position      [-25, 0]
                    Direction     left
                  }
                  Terminal {
                    Type          Output
                    Position      [29, 0]
                    Direction     right
                  }
                  TerminalNames { "In1", "Out1" }
                  Location      [2017, 828; 2458, 1026]
                  ZoomFactor    1
                  SliderPosition [0, 0]
                  ShowBrowser   off
                  BrowserWidth  100
                  Configurations {
                    Name          "No Divider"
                    Schematic {
                      Component {
                        Type          Input
                        Name          "In1"
                        Show          off
                        Position      [120, 40]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [195, 40]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "In1"
                        SrcTerminal   1
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                    }
                    Name          "Divider"
                    Schematic {
                      Component {
                        Type          Input
                        Name          "In1"
                        Show          off
                        Position      [145, 35]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "1"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Output
                        Name          "Out1"
                        Show          off
                        Position      [255, 75]
                        Direction     right
                        Flipped       off
                        Parameter {
                          Variable      "Index"
                          Value         "2"
                          Show          on
                        }
                        Parameter {
                          Variable      "Width"
                          Value         "-1"
                          Show          off
                        }
                      }
                      Component {
                        Type          Subsystem
                        Name          "Triggered\nSubsystem"
                        Show          off
                        Position      [195, 75]
                        Direction     up
                        Flipped       off
                        Frame         [-25, -15; 25, 15]
                        LabelPosition [0, 18]
                        LabelAlign    up
                        TreatAsAtomicUnit on
                        SampleTime    "-1"
                        CodeGenDiscretizationMethod "2"
                        CodeGenTarget "Generic"
                        MaskDisplayLang "2"
                        MaskIconFrame on
                        MaskIconOpaque off
                        MaskIconRotates on
                        Terminal {
                          Type          Output
                          Position      [29, 0]
                          Direction     right
                          Index         "1"
                        }
                        Terminal {
                          Type          Input
                          Position      [0, -15]
                          Direction     up
                          Index         "1"
                        }
                        Schematic {
                          Location      [2032, 1123; 2519, 1321]
                          ZoomFactor    1
                          SliderPosition [0, 0]
                          ShowBrowser   off
                          BrowserWidth  100
                          Component {
                            Type          Output
                            Name          "Out1"
                            Show          off
                            Position      [335, 80]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "1"
                              Show          on
                            }
                            Parameter {
                              Variable      "InitialOutput"
                              Value         "[]"
                              Show          off
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Trigger
                            Name          "Trigger"
                            Show          on
                            Position      [140, 20]
                            Direction     right
                            Flipped       off
                            Parameter {
                              Variable      "Index"
                              Value         "2"
                              Show          on
                            }
                            Parameter {
                              Variable      "Width"
                              Value         "-1"
                              Show          off
                            }
                            Parameter {
                              Variable      "TriggerType"
                              Value         "1"
                              Show          off
                            }
                            Parameter {
                              Variable      "ShowOutput"
                              Value         "1"
                              Show          off
                            }
                          }
                          Component {
                            Type          Offset
                            Name          "Offset"
                            Show          off
                            Position      [140, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Offset"
                              Value         "1"
                              Show          off
                            }
                            Parameter {
                              Variable      "DataType"
                              Value         "11"
                              Show          off
                            }
                          }
                          Component {
                            Type          SignalSwitch
                            Name          "Switch"
                            Show          on
                            Position      [195, 130]
                            Direction     right
                            Flipped       on
                            Parameter {
                              Variable      "Criteria"
                              Value         "1"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "N"
                              Show          on
                            }
                          }
                          Component {
                            Type          ConstantRelationalOperator
                            Name          "Compare to\nConstant"
                            Show          off
                            Position      [275, 80]
                            Direction     right
                            Flipped       off
                            Frame         [-20, -10; 20, 10]
                            LabelPosition [0, 13]
                            LabelAlign    up
                            Parameter {
                              Variable      "Operator"
                              Value         "1"
                              Show          off
                            }
                            Parameter {
                              Variable      "Threshold"
                              Value         "N"
                              Show          off
                            }
                          }
                          Component {
                            Type          Memory
                            Name          "Memory"
                            Show          off
                            Position      [140, 130]
                            Direction     right
                            Flipped       on
                            Parameter {
                              Variable      "X0"
                              Value         "0"
                              Show          off
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Offset"
                            SrcTerminal   2
                            Points        [195, 80]
                            Branch {
                              Points        [230, 80]
                              Branch {
                                DstComponent  "Compare to\nConstant"
                                DstTerminal   1
                              }
                              Branch {
                                Points        [230, 135]
                                DstComponent  "Switch"
                                DstTerminal   3
                              }
                            }
                            Branch {
                              DstComponent  "Switch"
                              DstTerminal   4
                            }
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Compare to\nConstant"
                            SrcTerminal   2
                            DstComponent  "Out1"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Switch"
                            SrcTerminal   1
                            DstComponent  "Memory"
                            DstTerminal   1
                          }
                          Connection {
                            Type          Signal
                            SrcComponent  "Memory"
                            SrcTerminal   2
                            Points        [95, 130; 95, 80]
                            DstComponent  "Offset"
                            DstTerminal   1
                          }
                        }
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "In1"
                        SrcTerminal   1
                        Points        [195, 35]
                        DstComponent  "Triggered\nSubsystem"
                        DstTerminal   2
                      }
                      Connection {
                        Type          Signal
                        SrcComponent  "Triggered\nSubsystem"
                        SrcTerminal   1
                        DstComponent  "Out1"
                        DstTerminal   1
                      }
                    }
                  }
                  Parameter {
                    Variable      "Configuration"
                    Value         "imp"
                    Show          off
                  }
                }
                Connection {
                  Type          Signal
                  SrcComponent  "In1"
                  SrcTerminal   1
                  DstComponent  "Implementation"
                  DstTerminal   1
                }
                Connection {
                  Type          Signal
                  SrcComponent  "Implementation"
                  SrcTerminal   2
                  DstComponent  "Out1"
                  DstTerminal   1
                }
              }
            }
            Component {
              Type          TargetInput
              Name          "Sense"
              Show          on
              Position      [255, 195]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "1"
                Show          off
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Output Mode"
              Show          on
              Position      [570, 205]
              Direction     up
              Flipped       off
              Frame         [-30, -20; 30, 20]
              LabelPosition [0, 23]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-30, 0]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [34, 0]
                Direction     right
              }
              TerminalNames { "s", "s'" }
              Location      [300, 733; 750, 968]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "Complementary"
                Schematic {
                  Component {
                    Type          Input
                    Name          "s"
                    Show          on
                    Position      [25, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "s'"
                    Show          on
                    Position      [330, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Control/Modulators/Blanking Time"
                    Name          "Blanking Time"
                    Show          on
                    Position      [105, 70]
                    Direction     up
                    Flipped       off
                    Frame         [-20, -20; 20, 20]
                    LabelPosition [0, 23]
                    LabelAlign    up
                    Parameter {
                      Variable      "tb"
                      Value         "Delay"
                      Show          off
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 0]
                      Direction     left
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector"
                    Show          off
                    Position      [260, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "reshape([1:1; 2:2], [1 2])"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConfigurableSubsystem
                    Name          "Sub"
                    Show          on
                    Position      [185, 70]
                    Direction     up
                    Flipped       off
                    Frame         [-20, -20; 20, 20]
                    LabelPosition [0, 23]
                    LabelAlign    up
                    SampleTime    "-1"
                    CodeGenDiscretizationMethod "2"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 0]
                      Direction     left
                    }
                    TerminalNames { "1", "2" }
                    Location      [575, 458; 774, 641]
                    ZoomFactor    1
                    SliderPosition [0, 0]
                    ShowBrowser   off
                    BrowserWidth  100
                    Configurations {
                      Name          "Active state is \"1\""
                      Schematic {
                        Component {
                          Type          ConstantRelationalOperator
                          Name          "Compare to\nConstant"
                          Show          off
                          Position      [95, 80]
                          Direction     right
                          Flipped       off
                          Frame         [-20, -10; 20, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Operator"
                            Value         "6"
                            Show          off
                          }
                          Parameter {
                            Variable      "Threshold"
                            Value         "0"
                            Show          off
                          }
                        }
                        Component {
                          Type          ConstantRelationalOperator
                          Name          "Compare to\nConstant1"
                          Show          off
                          Position      [95, 100]
                          Direction     right
                          Flipped       off
                          Frame         [-20, -10; 20, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Operator"
                            Value         "3"
                            Show          off
                          }
                          Parameter {
                            Variable      "Threshold"
                            Value         "0"
                            Show          off
                          }
                        }
                        Component {
                          Type          SignalMux
                          Name          "Mux"
                          Show          off
                          Position      [135, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Width"
                            Value         "2"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "1"
                          Show          off
                          Position      [175, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "2"
                          Show          off
                          Position      [30, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Compare to\nConstant"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Compare to\nConstant1"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   3
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Mux"
                          SrcTerminal   1
                          DstComponent  "1"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "2"
                          SrcTerminal   1
                          Points        [60, 90]
                          Branch {
                            DstComponent  "Compare to\nConstant1"
                            DstTerminal   1
                          }
                          Branch {
                            DstComponent  "Compare to\nConstant"
                            DstTerminal   1
                          }
                        }
                      }
                      Name          "Active state is \"0\""
                      Schematic {
                        Component {
                          Type          Output
                          Name          "1"
                          Show          off
                          Position      [175, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "2"
                          Show          off
                          Position      [30, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          ConstantRelationalOperator
                          Name          "Compare to\nConstant"
                          Show          off
                          Position      [95, 80]
                          Direction     right
                          Flipped       off
                          Frame         [-20, -10; 20, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Operator"
                            Value         "4"
                            Show          off
                          }
                          Parameter {
                            Variable      "Threshold"
                            Value         "0"
                            Show          off
                          }
                        }
                        Component {
                          Type          ConstantRelationalOperator
                          Name          "Compare to\nConstant1"
                          Show          off
                          Position      [95, 100]
                          Direction     right
                          Flipped       off
                          Frame         [-20, -10; 20, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Operator"
                            Value         "5"
                            Show          off
                          }
                          Parameter {
                            Variable      "Threshold"
                            Value         "0"
                            Show          off
                          }
                        }
                        Component {
                          Type          SignalMux
                          Name          "Mux"
                          Show          off
                          Position      [135, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Width"
                            Value         "2"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Compare to\nConstant"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Compare to\nConstant1"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   3
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "2"
                          SrcTerminal   1
                          Points        [60, 90]
                          Branch {
                            DstComponent  "Compare to\nConstant1"
                            DstTerminal   1
                          }
                          Branch {
                            DstComponent  "Compare to\nConstant"
                            DstTerminal   1
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Mux"
                          SrcTerminal   1
                          DstComponent  "1"
                          DstTerminal   1
                        }
                      }
                    }
                    Parameter {
                      Variable      "Configuration"
                      Value         "Polarity"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "s"
                    SrcTerminal   1
                    DstComponent  "Blanking Time"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Sub"
                    SrcTerminal   1
                    DstComponent  "Cont\nSelector"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Blanking Time"
                    SrcTerminal   1
                    DstComponent  "Sub"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector"
                    SrcTerminal   2
                    DstComponent  "s'"
                    DstTerminal   1
                  }
                }
                Name          "Single"
                Schematic {
                  Component {
                    Type          Input
                    Name          "s"
                    Show          on
                    Position      [25, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "s'"
                    Show          on
                    Position      [480, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector1"
                    Show          off
                    Position      [410, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "[1:2:2]"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Control/Modulators/Blanking Time"
                    Name          "Blanking Time"
                    Show          on
                    Position      [105, 70]
                    Direction     up
                    Flipped       off
                    Frame         [-20, -20; 20, 20]
                    LabelPosition [0, 23]
                    LabelAlign    up
                    Parameter {
                      Variable      "tb"
                      Value         "Delay"
                      Show          off
                    }
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 0]
                      Direction     left
                    }
                  }
                  Component {
                    Type          SignalSelector
                    Name          "Cont\nSelector"
                    Show          off
                    Position      [300, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "InputWidth"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "OutputIndices"
                      Value         "reshape([1:1; 2:2], [1 2])"
                      Show          off
                    }
                  }
                  Component {
                    Type          ConfigurableSubsystem
                    Name          "Sub"
                    Show          on
                    Position      [210, 70]
                    Direction     up
                    Flipped       off
                    Frame         [-20, -20; 20, 20]
                    LabelPosition [0, 23]
                    LabelAlign    up
                    SampleTime    "-1"
                    CodeGenDiscretizationMethod "2"
                    CodeGenTarget "Generic"
                    MaskIconFrame on
                    MaskIconOpaque off
                    MaskIconRotates on
                    Terminal {
                      Type          Output
                      Position      [24, 0]
                      Direction     right
                    }
                    Terminal {
                      Type          Input
                      Position      [-20, 0]
                      Direction     left
                    }
                    TerminalNames { "1", "2" }
                    Location      [980, 466; 1430, 701]
                    ZoomFactor    1
                    SliderPosition [0, 0]
                    ShowBrowser   off
                    BrowserWidth  100
                    Configurations {
                      Name          "Active state is \"1\""
                      Schematic {
                        Component {
                          Type          ConstantRelationalOperator
                          Name          "Compare to\nConstant"
                          Show          off
                          Position      [95, 80]
                          Direction     right
                          Flipped       off
                          Frame         [-20, -10; 20, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Operator"
                            Value         "6"
                            Show          off
                          }
                          Parameter {
                            Variable      "Threshold"
                            Value         "0"
                            Show          off
                          }
                        }
                        Component {
                          Type          ConstantRelationalOperator
                          Name          "Compare to\nConstant1"
                          Show          off
                          Position      [95, 100]
                          Direction     right
                          Flipped       off
                          Frame         [-20, -10; 20, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Operator"
                            Value         "3"
                            Show          off
                          }
                          Parameter {
                            Variable      "Threshold"
                            Value         "0"
                            Show          off
                          }
                        }
                        Component {
                          Type          SignalMux
                          Name          "Mux"
                          Show          off
                          Position      [135, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Width"
                            Value         "2"
                            Show          off
                          }
                        }
                        Component {
                          Type          Output
                          Name          "1"
                          Show          off
                          Position      [175, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "2"
                          Show          off
                          Position      [30, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Compare to\nConstant"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Compare to\nConstant1"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   3
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Mux"
                          SrcTerminal   1
                          DstComponent  "1"
                          DstTerminal   1
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "2"
                          SrcTerminal   1
                          Points        [60, 90]
                          Branch {
                            DstComponent  "Compare to\nConstant1"
                            DstTerminal   1
                          }
                          Branch {
                            DstComponent  "Compare to\nConstant"
                            DstTerminal   1
                          }
                        }
                      }
                      Name          "Active state is \"0\""
                      Schematic {
                        Component {
                          Type          Output
                          Name          "1"
                          Show          off
                          Position      [175, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "1"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          Input
                          Name          "2"
                          Show          off
                          Position      [30, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Index"
                            Value         "2"
                            Show          on
                          }
                          Parameter {
                            Variable      "Width"
                            Value         "-1"
                            Show          off
                          }
                        }
                        Component {
                          Type          ConstantRelationalOperator
                          Name          "Compare to\nConstant"
                          Show          off
                          Position      [95, 80]
                          Direction     right
                          Flipped       off
                          Frame         [-20, -10; 20, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Operator"
                            Value         "4"
                            Show          off
                          }
                          Parameter {
                            Variable      "Threshold"
                            Value         "0"
                            Show          off
                          }
                        }
                        Component {
                          Type          ConstantRelationalOperator
                          Name          "Compare to\nConstant1"
                          Show          off
                          Position      [95, 100]
                          Direction     right
                          Flipped       off
                          Frame         [-20, -10; 20, 10]
                          LabelPosition [0, 13]
                          LabelAlign    up
                          Parameter {
                            Variable      "Operator"
                            Value         "5"
                            Show          off
                          }
                          Parameter {
                            Variable      "Threshold"
                            Value         "0"
                            Show          off
                          }
                        }
                        Component {
                          Type          SignalMux
                          Name          "Mux"
                          Show          off
                          Position      [135, 90]
                          Direction     right
                          Flipped       off
                          Parameter {
                            Variable      "Width"
                            Value         "2"
                            Show          off
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Compare to\nConstant"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   2
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Compare to\nConstant1"
                          SrcTerminal   2
                          DstComponent  "Mux"
                          DstTerminal   3
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "2"
                          SrcTerminal   1
                          Points        [60, 90]
                          Branch {
                            DstComponent  "Compare to\nConstant1"
                            DstTerminal   1
                          }
                          Branch {
                            DstComponent  "Compare to\nConstant"
                            DstTerminal   1
                          }
                        }
                        Connection {
                          Type          Signal
                          SrcComponent  "Mux"
                          SrcTerminal   1
                          DstComponent  "1"
                          DstTerminal   1
                        }
                      }
                    }
                    Parameter {
                      Variable      "Configuration"
                      Value         "Polarity"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "s"
                    SrcTerminal   1
                    DstComponent  "Blanking Time"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector1"
                    SrcTerminal   2
                    DstComponent  "s'"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Sub"
                    SrcTerminal   1
                    DstComponent  "Cont\nSelector"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Cont\nSelector"
                    SrcTerminal   2
                    DstComponent  "Cont\nSelector1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Blanking Time"
                    SrcTerminal   1
                    DstComponent  "Sub"
                    DstTerminal   2
                  }
                }
                Name          "Disabled"
                Schematic {
                  Component {
                    Type          Input
                    Name          "s"
                    Show          on
                    Position      [35, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "s'"
                    Show          on
                    Position      [330, 70]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "OutMode"
                Show          off
              }
            }
            Component {
              Type          Reference
              SrcComponent  "Components/Control/Modulators/Peak Current\\nCont"
"roller"
              Name          "Peak Current\nController"
              Show          on
              Position      [360, 205]
              Direction     up
              Flipped       off
              Frame         [-20, -20; 20, 20]
              LabelPosition [0, 23]
              LabelAlign    up
              Parameter {
                Variable      "fs"
                Value         "CarrierFreq"
                Show          off
              }
              Parameter {
                Variable      "dmin"
                Value         "leadingEdgeDutyPercent"
                Show          off
              }
              Parameter {
                Variable      "dmax"
                Value         "maxDutyPercent"
                Show          off
              }
              Parameter {
                Variable      "Islope"
                Value         "0"
                Show          off
              }
              Terminal {
                Type          Input
                Position      [-20, -10]
                Direction     left
              }
              Terminal {
                Type          Input
                Position      [-20, 10]
                Direction     left
              }
              Terminal {
                Type          Output
                Position      [24, 0]
                Direction     right
              }
            }
            Component {
              Type          Gain
              Name          "Scale"
              Show          off
              Position      [165, 270]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "K"
                Value         "SenseGain"
                Show          on
              }
              Parameter {
                Variable      "Multiplication"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
            }
            Component {
              Type          Gain
              Name          "Gain"
              Show          on
              Position      [440, 205]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "K"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Multiplication"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
            }
            Component {
              Type          Offset
              Name          "Offset"
              Show          on
              Position      [495, 205]
              Direction     right
              Flipped       off
              Frame         [-20, -10; 20, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Offset"
                Value         "-1"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
            }
            Component {
              Type          ConfigurableSubsystem
              Name          "Ramp"
              Show          on
              Position      [255, 295]
              Direction     up
              Flipped       off
              Frame         [-35, -20; 35, 20]
              LabelPosition [0, 23]
              LabelAlign    up
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [0, -20]
                Direction     up
              }
              Terminal {
                Type          Output
                Position      [39, 0]
                Direction     right
              }
              Terminal {
                Type          Input
                Position      [-35, -10]
                Direction     left
              }
              Terminal {
                Type          Input
                Position      [-35, 10]
                Direction     left
              }
              TerminalNames { "reset", "out", "max", "slope" }
              Location      [362, 202; 1473, 489]
              ZoomFactor    1
              SliderPosition [0, 0]
              ShowBrowser   off
              BrowserWidth  100
              Configurations {
                Name          "No Ramp"
                Schematic {
                  Component {
                    Type          Input
                    Name          "reset"
                    Show          on
                    Position      [40, 145]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "out"
                    Show          on
                    Position      [390, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "max"
                    Show          on
                    Position      [40, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Rounding
                    Name          "Rounding2"
                    Show          off
                    Position      [175, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Operation"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Control/Discontinuous/Quantizer"
                    Name          "Quantizer"
                    Show          off
                    Position      [240, 80]
                    Direction     up
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    Parameter {
                      Variable      "q"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "stepDetection"
                      Value         "1"
                      Show          off
                    }
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [19, 0]
                      Direction     right
                    }
                  }
                  Component {
                    Type          Input
                    Name          "slope"
                    Show          on
                    Position      [40, 180]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "4"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Rshunt3"
                    Show          off
                    Position      [325, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "3.3/2^16"
                      Show          on
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain6"
                    Show          off
                    Position      [110, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "2^16/3.3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Assertions/Assert Range"
                    Name          "Assert Range"
                    Show          on
                    Position      [360, 30]
                    Direction     up
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    Parameter {
                      Variable      "upper_limit"
                      Value         "65536"
                      Show          off
                    }
                    Parameter {
                      Variable      "lower_limit"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "include_limits"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "action"
                      Value         "4"
                      Show          off
                    }
                    Parameter {
                      Variable      "message"
                      Value         "Ipk out of range."
                      Show          off
                      Evaluate      off
                    }
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain6"
                    SrcTerminal   2
                    DstComponent  "Rounding2"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "max"
                    SrcTerminal   1
                    DstComponent  "Gain6"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Rounding2"
                    SrcTerminal   2
                    DstComponent  "Quantizer"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Rshunt3"
                    SrcTerminal   2
                    DstComponent  "out"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Quantizer"
                    SrcTerminal   2
                    Points        [285, 80]
                    Branch {
                      DstComponent  "Rshunt3"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [285, 30]
                      DstComponent  "Assert Range"
                      DstTerminal   1
                    }
                  }
                }
                Name          "Ramp"
                Schematic {
                  Component {
                    Type          Gain
                    Name          "Rshunt3"
                    Show          off
                    Position      [1000, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "3.3/2^16"
                      Show          on
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Integrator
                    Name          "Integrator"
                    Show          off
                    Position      [820, 200]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "ExternalReset"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "InitialConditionSource"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "x0"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "ShowStatePort"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "EnableWrapping"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "inf"
                      Show          off
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "-inf"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain1"
                    Show          off
                    Position      [185, 200]
                    Direction     left
                    Flipped       on
                    Parameter {
                      Variable      "K"
                      Value         "1/fSysClk"
                      Show          on
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain2"
                    Show          off
                    Position      [660, 200]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "fSysClk"
                      Show          on
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Rounding
                    Name          "Rounding"
                    Show          off
                    Position      [250, 200]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Operation"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain4"
                    Show          off
                    Position      [115, 200]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "2^16/3.3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Display
                    Name          "Display5"
                    Show          off
                    Position      [405, 220]
                    Direction     up
                    Flipped       off
                    Frame         [-21, -11; 21, 11]
                    LabelPosition [0, 14]
                    LabelAlign    up
                    Parameter {
                      Variable      "Notation"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Precision"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "reset"
                    Show          on
                    Position      [655, 250]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "1"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Output
                    Name          "out"
                    Show          on
                    Position      [1060, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "2"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          SignalSwitch
                    Name          "Switch"
                    Show          off
                    Position      [755, 195]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Criteria"
                      Value         "3"
                      Show          off
                    }
                    Parameter {
                      Variable      "Threshold"
                      Value         "0"
                      Show          off
                    }
                  }
                  Component {
                    Type          Monoflop
                    Name          "Monoflop"
                    Show          off
                    Position      [730, 120]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Trigger"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DurationSource"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Duration"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Rounding"
                      Value         "1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Input
                    Name          "max"
                    Show          on
                    Position      [40, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Component {
                    Type          Sum
                    Name          "Sum"
                    Show          off
                    Position      [820, 80]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "IconShape"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "|+-"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Saturation
                    Name          "Saturation"
                    Show          off
                    Position      [365, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "2^16-1"
                      Show          on
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "0"
                      Show          on
                    }
                  }
                  Component {
                    Type          Sum
                    Name          "Sum1"
                    Show          off
                    Position      [440, 120]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "IconShape"
                      Value         "2"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "-+"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Product
                    Name          "Product"
                    Show          off
                    Position      [505, 125]
                    Direction     up
                    Flipped       off
                    Parameter {
                      Variable      "IconShape"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "Inputs"
                      Value         "*/"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain3"
                    Show          off
                    Position      [660, 125]
                    Direction     left
                    Flipped       on
                    Parameter {
                      Variable      "K"
                      Value         "1/fSysClk"
                      Show          on
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Rounding
                    Name          "Rounding1"
                    Show          off
                    Position      [550, 125]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Operation"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Saturation
                    Name          "Saturation1"
                    Show          off
                    Position      [600, 125]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "2^13-1"
                      Show          on
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "0"
                      Show          on
                    }
                  }
                  Component {
                    Type          Rounding
                    Name          "Rounding2"
                    Show          off
                    Position      [180, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Operation"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Saturation
                    Name          "Saturation2"
                    Show          off
                    Position      [245, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "inf"
                      Show          on
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "0"
                      Show          on
                    }
                  }
                  Component {
                    Type          Gain
                    Name          "Gain5"
                    Show          off
                    Position      [115, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "K"
                      Value         "2^16/3.3"
                      Show          on
                    }
                    Parameter {
                      Variable      "Multiplication"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "DataType"
                      Value         "10"
                      Show          off
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Control/Discontinuous/Quantizer"
                    Name          "Quantizer"
                    Show          off
                    Position      [935, 80]
                    Direction     up
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    Parameter {
                      Variable      "q"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "stepDetection"
                      Value         "1"
                      Show          off
                    }
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                    }
                    Terminal {
                      Type          Output
                      Position      [19, 0]
                      Direction     right
                    }
                  }
                  Component {
                    Type          Reference
                    SrcComponent  "Components/Assertions/Assert Range"
                    Name          "Assert Range"
                    Show          on
                    Position      [1010, 30]
                    Direction     up
                    Flipped       off
                    Frame         [-15, -15; 15, 15]
                    LabelPosition [0, 18]
                    LabelAlign    up
                    Parameter {
                      Variable      "upper_limit"
                      Value         "65536"
                      Show          off
                    }
                    Parameter {
                      Variable      "lower_limit"
                      Value         "0"
                      Show          off
                    }
                    Parameter {
                      Variable      "include_limits"
                      Value         "1"
                      Show          off
                    }
                    Parameter {
                      Variable      "action"
                      Value         "4"
                      Show          off
                    }
                    Parameter {
                      Variable      "message"
                      Value         "Ipk out of range."
                      Show          off
                      Evaluate      off
                    }
                    Terminal {
                      Type          Input
                      Position      [-15, 0]
                      Direction     left
                    }
                  }
                  Component {
                    Type          Saturation
                    Name          "Saturation3"
                    Show          off
                    Position      [870, 80]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "UpperLimit"
                      Value         "inf"
                      Show          on
                    }
                    Parameter {
                      Variable      "LowerLimit"
                      Value         "0"
                      Show          on
                    }
                  }
                  Component {
                    Type          Input
                    Name          "slope"
                    Show          on
                    Position      [40, 200]
                    Direction     right
                    Flipped       off
                    Parameter {
                      Variable      "Index"
                      Value         "4"
                      Show          on
                    }
                    Parameter {
                      Variable      "Width"
                      Value         "-1"
                      Show          off
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain4"
                    SrcTerminal   2
                    DstComponent  "Gain1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Switch"
                    SrcTerminal   1
                    DstComponent  "Integrator"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Monoflop"
                    SrcTerminal   2
                    Points        [755, 120]
                    DstComponent  "Switch"
                    DstTerminal   4
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain2"
                    SrcTerminal   2
                    DstComponent  "Switch"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "reset"
                    SrcTerminal   1
                    Points        [700, 250]
                    Branch {
                      Points        [790, 250]
                      DstComponent  "Integrator"
                      DstTerminal   3
                    }
                    Branch {
                      DstComponent  "Monoflop"
                      DstTerminal   1
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "max"
                    SrcTerminal   1
                    DstComponent  "Gain5"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Rshunt3"
                    SrcTerminal   2
                    DstComponent  "out"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Sum1"
                    SrcTerminal   1
                    DstComponent  "Product"
                    DstTerminal   2
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain3"
                    SrcTerminal   2
                    DstComponent  "Monoflop"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain1"
                    SrcTerminal   2
                    DstComponent  "Rounding"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "slope"
                    SrcTerminal   1
                    DstComponent  "Gain4"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Product"
                    SrcTerminal   1
                    DstComponent  "Rounding1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Rounding1"
                    SrcTerminal   2
                    DstComponent  "Saturation1"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Saturation1"
                    SrcTerminal   2
                    DstComponent  "Gain3"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Gain5"
                    SrcTerminal   2
                    DstComponent  "Rounding2"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Saturation2"
                    SrcTerminal   2
                    Points        [300, 80]
                    Branch {
                      DstComponent  "Saturation"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [300, 145]
                      DstComponent  "Sum1"
                      DstTerminal   3
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Integrator"
                    SrcTerminal   4
                    DstComponent  "Sum"
                    DstTerminal   3
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Saturation"
                    SrcTerminal   2
                    Points        [440, 80]
                    Branch {
                      DstComponent  "Sum"
                      DstTerminal   2
                    }
                    Branch {
                      DstComponent  "Sum1"
                      DstTerminal   2
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Rounding2"
                    SrcTerminal   2
                    DstComponent  "Saturation2"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Rounding"
                    SrcTerminal   2
                    Points        [360, 200]
                    Branch {
                      Points        [470, 200]
                      Branch {
                        DstComponent  "Gain2"
                        DstTerminal   1
                      }
                      Branch {
                        Points        [470, 130]
                        DstComponent  "Product"
                        DstTerminal   3
                      }
                    }
                    Branch {
                      Points        [360, 220]
                      DstComponent  "Display5"
                      DstTerminal   1
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Quantizer"
                    SrcTerminal   2
                    Points        [965, 80]
                    Branch {
                      DstComponent  "Rshunt3"
                      DstTerminal   1
                    }
                    Branch {
                      Points        [965, 30]
                      DstComponent  "Assert Range"
                      DstTerminal   1
                    }
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Sum"
                    SrcTerminal   1
                    DstComponent  "Saturation3"
                    DstTerminal   1
                  }
                  Connection {
                    Type          Signal
                    SrcComponent  "Saturation3"
                    SrcTerminal   2
                    DstComponent  "Quantizer"
                    DstTerminal   1
                  }
                  Annotation {
                    Name          "DAC Decrement value\n|\nv"
                    Position      [360, 175]
                  } 
                }
              }
              Parameter {
                Variable      "Configuration"
                Value         "rampSel"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Ramp1"
              Show          off
              Position      [65, 320]
              Direction     right
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "RampSlope"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
            }
            Component {
              Type          Gain
              Name          "Gain6"
              Show          off
              Position      [165, 320]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "K"
                Value         "SenseGain"
                Show          on
              }
              Parameter {
                Variable      "Multiplication"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Mux"
              SrcTerminal   1
              Points        [470, 75]
              Branch {
                DstComponent  "Cont\nSelector"
                DstTerminal   1
              }
              Branch {
                Points        [470, 115]
                DstComponent  "Cont\nSelector1"
                DstTerminal   1
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Events"
              SrcTerminal   1
              DstComponent  "Mux"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Events"
              SrcTerminal   2
              DstComponent  "Mux"
              DstTerminal   4
            }
            Connection {
              Type          Signal
              SrcComponent  "Events"
              SrcTerminal   3
              DstComponent  "Mux"
              DstTerminal   5
            }
            Connection {
              Type          Signal
              SrcComponent  "Cont\nSelector"
              SrcTerminal   2
              DstComponent  "Pulse Divider1"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Pulse Divider1"
              SrcTerminal   2
              DstComponent  "Task"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Cont\nSelector1"
              SrcTerminal   2
              DstComponent  "Pulse Divider"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Pulse Divider"
              SrcTerminal   2
              DstComponent  "ADC"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Gain"
              SrcTerminal   2
              DstComponent  "Offset"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Offset"
              SrcTerminal   2
              DstComponent  "Output Mode"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "In1"
              SrcTerminal   1
              DstComponent  "Scale"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Output Mode"
              SrcTerminal   2
              DstComponent  "Out"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Ramp1"
              SrcTerminal   1
              DstComponent  "Gain6"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Gain6"
              SrcTerminal   2
              Points        [205, 320]
              DstComponent  "Ramp"
              DstTerminal   4
            }
            Connection {
              Type          Signal
              SrcComponent  "Scale"
              SrcTerminal   2
              Points        [205, 270]
              DstComponent  "Ramp"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "Peak Current\nController"
              SrcTerminal   3
              Points        [405, 205]
              Branch {
                DstComponent  "Gain"
                DstTerminal   1
              }
              Branch {
                Points        [405, 260]
                DstComponent  "Ramp"
                DstTerminal   1
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Ramp"
              SrcTerminal   2
              Points        [310, 295; 310, 215]
              DstComponent  "Peak Current\nController"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Sense"
              SrcTerminal   1
              DstComponent  "Peak Current\nController"
              DstTerminal   1
            }
          }
        }
      }
    }
    Component {
      Type          Subsystem
      Name          "SPI"
      Show          on
      Position      [180, 35]
      Direction     up
      Flipped       off
      Frame         [-25, -15; 25, 15]
      LabelPosition [0, 18]
      LabelAlign    up
      SampleTime    "-1"
      CodeGenDiscretizationMethod "2"
      CodeGenTarget "Generic"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      Terminal {
        Type          Input
        Position      [-25, -5]
        Direction     left
      }
      Terminal {
        Type          Output
        Position      [29, -5]
        Direction     right
      }
      Terminal {
        Type          Input
        Position      [-25, 5]
        Direction     left
      }
      Terminal {
        Type          Input
        Position      [-25, 10]
        Direction     left
      }
      Terminal {
        Type          Input
        Position      [-25, 10]
        Direction     left
      }
      Terminal {
        Type          Output
        Position      [29, 5]
        Direction     right
      }
      Terminal {
        Type          Input
        Position      [-25, 10]
        Direction     left
      }
      Terminal {
        Type          Input
        Position      [-25, 10]
        Direction     left
      }
      Schematic {
        Location      [323, 499; 606, 667]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetCode
          Name          "SPI Master"
          Show          on
          Position      [65, 140]
          Direction     up
          Flipped       off
          Frame         [-25, -30; 25, 30]
          LabelPosition [0, 33]
          LabelAlign    up
          TargetPortIndices "1 2 3 4"
          SampleTime    "0"
          EnforceBaseTask "1"
          CodeFcnLang   "2"
          CodeFcn       "if Target.Name == \"Generic\" then\n"
"  local OutputSignal = StringList:new()\n"
"\n"
"  OutputSignal[1] = {}\n"
"  for i = 1, Block.Mask.dim do\n"
"    OutputSignal[1][i] = \"0.0\"\n"
"  end\n"
"  OutputSignal[2] = {}\n"
"  OutputSignal[2][1] = \"0.0\"\n"
"  OutputSignal[3] = {}\n"
"  OutputSignal[3][1] = \"0.0\"\n"
"  return {\n"
"    OutputSignal = OutputSignal,\n"
"  }\n"
"end\n"
"\n"
"local block = Target.Coder.CreateTargetBlock(\"TI C2000\", \"spi_master\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
          NonDftCodeFcn "if Target.Name == \"Generic\" then\n"
"  return {}\n"
"end\n"
"\n"
"local block = Target.Coder.GetTargetBlock(Block.UserData.bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()"
          MaskType      "SPI Master"
          MaskDescription "Implement SPI master connected to one or multiple s"
"laves."
          MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/spimaster_c2000.htm"
"l"
          MaskDisplay   "Icon:text(0, -4, 'SPI\\nMaster')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates off
          MaskDialogCallback "local parent = Block:get(\"Parent\")\n"
"local blockName = Block:get(\"Name\")\n"
"local showParentTerms = Dialog:get(\"offlineSimulation\") ~= \"1\"\n"
"parent:showTerminal(\"%s / o \" % { blockName }, showParentTerms)\n"
"parent:showTerminal(\"%s / v \" % { blockName }, showParentTerms)\n"
"parent:showTerminal(\"%s / In \" % { blockName }, showParentTerms)\n"
"parent:showTerminal(\"%s / Out \" % { blockName }, showParentTerms)\n"
"\n"
"Dialog:set('mode', 'Visible', Dialog:get('mode')~='5')\n"
"Dialog:set('Mode', 'Visible', Dialog:get('mode')=='5')"
          Parameter {
            Variable      "spi"
            Prompt        "SPI module"
            Type          FixedText
            PossibleValues {"A", "B"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "clk"
            Prompt        "Clock rate"
            Type          FreeText
            Value         "5000000"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "charlen"
            Prompt        "Bits per word (1-16)"
            Type          FreeText
            Value         "8"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "mode"
            Prompt        "Mode [CPOL, CPHA] (deprecated, set to 'hide')"
            Type          FixedText
            PossibleValues {"2 - [1, 1]", "3 - [1, 0]", "0 - [0, 1]", "1 - [0,"
" 0]", "hide"}
            Value         "5"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "Mode"
            Prompt        "Mode [CPOL, CPHA]"
            Type          FixedText
            PossibleValues {"0 - [0, 1]", "1 - [0, 0]", "2 - [1, 1]", "3 - [1,"
" 0]"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "pinset"
            Prompt        "Serial GPIO numbers [SIMO, SOMI, CLK]"
            Type          FreeText
            Value         "[16,17,18]"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "csgpio"
            Prompt        "/CS GPIO number(s)"
            Type          FreeText
            Value         "19"
            Show          off
            Tunable       off
            TabName       "Slave(s)"
          }
          Parameter {
            Variable      "dim"
            Prompt        "Words per transmission (vector for multiple slaves)"
            Type          FreeText
            Value         "1"
            Show          off
            Tunable       off
            TabName       "Slave(s)"
          }
          Parameter {
            Variable      "offlineSimulation"
            Prompt        "Offline simulation"
            Type          FixedText
            PossibleValues {"disable", "enable"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Output
            Position      [29, 20]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-25, 20]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [29, -20]
            Direction     right
          }
          Terminal {
            Type          Output
            Position      [29, -10]
            Direction     right
          }
          Schematic {
            Location      [553, 486; 1639, 805]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Output
              Name          "RX"
              Show          on
              Position      [135, 40]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "TX"
              Show          on
              Position      [55, 85]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "HasDirectFeedthrough"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "sum(dim)"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          " v"
              Show          on
              Position      [135, 130]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "  o"
              Show          on
              Position      [135, 175]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "4"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          TargetInput
              Name          "In"
              Show          on
              Position      [55, 40]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "sum(dim)"
                Show          off
              }
            }
            Component {
              Type          TargetOutput
              Name          "Out"
              Show          on
              Position      [135, 85]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          TargetInput
              Name          "v"
              Show          on
              Position      [55, 130]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          TargetInput
              Name          "o"
              Show          on
              Position      [55, 175]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In"
              SrcTerminal   1
              DstComponent  "RX"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "TX"
              SrcTerminal   1
              DstComponent  "Out"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "v"
              SrcTerminal   1
              DstComponent  " v"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "o"
              SrcTerminal   1
              DstComponent  "  o"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          TargetCode
          Name          "SPI Slave"
          Show          on
          Position      [65, 55]
          Direction     up
          Flipped       off
          Frame         [-25, -30; 25, 30]
          LabelPosition [0, 33]
          LabelAlign    up
          TargetPortIndices "5 6 7 8"
          SampleTime    "0"
          EnforceBaseTask "1"
          CodeFcnLang   "2"
          CodeFcn       "if Target.Name == \"Generic\" then\n"
"  local OutputSignal = StringList:new()\n"
"\n"
"  OutputSignal[1] = {}\n"
"  for i = 1, Block.Mask.dim do\n"
"    OutputSignal[1][i] = \"0.0\"\n"
"  end\n"
"  OutputSignal[2] = {}\n"
"  OutputSignal[2][1] = \"0.0\"\n"
"  OutputSignal[3] = {}\n"
"  OutputSignal[3][1] = \"0.0\"\n"
"  return {\n"
"    OutputSignal = OutputSignal,\n"
"  }\n"
"end\n"
"\n"
"local block = Target.Coder.CreateTargetBlock(\"TI C2000\", \"spi_slave\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
          NonDftCodeFcn "if Target.Name == \"Generic\" then\n"
"  return {}\n"
"end\n"
"\n"
"local block = Target.Coder.GetTargetBlock(Block.UserData.bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()"
          MaskType      "SPI Slave"
          MaskDescription "Implement SPI slave via digital outputs/inputs. "
          MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/spislave_c2000.html"
          MaskDisplay   "Icon:text(0, -4, 'SPI\\nSlave')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')\n"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates off
          MaskDialogCallback "local parent = Block:get(\"Parent\")\n"
"local blockName = Block:get(\"Name\")\n"
"local showParentTerms = Dialog:get(\"offlineSimulation\") ~= \"1\"\n"
"parent:showTerminal(\"%s / o \" % { blockName }, showParentTerms)\n"
"parent:showTerminal(\"%s / v \" % { blockName }, showParentTerms)\n"
"parent:showTerminal(\"%s / In \" % { blockName }, showParentTerms)\n"
"parent:showTerminal(\"%s / Out \" % { blockName }, showParentTerms)\n"
"\n"
"Dialog:set('mode', 'Visible', Dialog:get('mode')~='5')\n"
"Dialog:set('Mode', 'Visible', Dialog:get('mode')=='5')"
          Parameter {
            Variable      "spi"
            Prompt        "SPI module"
            Type          FixedText
            PossibleValues {"A", "B"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "charlen"
            Prompt        "Bits per word (1-16)"
            Type          FreeText
            Value         "8"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "mode"
            Prompt        "Mode [CPOL, CPHA] (deprecated, set to 'hide')"
            Type          FixedText
            PossibleValues {"2 - [1, 1]", "3 - [1, 0]", "0 - [0, 1]", "1 - [0,"
" 0]", "hide"}
            Value         "5"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "Mode"
            Prompt        "Mode [CPOL, CPHA]"
            Type          FixedText
            PossibleValues {"0 - [0, 1]", "1 - [0, 0]", "2 - [1, 1]", "3 - [1,"
" 0]"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "dim"
            Prompt        "Words per transmission"
            Type          FreeText
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "pinset"
            Prompt        "GPIO numbers [SIMO, SOMI, CLK, /CS]"
            Type          FreeText
            Value         "[16,17,18,19]"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "offlineSimulation"
            Prompt        "Offline simulation"
            Type          FixedText
            PossibleValues {"disable", "enable"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Output
            Position      [29, 20]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-25, 20]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [29, -20]
            Direction     right
          }
          Terminal {
            Type          Output
            Position      [29, -10]
            Direction     right
          }
          Schematic {
            Location      [857, 294; 1777, 832]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          TargetInput
              Name          "In"
              Show          on
              Position      [65, 85]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "dim"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "RX"
              Show          on
              Position      [150, 85]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          TargetOutput
              Name          "Out"
              Show          on
              Position      [150, 130]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "TX"
              Show          on
              Position      [65, 130]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "HasDirectFeedthrough"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "dim"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          " v"
              Show          on
              Position      [150, 170]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          " o"
              Show          on
              Position      [150, 205]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "4"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          TargetInput
              Name          "v"
              Show          on
              Position      [65, 170]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          TargetInput
              Name          "o"
              Show          on
              Position      [65, 205]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "In"
              SrcTerminal   1
              DstComponent  "RX"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "TX"
              SrcTerminal   1
              DstComponent  "Out"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "v"
              SrcTerminal   1
              DstComponent  " v"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "o"
              SrcTerminal   1
              DstComponent  " o"
              DstTerminal   1
            }
          }
        }
      }
    }
    Component {
      Type          Subsystem
      Name          "CAN"
      Show          on
      Position      [180, 90]
      Direction     up
      Flipped       off
      Frame         [-25, -15; 25, 15]
      LabelPosition [0, 18]
      LabelAlign    up
      SampleTime    "-1"
      CodeGenDiscretizationMethod "2"
      CodeGenTarget "Generic"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      Terminal {
        Type          Input
        Position      [-25, -5]
        Direction     left
      }
      Terminal {
        Type          Input
        Position      [-25, 5]
        Direction     left
      }
      Terminal {
        Type          Output
        Position      [29, -5]
        Direction     right
      }
      Terminal {
        Type          Output
        Position      [29, 5]
        Direction     right
      }
      Schematic {
        Location      [216, 247; 786, 666]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          CanUnpack
          Name          "CAN Unpack"
          Show          on
          Position      [60, 230]
          Direction     up
          Flipped       off
          Frame         [-30, -15; 30, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          Parameter {
            Variable      "SignalConfiguration"
            Value         "AAAACQAAAAAA"
            Show          off
          }
          Parameter {
            Variable      "CanID"
            Value         "0x001"
            Show          off
          }
        }
        Component {
          Type          CanPack
          Name          "CAN Pack"
          Show          on
          Position      [60, 280]
          Direction     up
          Flipped       off
          Frame         [-30, -15; 30, 15]
          LabelPosition [0, 18]
          LabelAlign    up
          Parameter {
            Variable      "SignalConfiguration"
            Value         "AAAACQAAAAAA"
            Show          off
          }
          Parameter {
            Variable      "CanID"
            Value         "0x000"
            Show          off
          }
        }
        Component {
          Type          TargetCode
          Name          "CAN Port"
          Show          on
          Position      [60, 35]
          Direction     up
          Flipped       off
          Frame         [-30, -20; 30, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          TargetPortIndices ""
          SampleTime    "0"
          EnforceBaseTask "1"
          CodeFcnLang   "2"
          CodeFcn       "if Target.Name == \"Generic\" then\n"
"  local OutputSignal = StringList:new()\n"
"  OutputSignal[1] = {}\n"
"  OutputSignal[1][1] = \"0.0\"\n"
"  OutputSignal[2] = {}\n"
"  OutputSignal[2][1] = \"0.0\"\n"
"  return {\n"
"    OutputSignal = OutputSignal,\n"
"  }\n"
"end\n"
"\n"
"local block\n"
"if Block.Mask.MCanInterface < 1 then\n"
"\tblock = Target.Coder.CreateTargetBlock(\"TI C2000\", \"can_port\")\n"
"else\n"
"\tblock = Target.Coder.CreateTargetBlock(\"TI C2000\", \"mcan_port\")\n"
"end\n"
"\n"
"return block:getDirectFeedthroughCode()"
          NonDftCodeFcn "if Target.Name == \"Generic\" then\n"
"  return {}\n"
"end\n"
"\n"
"local block = Target.Coder.GetTargetBlock(Block.UserData.bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()"
          MaskType      "CAN Port"
          MaskDescription "Sets up a CAN communication port. Signals 'bus-on' "
"status on the 'on' terminal and  'error active' status on the 'ea' terminal."
          MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/can_port_c2000.html"
          MaskDisplay   "if tonumber(Dialog:get('interface')) < 10 then\n"
"  local unit = Dialog:get('interface')-1\n"
"  Icon:text(0, 0, 'CAN %s' % {string.char(65+unit)})\n"
"else\n"
"  Icon:text(0, 0, 'MCAN')\n"
"end\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')\n"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates off
          MaskInit      "curComp = plecs('get','','CurrentComponent');\n"
"curPath = plecs('get','','CurrentCircuit');\n"
"path=curComp(length(curPath)+2:end);\n"
"\n"
"if interface ~= 1 && interface ~= 2 && interface ~= 10,\n"
"  error('\"CAN interface\" must be 1 (CAN A), 2 (CAN B) or 10 (MCAN).');\n"
"end\n"
"MCanInterface = interface - 9;\n"
"\n"
          MaskDialogCallback "local isMCan = tonumber(Dialog:get('interface'))"
" >= 10\n"
"local enableAdvancedConfig = Dialog:get('AdvancedBitRateConf') == '2'\n"
"local enableBitrateSwitching = Dialog:get('BitrateSwitching') == '2'\n"
"local enableSSP = Dialog:get('EnableSSP') == '2'\n"
"\n"
"Dialog:set('baud', 'Visible', not isMCan)\n"
"Dialog:set('BitSamplePoint', 'Visible', not isMCan)\n"
"Dialog:set('BitInTq', 'Visible', not isMCan and enableAdvancedConfig)\n"
"Dialog:set('SjwInTq', 'Visible', not isMCan and enableAdvancedConfig)\n"
"\n"
"Dialog:set('BitrateSwitching', 'Visible', isMCan)\n"
"Dialog:set('NomBitRate', 'Visible', isMCan)\n"
"Dialog:set('NomBitSamplePoint', 'Visible', isMCan)\n"
"Dialog:set('DataBitRate', 'Visible', isMCan and enableBitrateSwitching)\n"
"Dialog:set('DataBitSamplePoint', 'Visible', isMCan and enableBitrateSwitching"
")\n"
"\n"
"Dialog:set('NominalBitInTq', 'Visible', isMCan and enableAdvancedConfig)\n"
"Dialog:set('NominalSjwInTq', 'Visible', isMCan and enableAdvancedConfig)\n"
"Dialog:set('DataBitInTq', 'Visible', isMCan and enableAdvancedConfig and enab"
"leBitrateSwitching)\n"
"Dialog:set('DataSjwInTq', 'Visible', isMCan and enableAdvancedConfig and enab"
"leBitrateSwitching)\n"
"\n"
"Dialog:set('EnableSSP', 'Visible', isMCan and enableAdvancedConfig and enable"
"BitrateSwitching)\n"
"Dialog:set('SSPOffset', 'Visible', isMCan and enableAdvancedConfig and enable"
"BitrateSwitching and enableSSP)\n"
"Dialog:set('SSPFilter', 'Visible', isMCan and enableAdvancedConfig and enable"
"BitrateSwitching and enableSSP)\n"
          Parameter {
            Variable      "interface"
            Prompt        "CAN interface"
            Type          FixedText
            PossibleValues {"CAN A" = 1, "CAN B" = 2, "MCAN" = 10}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "gpio"
            Prompt        "GPIO [Rx, Tx]"
            Type          FreeText
            Value         "[30, 31]"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "auto_buson"
            Prompt        "Auto bus-on"
            Type          FixedText
            PossibleValues {"disabled", "enabled"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "baud"
            Prompt        "Baud rate"
            Type          FreeText
            Value         "250000"
            Show          off
            Tunable       off
            TabName       "Bit rate configuration"
          }
          Parameter {
            Variable      "BitSamplePoint"
            Prompt        "Bit sample point [%]"
            Type          FreeText
            Value         "60"
            Show          off
            Tunable       off
            TabName       "Bit rate configuration"
          }
          Parameter {
            Variable      "BitrateSwitching"
            Prompt        "Bit rate switching"
            Type          FixedText
            PossibleValues {"Disabled", "Enabled"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       "Bit rate configuration"
          }
          Parameter {
            Variable      "NomBitRate"
            Prompt        "Nominal bit rate [bit/s]"
            Type          FreeText
            Value         "500000"
            Show          off
            Tunable       off
            TabName       "Bit rate configuration"
          }
          Parameter {
            Variable      "NomBitSamplePoint"
            Prompt        "Nominal bit sample point [%]"
            Type          FreeText
            Value         "80"
            Show          off
            Tunable       off
            TabName       "Bit rate configuration"
          }
          Parameter {
            Variable      "DataBitRate"
            Prompt        "Data bit rate [bit/s]"
            Type          FreeText
            Value         "1000000"
            Show          off
            Tunable       off
            TabName       "Bit rate configuration"
          }
          Parameter {
            Variable      "DataBitSamplePoint"
            Prompt        "Data bit sample point [%]"
            Type          FreeText
            Value         "80"
            Show          off
            Tunable       off
            TabName       "Bit rate configuration"
          }
          Parameter {
            Variable      "AdvancedBitRateConf"
            Prompt        "Advanced configuration"
            Type          FixedText
            PossibleValues {"Disabled", "Enabled"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       "Advanced"
          }
          Parameter {
            Variable      "BitInTq"
            Prompt        "Bit length [1+Tseg1+Tseg2]"
            Type          FreeText
            Value         "16"
            Show          off
            Tunable       off
            TabName       "Advanced"
          }
          Parameter {
            Variable      "SjwInTq"
            Prompt        "SJW [Tq]"
            Type          FreeText
            Value         "3"
            Show          off
            Tunable       off
            TabName       "Advanced"
          }
          Parameter {
            Variable      "NominalBitInTq"
            Prompt        "Nominal rate bit length [1+Tseg1+Tseg2]"
            Type          FreeText
            Value         "40"
            Show          off
            Tunable       off
            TabName       "Advanced"
          }
          Parameter {
            Variable      "NominalSjwInTq"
            Prompt        "Nominal rate SJW [Tq]"
            Type          FreeText
            Value         "8"
            Show          off
            Tunable       off
            TabName       "Advanced"
          }
          Parameter {
            Variable      "DataBitInTq"
            Prompt        "Data rate bit length [1+Tseg1+Tseg2]"
            Type          FreeText
            Value         "20"
            Show          off
            Tunable       off
            TabName       "Advanced"
          }
          Parameter {
            Variable      "DataSjwInTq"
            Prompt        "Data rate SJW [Tq]"
            Type          FreeText
            Value         "4"
            Show          off
            Tunable       off
            TabName       "Advanced"
          }
          Parameter {
            Variable      "EnableSSP"
            Prompt        "Secondary sampling point (SSP)"
            Type          FixedText
            PossibleValues {"Disabled", "Enabled"}
            Value         "2"
            Show          off
            Tunable       off
            TabName       "Advanced"
          }
          Parameter {
            Variable      "SSPOffset"
            Prompt        "SSP offset [Tq]"
            Type          FreeText
            Value         "10"
            Show          off
            Tunable       off
            TabName       "Advanced"
          }
          Parameter {
            Variable      "SSPFilter"
            Prompt        "SSP filter [Tq]"
            Type          FreeText
            Value         "0"
            Show          off
            Tunable       off
            TabName       "Advanced"
          }
          Terminal {
            Type          Output
            Position      [34, -10]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [-30, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [34, 10]
            Direction     right
          }
          Schematic {
            Location      [46, 151; 937, 577]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Output
              Name          "on"
              Show          on
              Position      [390, 75]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "en"
              Show          on
              Position      [230, 75]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "HasDirectFeedthrough"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "ea"
              Show          on
              Position      [390, 115]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
          }
        }
        Component {
          Type          TargetCode
          Name          "CAN Receive"
          Show          on
          Position      [60, 170]
          Direction     up
          Flipped       off
          Frame         [-30, -25; 30, 25]
          LabelPosition [0, 28]
          LabelAlign    up
          TargetPortIndices "1 2"
          SampleTime    "0"
          EnforceBaseTask "1"
          CodeFcnLang   "2"
          CodeFcn       "if Target.Name == \"Generic\" then\n"
"  local OutputSignal = StringList:new()\n"
"  OutputSignal[1] = {}\n"
"  for idx = 1, Block.Mask.frameLength do\n"
"    OutputSignal[1][idx] = \"0\"\n"
"  end\n"
"  OutputSignal[2] = {}\n"
"  OutputSignal[2][1] = \"0\"\n"
"  return {\n"
"    OutputSignal = OutputSignal,\n"
"  }\n"
"end\n"
"\n"
"local block\n"
"if Block.Mask.MCanInterface < 1 then\n"
"\tblock = Target.Coder.CreateTargetBlock(\"TI C2000\", \"can_receive\")\n"
"else\n"
"\tblock = Target.Coder.CreateTargetBlock(\"TI C2000\", \"mcan_receive\")\n"
"end\n"
"\n"
"return block:getDirectFeedthroughCode()"
          NonDftCodeFcn "if Target.Name == \"Generic\" then\n"
"  return {}\n"
"end\n"
"\n"
"local block = Target.Coder.GetTargetBlock(Block.UserData.bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()"
          MaskType      "CAN Receive"
          MaskDescription "Receives CAN messages.\n"
"\n"
          MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/can_rx_c2000.html"
          MaskDisplay   "if tonumber(Dialog:get('interface')) < 10 then\n"
"  local unit = Dialog:get('interface')-1\n"
"  Icon:text(0, 0, 'CAN %s\\nRX' % {string.char(65+unit)})\n"
"else\n"
"  Icon:text(0, 0, 'MCAN\\nRX')\n"
"end\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')\n"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates off
          MaskInit      "if interface ~= 1 && interface ~= 2 && interface ~= 1"
"0,\n"
"  error('\"CAN interface\" must be 1 (CAN A), 2 (CAN B) or 10 (MCAN).');\n"
"end\n"
"MCanInterface = interface - 9;\n"
"\n"
"if frameFormat < 1 || frameFormat > 3,\n"
"  error('\"Frame format\" must be 1, 2 or 3.');\n"
"end\n"
"if idSource == 1 && (~isreal(canId) || ~isscalar(canId) || canId < 0 || canId"
" > 536870911 || floor(canId) ~= canId)\n"
"\terror('\"CAN ID\" must be an integer between 0 and 536870911');\n"
"end\n"
"if (~isreal(frameLength) || ~isscalar(frameLength) || frameLength < 1  || flo"
"or(frameLength) ~= frameLength)\n"
"\terror('\"Frame length\" must be positive nonzero integer.');\n"
"end\n"
"if (MCanInterface < 1) && (frameLength > 8)\n"
"\terror('\"Frame length\" must be between 1 and 8.');\n"
"elseif (frameLength > 8) && (frameLength ~= 12) && (frameLength ~= 16) && (fr"
"ameLength ~= 20) && ...\n"
"                            (frameLength ~= 24) && (frameLength ~= 32) && (fr"
"ameLength ~= 48) && (frameLength ~= 64)\n"
"\terror('\"Frame length\" must be between 1 and 8, or {12, 16, 20, 24, 32, 48"
", 64}.');\n"
"end\n"
          MaskDialogCallback "local isMCan = tonumber(Dialog:get('interface'))"
" >= 10\n"
"Block:showTerminal('f', isMCan)\n"
"\n"
"Dialog:set(\"canId\", \"Visible\", Dialog:get(\"idSource\") == \"1\")\n"
"local showId = Dialog:get(\"idSource\") ~= \"1\"\n"
"Block:showTerminal(\"id\", showId)\n"
"if not isMCan then\n"
"  Block:moveTerminal(\" d\", 34, showId and 0 or -5)\n"
"  Block:moveTerminal(\" v\", 34, showId and 10 or 5)\n"
"  Block:moveTerminal(\"id\", 30, -10)\n"
"end\n"
"\n"
"local parent = Block:get(\"Parent\")\n"
"local blockName = Block:get(\"Name\")\n"
"local showParentTerms = Dialog:get(\"offlineSimulation\") ~= \"1\"\n"
"parent:showTerminal(\"%s / d \" % { blockName }, showParentTerms)\n"
"parent:showTerminal(\"%s / v \" % { blockName }, showParentTerms)\n"
          Parameter {
            Variable      "interface"
            Prompt        "CAN interface"
            Type          FixedText
            PossibleValues {"CAN A" = 1, "CAN B" = 2, "MCAN" = 10}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "idSource"
            Prompt        "CAN ID source"
            Type          FixedText
            PossibleValues {"Parameter", "External"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "canId"
            Prompt        "CAN ID"
            Type          FreeText
            Value         "0x123"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "frameFormat"
            Prompt        "Frame format"
            Type          FixedText
            PossibleValues {"Auto", "Base (11 bit ID)", "Extended (29 bit ID)"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "frameLength"
            Prompt        "Frame length"
            Type          FreeText
            Value         "8"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "offlineSimulation"
            Prompt        "Offline simulation"
            Type          FixedText
            PossibleValues {"disable", "enable"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Output
            Position      [34, -5]
            Direction     right
          }
          Terminal {
            Type          Output
            Position      [34, 5]
            Direction     right
          }
          Terminal {
            Type          Input
            Position      [30, -10]
            Direction     right
          }
          Terminal {
            Type          Output
            Position      [34, 15]
            Direction     right
          }
          Schematic {
            Location      [455, 52; 1388, 573]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          DataType
              Name          "Data Type"
              Show          on
              Position      [230, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "DataType"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          " d"
              Show          on
              Position      [305, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "frameLength"
                Show          off
              }
            }
            Component {
              Type          TargetInput
              Name          "d"
              Show          on
              Position      [155, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "frameLength"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          " v"
              Show          on
              Position      [305, 115]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          TargetInput
              Name          "v"
              Show          on
              Position      [155, 115]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "id"
              Show          on
              Position      [160, 170]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "HasDirectFeedthrough"
                Value         "1"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "f"
              Show          on
              Position      [305, 175]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "4"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "3"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "d"
              SrcTerminal   1
              DstComponent  "Data Type"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Data Type"
              SrcTerminal   2
              DstComponent  " d"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "v"
              SrcTerminal   1
              DstComponent  " v"
              DstTerminal   1
            }
          }
        }
        Component {
          Type          TargetCode
          Name          "CAN Transmit"
          Show          on
          Position      [60, 100]
          Direction     up
          Flipped       off
          Frame         [-30, -25; 30, 25]
          LabelPosition [0, 28]
          LabelAlign    up
          TargetPortIndices "3 4"
          SampleTime    "0"
          EnforceBaseTask "1"
          CodeFcnLang   "2"
          CodeFcn       "if Target.Name == \"Generic\" then\n"
"  return {}\n"
"end\n"
"\n"
"local block\n"
"if Block.Mask.MCanInterface < 1 then\n"
"\tblock = Target.Coder.CreateTargetBlock(\"TI C2000\", \"can_transmit\")\n"
"else\n"
"\tblock = Target.Coder.CreateTargetBlock(\"TI C2000\", \"mcan_transmit\")\n"
"end\n"
"\n"
"return block:getDirectFeedthroughCode()"
          NonDftCodeFcn "if Target.Name == \"Generic\" then\n"
"  return {}\n"
"end\n"
"\n"
"local block = Target.Coder.GetTargetBlock(Block.UserData.bid)\n"
"\n"
"return block:getNonDirectFeedthroughCode()"
          MaskType      "CAN Transmit"
          MaskDescription "Sends a message on the CAN bus.\n"
"\n"
          MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/can_tx_c2000.html"
          MaskDisplay   "if tonumber(Dialog:get('interface')) < 10 then\n"
"  local unit = Dialog:get('interface')-1\n"
"  Icon:text(0, 0, 'CAN %s\\nTX' % {string.char(65+unit)})\n"
"else\n"
"  Icon:text(0, 0, 'MCAN\\nTX')\n"
"end\n"
"\n"
"local triggerType = Dialog:get('triggerType')\n"
"\n"
"local function drawTrigger(x,y,type)\n"
"  if triggerType == '1' then\n"
"    Icon:line({x, x}, {y-3, y+3})\n"
"\t Icon:line({x, x+2.5}, {y-3, y-3})\n"
" \t Icon:line({x, x-2.5}, {y+3, y+3})\t\n"
"\t Icon:line({x-2, x}, {y+1, y-1})\n"
"\t Icon:line({x+2, x}, {y+1, y-1})\n"
"  elseif triggerType == '2' then\n"
"    Icon:line({x, x}, {y-3, y+3})\n"
"\t Icon:line({x, x+2.5}, {y+3, y+3})\n"
" \t Icon:line({x, x-2.5}, {y-3, y-3})\t\n"
"\t Icon:line({x-2, x}, {y-1, y+1})\n"
"\t Icon:line({x+2, x}, {y-1, y+1})\n"
"  else\n"
"    x = x - 2.5\n"
"    Icon:line({x, x}, {y-3, y+3})\n"
"\t Icon:line({x, x+2.5}, {y-3, y-3})\n"
" \t Icon:line({x, x-2.5}, {y+3, y+3})\t\n"
"\t Icon:line({x-2, x}, {y+1, y-1})\n"
"\t Icon:line({x+2, x}, {y+1, y-1})\n"
"\t x = x + 5\n"
"\t Icon:line({x, x}, {y-3, y+3})\n"
"\t Icon:line({x, x+2.5}, {y+3, y+3})\n"
" \t Icon:line({x, x-2.5}, {y-3, y-3})\t\n"
"\t Icon:line({x-2, x}, {y-1, y+1})\n"
"\t Icon:line({x+2, x}, {y-1, y+1})\n"
"  end\n"
"end\n"
"\n"
"\n"
"if tonumber(Dialog:get('execution')) == 2 then\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  if direction == 0.0 then\n"
"    if flipped then\n"
"\t   drawTrigger(-13, 0, triggerType)\n"
"    else\n"
"\t   drawTrigger(13, 0, triggerType)\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    if flipped then\n"
"\t   drawTrigger(0, -15, triggerType)\n"
"    else\n"
"\t   drawTrigger(0, 15, triggerType)\n"
"    end  \n"
"  end\n"
"  if direction == 0.5 then\n"
"    if flipped then\n"
"\t   drawTrigger(13, 0, triggerType)\n"
"    else\n"
"\t   drawTrigger(-13, 0, triggerType)\n"
"    end \n"
"  end\n"
"  if direction == 0.75 then\n"
"    if flipped then\n"
"\t   drawTrigger(0, 15, triggerType) \n"
"    else\n"
"\t   drawTrigger(0, -15, triggerType)\n"
"    end \n"
"  end \n"
"end\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates off
          MaskInit      "if execution == 1,\n"
"  triggerType = 1;\n"
"end\n"
"if interface ~= 1 && interface ~= 2 && interface ~= 10,\n"
"  error('\"CAN interface\" must be 1 (CAN A), 2 (CAN B) or 10 (MCAN).');\n"
"end\n"
"MCanInterface = interface - 9;\n"
"if idSource == 1 && (~isreal(canId) || ~isscalar(canId) || canId < 0 || canId"
" > 536870911 || floor(canId) ~= canId)\n"
"\terror('\"CAN ID\" must be an integer between 0 and 536870911');\n"
"end\n"
          MaskDialogCallback "local isMCan = tonumber(Dialog:get('interface'))"
" >= 10\n"
"\n"
"Dialog:set(\"triggerType\", \"Visible\", Dialog:get(\"execution\") ~= \"1\")"
"\n"
"Dialog:set(\"canId\", \"Visible\", Dialog:get(\"idSource\") ~= \"2\")\n"
"Dialog:set(\"EnableBitRateSwitching\", \"Visible\", isMCan)\n"
"\n"
"local showId = Dialog:get(\"idSource\") ~= \"1\"\n"
"Block:showTerminal(\"t\", Dialog:get(\"execution\") ~= \"1\")\n"
"Block:moveTerminal(\"d\", -30, showId and 5 or 0)\n"
"Block:showTerminal(\"id\", showId)\n"
"Block:moveTerminal(\"id\", -30, -5)\n"
"\n"
"local parent = Block:get(\"Parent\")\n"
"local blockName = Block:get(\"Name\")\n"
"local showParentTerms = Dialog:get(\"offlineSimulation\") ~= \"1\"\n"
"parent:showTerminal(\"%s / data \" % { blockName }, showParentTerms)\n"
"parent:showTerminal(\"%s / v \" % { blockName }, showParentTerms)\n"
          Parameter {
            Variable      "interface"
            Prompt        "CAN interface"
            Type          FixedText
            PossibleValues {"CAN A" = 1, "CAN B" = 2, "MCAN" = 10}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "idSource"
            Prompt        "CAN ID source"
            Type          FixedText
            PossibleValues {"Parameter", "External"}
            Value         "2"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "canId"
            Prompt        "CAN ID"
            Type          FreeText
            Value         "0x123"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "frameFormat"
            Prompt        "Frame format"
            Type          FixedText
            PossibleValues {"Auto", "Base (11 bit ID)", "Extended (29 bit ID)"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "EnableBitRateSwitching"
            Prompt        "Bit rate switching"
            Type          FixedText
            PossibleValues {"Disabled", "Enabled"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "execution"
            Prompt        "Execution"
            Type          FixedText
            PossibleValues {"regular", "triggered"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "triggerType"
            Prompt        "Trigger type"
            Type          FixedText
            PossibleValues {"rising", "falling", "either"}
            Value         "3"
            Show          off
            Tunable       off
            TabName       ""
          }
          Parameter {
            Variable      "offlineSimulation"
            Prompt        "Offline simulation"
            Type          FixedText
            PossibleValues {"disable", "enable"}
            Value         "1"
            Show          off
            Tunable       off
            TabName       ""
          }
          Terminal {
            Type          Input
            Position      [-30, 5]
            Direction     left
          }
          Terminal {
            Type          Input
            Position      [0, -25]
            Direction     up
          }
          Terminal {
            Type          Input
            Position      [-30, -5]
            Direction     left
          }
          Schematic {
            Location      [849, 158; 1853, 393]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "d"
              Show          on
              Position      [155, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "HasDirectFeedthrough"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          DataType
              Name          "Data Type"
              Show          on
              Position      [230, 80]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "DataType"
                Value         "2"
                Show          off
              }
            }
            Component {
              Type          TargetOutput
              Name          "data"
              Show          on
              Position      [515, 85]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "t"
              Show          off
              Position      [265, 25]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "HasDirectFeedthrough"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Subsystem
              Name          "Triggered\nSubsystem"
              Show          on
              Position      [345, 80]
              Direction     up
              Flipped       off
              Frame         [-25, -15; 25, 15]
              LabelPosition [0, 18]
              LabelAlign    up
              TreatAsAtomicUnit on
              SampleTime    "-1"
              CodeGenDiscretizationMethod "2"
              CodeGenTarget "Generic"
              MaskDisplayLang "2"
              MaskIconFrame on
              MaskIconOpaque off
              MaskIconRotates on
              Terminal {
                Type          Input
                Position      [-25, 0]
                Direction     left
                Index         "1"
              }
              Terminal {
                Type          Output
                Position      [29, 0]
                Direction     right
                Index         "1"
              }
              Terminal {
                Type          Input
                Position      [0, -15]
                Direction     up
                Index         "2"
              }
              Schematic {
                Location      [415, 55; 699, 222]
                ZoomFactor    1
                SliderPosition [0, 0]
                ShowBrowser   off
                BrowserWidth  100
                Component {
                  Type          Input
                  Name          "In1"
                  Show          on
                  Position      [60, 80]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "1"
                    Show          on
                  }
                  Parameter {
                    Variable      "DataType"
                    Value         "10"
                    Show          off
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                }
                Component {
                  Type          Output
                  Name          "Out1"
                  Show          on
                  Position      [220, 80]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "2"
                    Show          on
                  }
                  Parameter {
                    Variable      "InitialOutput"
                    Value         "[]"
                    Show          off
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                }
                Component {
                  Type          Trigger
                  Name          "Trigger"
                  Show          on
                  Position      [140, 40]
                  Direction     right
                  Flipped       off
                  Parameter {
                    Variable      "Index"
                    Value         "3"
                    Show          on
                  }
                  Parameter {
                    Variable      "Width"
                    Value         "-1"
                    Show          off
                  }
                  Parameter {
                    Variable      "TriggerType"
                    Value         "triggerType"
                    Show          off
                  }
                  Parameter {
                    Variable      "ShowOutput"
                    Value         "1"
                    Show          off
                  }
                }
                Connection {
                  Type          Signal
                  SrcComponent  "In1"
                  SrcTerminal   1
                  DstComponent  "Out1"
                  DstTerminal   1
                }
              }
            }
            Component {
              Type          SignalSwitch
              Name          "Switch"
              Show          on
              Position      [445, 85]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Criteria"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Threshold"
                Value         "0"
                Show          off
              }
            }
            Component {
              Type          Constant
              Name          "Constant"
              Show          on
              Position      [405, 45]
              Direction     right
              Flipped       off
              Frame         [-10, -10; 10, 10]
              LabelPosition [0, 13]
              LabelAlign    up
              Parameter {
                Variable      "Value"
                Value         "execution-1"
                Show          off
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
            }
            Component {
              Type          ZeroOrderHold
              Name          "Zero-Order\nHold"
              Show          on
              Position      [350, 155]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Ts"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          TargetOutput
              Name          "v"
              Show          on
              Position      [515, 25]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Input
              Name          "id"
              Show          on
              Position      [155, 130]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "3"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "HasDirectFeedthrough"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "d"
              SrcTerminal   1
              DstComponent  "Data Type"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Triggered\nSubsystem"
              SrcTerminal   2
              DstComponent  "Switch"
              DstTerminal   2
            }
            Connection {
              Type          Signal
              SrcComponent  "Constant"
              SrcTerminal   1
              Points        [445, 45]
              DstComponent  "Switch"
              DstTerminal   4
            }
            Connection {
              Type          Signal
              SrcComponent  "Switch"
              SrcTerminal   1
              DstComponent  "data"
              DstTerminal   1
            }
            Connection {
              Type          Signal
              SrcComponent  "Zero-Order\nHold"
              SrcTerminal   2
              Points        [390, 155; 390, 90]
              DstComponent  "Switch"
              DstTerminal   3
            }
            Connection {
              Type          Signal
              SrcComponent  "t"
              SrcTerminal   1
              Points        [345, 25]
              Branch {
                DstComponent  "Triggered\nSubsystem"
                DstTerminal   3
              }
              Branch {
                DstComponent  "v"
                DstTerminal   1
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "Data Type"
              SrcTerminal   2
              Points        [300, 80]
              Branch {
                DstComponent  "Triggered\nSubsystem"
                DstTerminal   1
              }
              Branch {
                Points        [300, 155]
                DstComponent  "Zero-Order\nHold"
                DstTerminal   1
              }
            }
          }
        }
      }
    }
    Component {
      Type          Subsystem
      Name          "PIL"
      Show          on
      Position      [180, 140]
      Direction     up
      Flipped       off
      Frame         [-25, -15; 25, 15]
      LabelPosition [0, 18]
      LabelAlign    up
      SampleTime    "-1"
      CodeGenDiscretizationMethod "2"
      CodeGenTarget "Generic"
      MaskDisplayLang "2"
      MaskIconFrame on
      MaskIconOpaque off
      MaskIconRotates on
      Schematic {
        Location      [888, 221; 1169, 455]
        ZoomFactor    1
        SliderPosition [0, 0]
        ShowBrowser   off
        BrowserWidth  100
        Component {
          Type          TargetCode
          Name          "Read"
          Show          on
          Position      [100, 115]
          Direction     up
          Flipped       off
          Frame         [-25, -20; 25, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          TargetPortIndices ""
          SampleTime    "0"
          EnforceBaseTask "1"
          CodeFcnLang   "2"
          CodeFcn       "if Target.Name == \"Generic\" then\n"
"\tlocal OutputCode = StringList:new()\n"
"  \treturn {\n"
"   \tOutputCode = OutputCode,\n"
"  \t}\n"
"end\n"
"\n"
"local block = Target.Coder.CreateTargetBlock(\"TI C2000\", \"pil_read\")\n"
"\n"
"return block:getDirectFeedthroughCode()"
          MaskType      "Read Probe"
          MaskDescription "Provide read access to signal during a PIL simulati"
"on."
          MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/readprobe_c2000.htm"
"l"
          MaskDisplay   "Icon:text('Read\\nProbe')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates off
          MaskInit      "curComp = plecs('get','','CurrentComponent');\n"
"curPath = plecs('get','','CurrentCircuit');\n"
"path=curComp(length(curPath)+2:end);"
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
          }
          Schematic {
            Location      [402, 284; 1440, 875]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "In1"
              Show          off
              Position      [120, 75]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "HasDirectFeedthrough"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
          }
        }
        Component {
          Type          TargetCode
          Name          "Override"
          Show          on
          Position      [100, 50]
          Direction     up
          Flipped       off
          Frame         [-25, -20; 25, 20]
          LabelPosition [0, 23]
          LabelAlign    up
          TargetPortIndices ""
          SampleTime    "0"
          EnforceBaseTask "1"
          CodeFcnLang   "2"
          CodeFcn       "if Target.Name == \"Generic\" then\n"
"\tlocal OutputCode = StringList:new()\n"
"\tlocal OutputSignal = StringList:new()\n"
"  \n"
"\tfor i = 1, #Block.InputSignal[1] do\n"
"   \tOutputSignal:append(Block.InputSignal[1][i])\n"
"  \tend\n"
"  \treturn {\n"
"    \tOutputCode = OutputCode,\n"
"    \tOutputSignal = { OutputSignal },\n"
"  \t}\n"
"end\n"
"\n"
"local block = Target.Coder.CreateTargetBlock(\"TI C2000\", \"pil_override\")"
"\n"
"\n"
"return block:getDirectFeedthroughCode()"
          MaskType      "Override Probe"
          MaskDescription "Allow modifying input value during a PIL simulation"
"."
          MaskHelp      "qthelp://com.plexim.c2000.1.0/doc/overrideprobe_c2000"
".html"
          MaskDisplay   "Icon:text('Override\\nProbe')\n"
"\n"
"local function drawDecoration(color, text)\n"
"  Icon:color(color[1], color[2], color[3])\n"
"  local flipped = Block:get(\"Flipped\")\n"
"  local direction = Block:get(\"Direction\")\n"
"  local frame = Block:get(\"Frame\")\n"
"  local xLeft = frame[1]\n"
"  local xTot = frame[3]\n"
"  local yUp = frame[2]\n"
"  local yTot = frame[4]\n"
"  local s1 = [[<b><i>]] .. string.sub(text,1,1) .. [[<i><b>]]\n"
"  local s2 = [[<b><i>]] .. string.sub(text,2,2) .. [[<i><b>]]\n"
"  local x, y, xT1, xT2, yT1, yT2, g, position\n"
"  if direction == 0.0 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = yUp+13\n"
"      position = 'upLeft'\n"
"    else\n"
"      xT1 = xLeft+4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = xLeft+4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'upRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.25 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = -xLeft-8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upRight'\n"
"    else\n"
"      xT1 = -xLeft-8\n"
"      yT1 = -yUp-4.5\n"
"      xT2 = -xLeft-13\n"
"      yT2 = -yUp-4.5\n"
"      position = 'lowRight'\n"
"    end\n"
"  end\n"
"  if direction == 0.5 then\n"
"    x = -xLeft+yUp\n"
"    y = xLeft-yUp\n"
"    g = -1\n"
"    if flipped then\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = -yUp-8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = -yUp-13\n"
"      position = 'lowRight'\n"
"    else\n"
"      xT1 = -xLeft-4.5\n"
"      yT1 = yUp+8\n"
"      xT2 = -xLeft-4.5\n"
"      yT2 = yUp+13\n"
"      position = 'lowLeft'\n"
"    end\n"
"  end\n"
"  if direction == 0.75 then\n"
"    x = 0\n"
"    y = 0\n"
"    g = 1\n"
"    if flipped then\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+yTot-4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+yTot-4.5\n"
"      position = 'lowLeft'\n"
"    else\n"
"      xT1 = xLeft+8\n"
"      yT1 = yUp+4.5\n"
"      xT2 = xLeft+13\n"
"      yT2 = yUp+4.5\n"
"      position = 'upLeft'\n"
"    end\n"
"  end \n"
"  if position == 'upLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+8+y,yUp+"
"8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+10+y,10,10,180,-90)\n"
"    Icon:text(xT1, yT1, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"    Icon:text(xT2, yT2, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color',"
" {255,255,255})\n"
"  elseif position == 'upRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+8+y,yUp+8+y,yUp+1+y,yUp+1+y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+10+y,10,10,0,90)\n"
"    Icon:text(g*(-xT2), g*yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"    Icon:text(g*(-xT1), g*yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', '"
"Color', {255,255,255})\n"
"  elseif position == 'lowRight' then\n"
"    Icon:patch({xLeft+xTot-16.9-x,xLeft+xTot-x,xLeft+xTot-5.55-x,xLeft+xTot-1"
"6.9-x},{yUp+yTot-8-y,yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+xTot-10-x,yUp+yTot-10-y,10,10,0,-90)\n"
"    Icon:text(-xT2, -yT2, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"    Icon:text(-xT1, -yT1, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Color"
"', {255,255,255})\n"
"  elseif position == 'lowLeft' then\n"
"    Icon:patch({xLeft+x,xLeft+16.9+x,xLeft+16.9+x,xLeft+5.55+x},{yUp+yTot-8-y"
",yUp+yTot-8-y,yUp+yTot-1-y,yUp+yTot-1-y})\n"
"    Icon:color(0,0,0)\n"
"    Icon:arc(xLeft+10+x,yUp+yTot-10-y,10,10,180,90)\n"
"    Icon:text(g*xT1, -yT1*g, s1, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"    Icon:text(g*xT2, -yT2*g, s2, 'FontSize', 9, 'TextFormat', 'RichText', 'Co"
"lor', {255,255,255})\n"
"  end\n"
"end\n"
"\n"
"drawDecoration({204,0,0}, 'TI')"
          MaskDisplayLang "2"
          MaskIconFrame on
          MaskIconOpaque off
          MaskIconRotates off
          MaskInit      "curComp = plecs('get','','CurrentComponent');\n"
"curPath = plecs('get','','CurrentCircuit');\n"
"path=curComp(length(curPath)+2:end);"
          Terminal {
            Type          Input
            Position      [-25, 0]
            Direction     left
          }
          Terminal {
            Type          Output
            Position      [29, 0]
            Direction     right
          }
          Schematic {
            Location      [588, 121; 1920, 821]
            ZoomFactor    1
            SliderPosition [0, 0]
            ShowBrowser   off
            BrowserWidth  100
            Component {
              Type          Input
              Name          "in"
              Show          off
              Position      [185, 70]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "1"
                Show          on
              }
              Parameter {
                Variable      "InitialOutput"
                Value         "[]"
                Show          off
              }
              Parameter {
                Variable      "HasDirectFeedthrough"
                Value         "2"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Component {
              Type          Output
              Name          "Out1"
              Show          off
              Position      [255, 70]
              Direction     right
              Flipped       off
              Parameter {
                Variable      "Index"
                Value         "2"
                Show          on
              }
              Parameter {
                Variable      "DataType"
                Value         "10"
                Show          off
              }
              Parameter {
                Variable      "Width"
                Value         "-1"
                Show          off
              }
            }
            Connection {
              Type          Signal
              SrcComponent  "in"
              SrcTerminal   1
              DstComponent  "Out1"
              DstTerminal   1
            }
          }
        }
      }
    }
  }
}
DemoSignature "NP4rUXrV4DwtnUteiK0ECwhqYtvdluCfsIrVwMbvFBM="
